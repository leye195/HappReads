(this.webpackJsonpgoodreads=this.webpackJsonpgoodreads||[]).push([[0],{173:function(e,t,n){"use strict";n.r(t);var a,r,o,l,c,i,s=n(0),u=n.n(s),p=n(28),m=n.n(p),d=n(11),E=n(19),h=n(3),b=n.n(h),v=n(13),f=n(5),g=n(6),k=n(7),O=n(8),w=n(9),y=n(66),j=n.n(y),S=n(12),_=n.n(S),N=_.a.bind(j.a),C=function(){return u.a.createElement("div",{className:N("home-section")},u.a.createElement("div",{className:N("words")},u.a.createElement("h3",null,"With Happyness"),u.a.createElement("h4",null,"\ucc45\uc744 \uacf5\uc720 \ud558\uace0 \uc790\uc2e0\uc758 \uc778\uc0dd \ucc45\uc744 \ucc3e\uc544\ubcf4\uc138\uc694")))},I=n(67),R=n.n(I),x=n(68),L=n.n(x),T=n(34),U=n(69),D=n.n(U),A=n(17),P=n(14),G=n(1),M=n(10),F=n(174),V=n(15),B=n.n(V),W=function(e,t){return B.a.post("http://localhost:8080/login",{email:e,password:t})},H=function(e){return B.a.create({headers:{Authorization:"".concat(e)}}).post("http://localhost:8080/profile")},q=function(e,t,n,a,r,o){return B.a.post("http://localhost:8080/shelve",{email:e,isbn:t,title:n,authors:a,type:r,thumbnail:o})},K=function(e,t,n,a){return B.a.post("http://localhost:8080/review/like",{type:e,id:t,uid:n,m_id:a})},Y=function(e,t,n){return B.a.post("http://localhost:8080/shelve/".concat(t),{uid:e,type:n})},z=function(e){return{type:"USER_CHECK",payload:H(e)}},X=function(e,t,n,a,r,o){return{type:"POST_SHELVE",payload:q(e,t,n,a,r,o)}},J=function(e,t,n,a){return{type:"LIKE_REVIEW",payload:K(e,t,n,a)}},$=Object(F.a)((a={},Object(G.a)(a,"LOGIN_PENDING",(function(e,t){return Object(M.a)({},e,{pending:!0,error:!1})})),Object(G.a)(a,"LOGIN_SUCCESS",(function(e,t){return{profile:t.payload.data,pending:!1,error:!1,isLoggedIn:!0}})),Object(G.a)(a,"LOGIN_FAILURE",(function(e,t){return Object(M.a)({},e,{pending:!1,error:!0,isLoggedIn:!1})})),Object(G.a)(a,"USER_CHECK_PENDING",(function(e,t){return Object(M.a)({},e,{pending:!0,error:!1,isLoggedIn:!1})})),Object(G.a)(a,"USER_CHECK_SUCCESS",(function(e,t){return{pending:!1,error:!1,isLoggedIn:!0,profile:t.payload.data}})),Object(G.a)(a,"USER_CHECK_FAILURE",(function(e,t){return{pending:!1,error:!0,isLoggedIn:!1}})),Object(G.a)(a,"LOGOUT_PENDING",(function(e,t){return Object(M.a)({},e,{pending:!0,error:!1,isLoggedIn:!1})})),Object(G.a)(a,"LOGOUR_SUCCESS",(function(e,t){return{pending:!1,error:!1,isLoggedIn:!1,profile:{}}})),Object(G.a)(a,"LOGOUT_FAILURE",(function(e,t){return Object(M.a)({},e,{pending:!1,error:!0})})),Object(G.a)(a,"POST_SHELVE_PENDING",(function(e,t){return Object(M.a)({},e,{pending:!0,error:!1})})),Object(G.a)(a,"POST_SHELVE_SUCCESS",(function(e,t){var n=t.payload.data;return Object(M.a)({},e,{pending:!1,error:!1,profile:n})})),Object(G.a)(a,"POST_SHELVE_FAILURE",(function(e,t){return Object(M.a)({},e,{pending:!1,error:!0})})),Object(G.a)(a,"LIKE_REVIEW_PENDING",(function(e,t){return Object(M.a)({},e,{pending:!0,error:!1})})),Object(G.a)(a,"LIKE_REVIEW_SUCCESS",(function(e,t){var n=t.payload.data;return Object(M.a)({},e,{pending:!1,error:!1,success:!0,profile:n})})),Object(G.a)(a,"LIKE_REVIEW_FAILURE",(function(e,t){return Object(M.a)({},e,{pending:!1,error:!0})})),Object(G.a)(a,"DELETE_SHELVE_PENDING",(function(e,t){return Object(M.a)({},e,{pending:!0,error:!1})})),Object(G.a)(a,"DELETE_SHELVE_SUCCESS",(function(e,t){var n=t.payload.data;return Object(M.a)({},e,{profile:n,pending:!1,error:!1})})),Object(G.a)(a,"DELETE_SHELVE_FAILURE",(function(e,t){return Object(M.a)({},e,{pending:!1,error:!0})})),a),{pending:!1,error:!1,success:!1,profile:{},isLoggedIn:!1}),Q=_.a.bind(D.a),Z=Object(P.b)((function(e){return{profile:e.login.profile}}),(function(e){return{postShelve:function(t,n,a,r,o,l){return e(X(t,n,a,r,o,l))}}}))((function(e){var t=e.from,n=e.type,a=e.profile.profile,r=e.postShelve,o=Object(s.useState)(!1),l=Object(T.a)(o,2),c=l[0],i=l[1],p=function(e){var t="";return e.forEach((function(e){t+=e})),t};if("home"===t){var m=e.book;return u.a.createElement("div",{className:Q("book")},u.a.createElement("img",{src:m.thumbnail,alt:"book"}),u.a.createElement("p",null,m.title))}if("search"===t){var E=e.book,h=E&&void 0!==E.isbn?E.isbn.split(" "):void 0;return u.a.createElement("li",{className:Q("ser-bg")},u.a.createElement("div",{className:Q("ser-book")},u.a.createElement(d.b,{to:void 0!==h?""!==h[0]?"/book/".concat(E.isbn.split(" ")[0]):"/book/".concat(E.isbn.split(" ")[1]):""},u.a.createElement("img",{src:E.thumbnail,alt:"book"}))),u.a.createElement("div",{className:Q("ser-info")},u.a.createElement(d.b,{to:void 0!==h?""!==h[0]?"/book/".concat(E.isbn.split(" ")[0]):"/book/".concat(E.isbn.split(" ")[1]):""},u.a.createElement("h3",{className:Q("ser-title")},E.title)),u.a.createElement("p",null,u.a.createElement("span",{className:Q("ser-author")},p(E.authors)))))}if("profile"===t){var f=e.book.book,g="/me"===window.location.pathname,k=f&&void 0!==f.isbn?f.isbn.split(" "):void 0,O=function(){var e=Object(v.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.value,e.prev=1,e.next=4,r(a.email,f.isbn,f.title,f.authors,n,f.thumbnail);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement("div",{className:Q("shelve"),style:{margin:"10px"}},u.a.createElement(d.b,{to:void 0!==k?""!==k[0]?"/book/".concat(f.isbn.split(" ")[0]):"/book/".concat(f.isbn.split(" ")[1]):""},u.a.createElement("span",{className:Q("title")},f.title),u.a.createElement("span",{className:Q("authors")},"\uc9c0\uc740\uc774: ",f.authors?p(f.authors):"")),g?u.a.createElement("div",{className:Q("setting-btns")},u.a.createElement("div",{className:Q("edit-container")},u.a.createElement("span",{className:Q("edit"),onClick:function(){return function(e,t){t(!e)}(c,i)}},u.a.createElement(A.b,null)),c?function(e){return u.a.createElement("div",{className:Q("edit-form")},u.a.createElement("select",{defaultValue:e,onChange:O},u.a.createElement("option",{value:"want_read"},"\uc77d\uc744 \ucc45"),u.a.createElement("option",{value:"reading"},"\uc77d\b\uace0 \uc788\uc74c"),u.a.createElement("option",{value:"read"},"\uc77d\uc74c")))}(n):u.a.createElement(s.Fragment,null)),u.a.createElement("div",null,u.a.createElement("span",{className:Q("delete"),onClick:function(){console.log("Delete")}},u.a.createElement(A.h,null)))):u.a.createElement(s.Fragment,null))}})),ee=n(33),te=n(175),ne=_.a.bind(L.a),ae=function(e){function t(){return Object(f.a)(this,t),Object(k.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props,t=e.from,n=e.booklist,a=e.type;return"home"===t?u.a.createElement("div",{className:ne("book-list")},n?n.map((function(e){var n=e.isbn&&e.isbn.split(" ")||"";return u.a.createElement(d.b,{to:""!==n[0]?"/book/".concat(e.isbn&&e.isbn.split(" ")[0]||""):"/book/".concat(e.isbn&&e.isbn.split(" ")[1]||""),key:Object(te.a)()},u.a.createElement(Z,{book:e,from:t}))})):u.a.createElement(ee.ChasingDots,{color:"white",size:60})):"search"===t?u.a.createElement("div",null,u.a.createElement("ul",{className:ne("ser-ul")},n.map((function(e){return u.a.createElement(Z,{book:e,from:t,key:Object(te.a)()})})))):"profile"===t?u.a.createElement("div",null,u.a.createElement("ul",null,n.map((function(e){return u.a.createElement(Z,{book:e,from:t,key:Object(te.a)(),type:a})})))):void 0}}]),t}(s.Component),re=Object(P.b)(null,null)(ae),oe=_.a.bind(R.a),le=function(e){var t=e.booklist;return u.a.createElement("div",{className:oe("home-content")},u.a.createElement("div",{className:oe("books-wrapper")},u.a.createElement(re,{booklist:t,from:"home"})))},ce=n(29),ie=function(e,t,n,a,r,o){return B.a.post("http://localhost:8080/book/".concat(a),{title:e,authors:t,vote:n,isbn:a,name:r,thumbnail:o})},se=function(e,t,n){var a=B.a.create({headers:{Authorization:"KakaoAK ".concat("dcf8990c616ed7f54a7a2fe1ab632c0b")}});return 0===parseInt(t)?a.get("https://dapi.kakao.com/v3/search/book?query=".concat(e,"&page=").concat(n)):1===parseInt(t)?a.get("https://dapi.kakao.com/v3/search/book?target=title&query=".concat(e,"&page=").concat(n)):2===parseInt(t)?a.get("https://dapi.kakao.com/v3/search/book?target=person&query=".concat(e,"&page=").concat(n)):3===parseInt(t)?a.get("https://dapi.kakao.com/v3/search/book?target=isbn&query=".concat(e)):void 0},ue=function(e){return B.a.get("http://localhost:8080/book/".concat(e))},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return{type:"GET_SEARCH_BOOKS",payload:se(e,t,n)}},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return{type:"GET_MORE_BOOKS",payload:se(e,t,n)}},de=Object(F.a)((r={},Object(G.a)(r,"GET_BOOKS_PENDING",(function(e,t){return Object(M.a)({},e,{pending:!0,error:!1})})),Object(G.a)(r,"GET_BOOKS_SUCCESS",(function(e,t){return{pending:!1,error:!1,books:t.payload.data.books}})),Object(G.a)(r,"GET_BOOKS_FAILURE",(function(e,t){return Object(M.a)({},e,{pending:!1,error:!0})})),Object(G.a)(r,"GET_SEARCH_BOOKS_PENDING",(function(e,t){return Object(M.a)({},e,{pending:!0,error:!1})})),Object(G.a)(r,"GET_SEARCH_BOOKS_SUCCESS",(function(e,t){var n=t.payload.data.documents;return Object(M.a)({},e,{pending:!1,error:!1,books:Object(ce.a)(n)})})),Object(G.a)(r,"GET_MORE_BOOKS_PENDING",(function(e,t){return Object(M.a)({},e,{pending:!0,error:!1})})),Object(G.a)(r,"GET_MORE_BOOKS_SUCCESS",(function(e,t){var n=t.payload.data.documents;return Object(M.a)({},e,{pending:!1,error:!1,books:[].concat(Object(ce.a)(e.books),Object(ce.a)(n))})})),Object(G.a)(r,"GET_MORE_BOOKS_FAILURE",(function(e,t){return Object(M.a)({},e,{pending:!1,error:!0})})),Object(G.a)(r,"POST_BOOK_PENDING",(function(e,t){return Object(M.a)({},e,{vote_pending:!0,vote_error:!1,vote_success:!1})})),Object(G.a)(r,"POST_BOOK_SUCCESS",(function(e,t){return Object(M.a)({},e,{vote_pending:!1,vote_error:!1,vote_success:!0})})),Object(G.a)(r,"POST_BOOK_FAILURE",(function(e,t){return Object(M.a)({},e,{vote_pending:!1,vote_error:!0,vote_success:!1})})),Object(G.a)(r,"GET_VOTE_REVIEW_PENDING",(function(e,t){return Object(M.a)({},e)})),Object(G.a)(r,"GET_VOTE_REVIEW_SUCCESS",(function(e,t){var n=t.payload.data.votes;return console.log(t.payload),Object(M.a)({},e,{votes:n})})),Object(G.a)(r,"GET_VOTE_REVIEW_FAILURE",(function(e,t){return Object(M.a)({},e,{votes:[]})})),Object(G.a)(r,"GET_DETAIL_PENDING",(function(e,t){return Object(M.a)({},e,{pending:!0,error:!1})})),Object(G.a)(r,"GET_DETAIL_SUCCESS",(function(e,t){return{pending:!0,error:!1,books:t.payload.data.documents}})),Object(G.a)(r,"GET_DETAIL_FAILURE",(function(e,t){return Object(M.a)({},e,{pending:!1,error:!0})})),r),{pending:!1,error:!1,books:[],total:0,vote_pending:!1,vote_error:!1,vote_success:!1,votes:[]}),Ee=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(k.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).getBooks=Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.props.getBooks();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.getBooks()}},{key:"render",value:function(){var e=this.props,t=e.books,n=e.pending;return u.a.createElement(s.Fragment,null,u.a.createElement(C,null),u.a.createElement("main",{className:"mainContainer"},n?u.a.createElement(ee.ChasingDots,{color:"white",size:60}):u.a.createElement(le,{booklist:t})))}}]),t}(s.Component),he=Object(P.b)((function(e){return{pending:e.books.pending,error:e.books.error,books:e.books.books}}),(function(e){return{getBooks:function(){return e({type:"GET_BOOKS",payload:B.a.get("http://localhost:8080/books")})}}}))(Ee),be=n(72),ve=n.n(be),fe=n(73),ge=n.n(fe),ke=_.a.bind(ge.a),Oe=function(e){function t(){return Object(f.a)(this,t),Object(k.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.type;return u.a.createElement("div",{className:ke("social-login")},u.a.createElement("h2",null,"login"===e?"Login to HappReads":"Sign up for HappReads"),u.a.createElement("button",{className:ke("facebook","button")},u.a.createElement("span",{className:ke("icon")},u.a.createElement(A.c,null)),"Continue with Facebook"),u.a.createElement("button",{className:ke("github","button")},u.a.createElement("span",{className:ke("icon")},u.a.createElement(A.d,null)),"Continue with Github"))}}]),t}(s.Component),we=Oe,ye=_.a.bind(ve.a),je=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(k.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.email,r=t.password;(0,n.props.loginRequest)(a,r)},n.handleEmail=function(e){n.setState({email:e})},n.handlePassword=function(e){n.setState({password:e})},n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.email,a=t.password;return u.a.createElement(s.Fragment,null,u.a.createElement("div",{className:ye("login-form","form-container")},u.a.createElement(we,{type:"login"}),u.a.createElement("form",{onSubmit:this.handleSubmit},u.a.createElement("input",{type:"email",value:n,onChange:function(t){return e.handleEmail(t.target.value)},placeholder:"Email",required:!0}),u.a.createElement("input",{type:"password",value:a,onChange:function(t){return e.handlePassword(t.target.value)},placeholder:"Password",required:!0}),u.a.createElement("input",{type:"submit",value:"Login"})),u.a.createElement(d.b,{to:"/signup"},u.a.createElement("button",null,"SignUp"))))}}]),t}(s.Component),Se=je,_e=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(k.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={isLoggedIn:!1},n.saveATK=function(e){localStorage.setItem("atk",e)},n.handleLogin=function(){var e=Object(v.a)(b.a.mark((function e(t,a){var r,o,l,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props.loginRequest,e.prev=1,e.next=4,r(t,a);case 4:o=e.sent,l=o.value,c=l.data,200===l.status&&(n.saveATK(c.token),n.setState({isLoggedIn:!0})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return!0===this.state.isLoggedIn?u.a.createElement(E.a,{to:"/"}):u.a.createElement(s.Fragment,null,u.a.createElement(Se,{loginRequest:this.handleLogin}))}}]),t}(s.Component),Ne=Object(P.b)((function(e){return{login_error:e.login.error,login_pending:e.login.pending,login_success:e.login.success,isLoggedIn:e.login.isLoggedIn,profile:e.login.profile}}),(function(e){return{loginRequest:function(t,n){return e({type:"LOGIN",payload:W(t,n)})}}}))(_e),Ce=n(74),Ie=n.n(Ce),Re=_.a.bind(Ie.a),xe=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(k.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",p1:"",p2:""},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.email,r=t.p1,o=t.p2,l=n.props.handleSignUp;r===o&&l(a,r)},n.handleEmail=function(e){n.setState({email:e})},n.handlePassword1=function(e){n.setState({p1:e})},n.handlePassword2=function(e){n.setState({p2:e})},n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.email,a=t.p1,r=t.p2;return u.a.createElement(s.Fragment,null,u.a.createElement("div",{className:Re("signup-form","form-container")},u.a.createElement(we,{type:"signup"}),u.a.createElement("form",{onSubmit:this.handleSubmit},u.a.createElement("input",{type:"email",value:n,onChange:function(t){return e.handleEmail(t.target.value)},placeholder:"Email",required:!0}),u.a.createElement("input",{type:"password",value:a,onChange:function(t){return e.handlePassword1(t.target.value)},placeholder:"Password",required:!0}),u.a.createElement("input",{type:"password",value:r,onChange:function(t){return e.handlePassword2(t.target.value)},placeholder:"Password Verify",required:!0}),u.a.createElement("input",{type:"submit",value:"SignUp"}))))}}]),t}(s.Component),Le=xe,Te=function(e,t){return B.a.post("http://localhost:8080/signup",{email:e,password:t})},Ue=Object(F.a)((o={},Object(G.a)(o,"SIGNUP_PENDING",(function(e,t){return{pending:!0,error:!1,success:!1}})),Object(G.a)(o,"SIGNUP_SUCCESS",(function(e,t){return{pending:!1,error:!1,success:!0}})),Object(G.a)(o,"SIGNUP_FAILURE",(function(e,t){return{pending:!1,error:!0,success:!1}})),o),{error:!1,pending:!1,success:!1}),De=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(k.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).handleSignUp=function(){var e=Object(v.a)(b.a.mark((function e(t,a){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props.requestSignUp,e.next=3,r(t,a);case 3:200===e.sent.value.status&&n.props.history.push("/login");case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props,t=e.history;return e.isLoggedIn?u.a.createElement(E.a,{to:"/"}):u.a.createElement(s.Fragment,null,u.a.createElement(Le,{history:t,handleSignUp:this.handleSignUp}))}}]),t}(s.Component),Ae=Object(P.b)((function(e){return{signup_error:e.signup.error,signup_pending:e.signup.pending,signup_success:e.signup.success,isLoggedIn:e.login.isLoggedIn}}),(function(e){return{requestSignUp:function(t,n){return e(function(e,t){return{type:"SIGNUP",payload:Te(e,t)}}(t,n))}}}))(De),Pe=n(75),Ge=n.n(Pe),Me=n(45),Fe=n.n(Me),Ve=n(76),Be=n.n(Ve),We=_.a.bind(Be.a),He=function(e){function t(e){var n;Object(f.a)(this,t),(n=Object(k.a)(this,Object(O.a)(t).call(this,e))).submitEdit=Object(v.a)(b.a.mark((function e(){var t,a,r,o,l,c,i,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.seletedImg,t.email,r=t.nickname,o=t.website,l=t.interest,c=t.intro,i=n.props.profile.profile,(s=new FormData).append("avatar",a),s.append("email",i.email),s.append("nickname",r),s.append("website",o),s.append("interest",l),s.append("intro",c),e.prev=9,e.next=12,B.a.post("http://localhost:8080/edit",s);case 12:window.location.href="/me",e.next=18;break;case 15:e.prev=15,e.t0=e.catch(9),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[9,15]])}))),n.handleSubmit=function(e){e.preventDefault(),n.submitEdit()},n.handleFile=function(e){var t=e.target.files;n.setState({seletedImg:t[0]}),function(e){var t=URL.createObjectURL(e);document.querySelector(".preview-img").src=t}(t[0])},n.handleNickName=function(e){n.setState({nickname:e})},n.handleWebSite=function(e){n.setState({website:e})},n.handleInterest=function(e){n.setState({interest:e})},n.handleIntro=function(e){n.setState({intro:e})};var a=n.props.profile.profile;return n.state={seletedImg:null,nickname:a?a.name:"",website:a?a.website:"",intro:a?a.intro:"",interest:a?a.interest:""},n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.nickname,a=t.website,r=t.intro,o=t.interest,l=t.seletedImg,c=this.props,i=c.handleClose,s=c.isOpen;return u.a.createElement("div",{className:We("user-edit",s?"close":"open")},u.a.createElement("div",{className:We("x-button")},u.a.createElement("p",{onClick:i},u.a.createElement("span",{role:"img","aria-label":"close"},"\u274c"))),u.a.createElement("div",{className:We("form-container")},u.a.createElement("form",{onSubmit:this.handleSubmit},u.a.createElement("div",{className:We("upload-btn-wrapper")},u.a.createElement("img",{className:We("preview-img")}),u.a.createElement("div",{style:{position:"relative"}},u.a.createElement("button",{className:We("btn")},null===l?"\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc":l.name),u.a.createElement("input",{type:"file",name:"avatar",onChange:function(t){return e.handleFile(t)}}))),u.a.createElement("input",{type:"text",name:"nickname",value:n,onChange:function(t){return e.handleNickName(t.target.value)}}),u.a.createElement("input",{type:"email",name:"website",placeholder:"\uc6f9 \uc0ac\uc774\ud2b8 ex) http://www.example.com",value:a,onChange:function(t){return e.handleWebSite(t.target.value)}}),u.a.createElement("input",{type:"text",name:"interest",placeholder:"\ucde8\ubbf8",value:o,onChange:function(t){return e.handleInterest(t.target.value)}}),u.a.createElement("textarea",{name:"intro",placeholder:"\uc18c\uac1c",value:r,onChange:function(t){return e.handleIntro(t.target.value)}}),u.a.createElement("input",{type:"submit",value:"\uc218\uc815"})),u.a.createElement("button",{onClick:i},"\ucde8\uc18c")))}}]),t}(s.Component),qe=n(77),Ke=n.n(qe),Ye=n(20),ze=n.n(Ye),Xe=n(78),Je=n.n(Xe),$e=function(e){return B.a.get("http://localhost:8080/book/".concat(e,"/review"))},Qe=function(e,t,n,a){return B.a.post("http://localhost:8080/book/".concat(e,"/review"),{name:t,isbn:e,content:n,book:a})},Ze=function(e,t){return B.a.post("http://localhost:8080/book/review/".concat(e),{content:t})},et=Object(F.a)((l={},Object(G.a)(l,"GET_REVIEWS_PENDING",(function(e,t){return Object(M.a)({},e,{pending:!0,error:!1,success:!1})})),Object(G.a)(l,"GET_REVIEWS_SUCCESS",(function(e,t){return{reviews:t.payload.data.reviews,pending:!1,error:!1,success:!0}})),Object(G.a)(l,"GET_REVIEWS_FAILURE",(function(e,t){return Object(M.a)({},e,{pending:!1,error:!0,success:!1})})),Object(G.a)(l,"POST_REVIEW_PENDING",(function(e,t){return Object(M.a)({},e,{error:!1,pending:!0,success:!1})})),Object(G.a)(l,"POST_REVIEW_SUCCESS",(function(e,t){return{reviews:t.payload.data.reviews,error:!1,pending:!1,success:!0}})),Object(G.a)(l,"POST_REVIEW_FAILURE",(function(e,t){return Object(M.a)({},e,{error:!0,pending:!1,success:!1})})),Object(G.a)(l,"GET_REVIEW_PENDING",(function(e,t){return Object(M.a)({},e,{error:!1,pending:!0,success:!1})})),Object(G.a)(l,"GET_REVIEW_SUCCESS",(function(e,t){return{reviews:t.payload.data.reviews,error:!1,pending:!1,success:!0}})),Object(G.a)(l,"GET_REVIEW_FAILURE",(function(e,t){return{error:!0,pending:!1,success:!1}})),Object(G.a)(l,"DELETE_REVIEW_PENDING",(function(e,t){return{reviews:t.payload.data.reviews,pending:!0,error:!1,success:!1}})),Object(G.a)(l,"DELETE_REVIEW_SUCCESS",(function(e,t){return{pending:!0,error:!1,success:!1}})),Object(G.a)(l,"DELETE_REVIEW_FAILURE",(function(e,t){return Object(M.a)({},e,{pending:!1,error:!0,success:!1})})),Object(G.a)(l,"EDIT_REVIEW_PENDING",(function(e,t){return Object(M.a)({},e,{pending:!0,error:!1,success:!1})})),Object(G.a)(l,"EDIT_REVIEW_SUCCESS",(function(e,t){return Object(M.a)({},e,{reviews:t.payload.data.reviews,pending:!1,error:!1,success:!0})})),Object(G.a)(l,"EDIT_REVIEW_FAILURE",(function(e,t){return Object(M.a)({},e,{pending:!1,error:!0,success:!1})})),l),{reviews:[],pending:!1,error:!1,success:!1}),tt=_.a.bind(Je.a),nt=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(k.a)(this,Object(O.a)(t).call(this,e))).checkUser=Object(v.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("atk"),a=n.props.checkUser,!t){e.next=11;break}return e.prev=3,e.next=6,a(t);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])}))),n.editReview=function(){var e=Object(v.a)(b.a.mark((function e(t,a){var r,o,l,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props,o=r.editReview,l=r.handleClose,e.prev=1,e.next=4,o(t,a);case 4:c=e.sent,200===c.value.status&&(n.checkUser(),l()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),n.handleSubmit=function(e){e.preventDefault();var t=n.state.content,a=n.props,r=a.review._id;a.profile!=={}&&n.editReview(r,t)},n.handleChange=function(e){n.setState({content:e.target.value})},n.state={content:e.review.content},n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props,t=e.review,n=e.handleClose,a=this.state.content;return u.a.createElement("div",{className:tt(["review-modal","modal-container"])},u.a.createElement("div",{className:"modal-overlay"},u.a.createElement("div",{className:"modal"},u.a.createElement("div",{className:tt("form-container")},u.a.createElement("img",{src:void 0!==t.book?t.book.thumbnail:"",alt:void 0!==t.book?t.book.title:""}),u.a.createElement("form",{onSubmit:this.handleSubmit},u.a.createElement("textarea",{value:a,onChange:this.handleChange},a),u.a.createElement("input",{type:"submit",value:"\uc218\uc815"}),u.a.createElement("button",{className:tt("cancel"),onClick:n},"\ucde8\uc18c"))))))}}]),t}(s.Component),at=Object(P.b)((function(e){return{profile:e.login.profile}}),(function(e){return{checkUser:function(t){return e(z(t))},editReview:function(t,n){return e(function(e,t){return{type:"EDIT_REVIEW",payload:Ze(e,t)}}(t,n))}}}))(nt),rt=_.a.bind(Ke.a),ot=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(k.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={review:null,isOpen:!1},n.handleLike=function(e){var t=e.currentTarget.getAttribute("data-value");n.postLike("like",t)},n.handleEdit=function(e,t){console.log(e.getAttribute("data-value")),n.setState({isOpen:!0,review:t})},n.handleClose=function(){n.setState({isOpen:!1,review:null})},n.handleDelete=function(e){var t=e.currentTarget.getAttribute("data-value");console.log(t)},n.postLike=function(){var e=Object(v.a)(b.a.mark((function e(t,a){var r,o,l,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props,o=r.me,l=r.postLike,c=r.profile,e.prev=1,e.next=4,l(t,a,c._id,o.profile._id);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}(),n.getReview=function(e,t,n,a,r,o){return console.log(r,o),u.a.createElement(s.Fragment,null,u.a.createElement("div",{className:rt("review-container"),id:e._id,key:e._id},u.a.createElement("div",null,u.a.createElement("img",{src:void 0!==e.book?e.book.thumbnail:"",alt:void 0!==e.book?e.book.title:""})),u.a.createElement("div",null,u.a.createElement("div",null,u.a.createElement("p",{className:rt("review-book")},void 0!==e.book?e.book.title:""),u.a.createElement("p",{className:rt("review-text")},void 0!==e.book?e.content:""),u.a.createElement("p",{className:rt("review-date")},ze()(e.createdAt).format("YYYY\ub144 MM\uc6d4 DD\uc77c HH:MM:SS")),u.a.createElement("p",{className:rt("like-container"),style:{display:"flex",alignItems:"center",marginTop:"5px"}},u.a.createElement("span",{className:rt("review-like")},e.likes," likes"),u.a.createElement("span",null," \xb7 "),u.a.createElement("span",{className:rt("likebtn"),onClick:t,"data-value":e._id},u.a.createElement(A.e,null))))),o===r?u.a.createElement(u.a.Fragment,null,u.a.createElement("span",{className:rt("review-edit"),"data-value":e._id,onClick:function(t){return a(t.currentTarget,e)}},u.a.createElement(A.b,null)),u.a.createElement("span",{className:rt("review-remove"),"data-value":e._id,onClick:n},u.a.createElement(A.h,null))):u.a.createElement(u.a.Fragment,null)))},n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.profile,a=n._id,r=n.reviews,o=t.me,l=this.state,c=l.isOpen,i=l.review;return u.a.createElement("div",{className:rt("user-review")},r.map((function(t){return e.getReview(t,e.handleLike,e.handleDelete,e.handleEdit,o.profile._id,a)})),c&&u.a.createElement(at,{review:i,handleClose:this.handleClose}))}}]),t}(s.Component),lt=Object(P.b)((function(e){return{me:e.login.profile}}),(function(e){return{postLike:function(t,n,a){return e(J(t,n,a))}}}))(ot),ct=_.a.bind(Ge.a),it=function(e,t,n){return"uploaded"!==n?"/me"===e?t&&t.profile&&t.profile[n].length>0?u.a.createElement("div",null,u.a.createElement(re,{booklist:t.profile[n],from:"profile",type:n})):u.a.createElement("p",{className:ct("recent-empty")},"\ucd5c\uadfc \uc544\ubb34 \ud65c\ub3d9\ub3c4 \uc5c6\uc2b5\ub2c8\ub2e4."):t&&t.user&&t.user[n].length>0?u.a.createElement("div",null,u.a.createElement(re,{booklist:t.user[n],from:"profile"})):u.a.createElement("p",{className:ct("recent-empty")},"\ucd5c\uadfc \uc544\ubb34 \ud65c\ub3d9\ub3c4 \uc5c6\uc2b5\ub2c8\ub2e4."):"/me"===e?t&&t.profile&&t.profile.uploaded.length>0?u.a.createElement("div",{className:ct("uploaded-list")},t.profile.uploaded.map((function(e){return u.a.createElement("div",{className:ct("uploaded-img-wrapper"),key:e._id},u.a.createElement("img",{className:ct("uploaded-img"),src:e.thumbnail,alt:e.thumbnail}),u.a.createElement("div",{className:ct("to-detail")},u.a.createElement(d.b,{to:"/book/".concat(e.isbn)},e.title)))}))):u.a.createElement("p",{className:ct("recent-empty")},"\ucd5c\uadfc \uc544\ubb34 \ud65c\ub3d9\ub3c4 \uc5c6\uc2b5\ub2c8\ub2e4."):t&&t.user&&t.user.uploaded.length>0?u.a.createElement("div",{className:ct("uploaded-list")},t.user.uploaded.map((function(e){return u.a.createElement("div",{className:ct("uploaded-img-wrapper"),key:e._id},u.a.createElement("img",{className:ct("uploaded-img"),src:e.thumbnail,alt:e.thumbnail}),u.a.createElement("div",{className:ct("to-detail")},u.a.createElement(d.b,{to:"/book/".concat(e.isbn)},"\uc0c1\uc138 \ud398\uc774\uc9c0")))}))):u.a.createElement("p",{className:ct("recent-empty")},"\ucd5c\uadfc \uc544\ubb34 \ud65c\ub3d9\ub3c4 \uc5c6\uc2b5\ub2c8\ub2e4.")},st=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(k.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1,idx:0},n.handleOpen=function(){n.setState({isOpen:!0})},n.handleCancel=function(){n.setState({isOpen:!1})},n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.profile,a=t.from,r=this.state,o=r.isOpen,l=r.idx;return u.a.createElement(s.Fragment,null,u.a.createElement("div",{className:ct("user-profile")},u.a.createElement("div",{className:ct("profile-wrapper")},u.a.createElement("div",{className:ct("info")},u.a.createElement("img",{src:"/me"===a?n&&void 0!==n.profile?n.profile.avatarUrl:"":n&&void 0!==n.user?n.user.avatarUrl:"",alt:Fe.a}),u.a.createElement("h1",null,"/me"===a?n&&void 0!==n.profile?n.profile.email:"":n&&void 0!==n.user?n.user.email:""),u.a.createElement("div",{className:ct("profile-edit")},"/me"===a?u.a.createElement("p",{to:"/edit",onClick:this.handleOpen},"\ud504\ub85c\ud544 \uc218\uc815"):u.a.createElement("div",null)),u.a.createElement("div",{className:ct("rate-review")},u.a.createElement("p",null,"/me"===a?n&&void 0!==n.profile?n.profile.votes.length:0:n&&void 0!==n.user?n.user.votes.length:0," ","\ud3c9\uac00"),u.a.createElement("p",null,"/me"===a?n&&void 0!==n.profile?n.profile.reviews.length:0:n&&void 0!==n.user?n.user.reviews.length:0," ","\ub9ac\ubdf0")),u.a.createElement("p",{className:ct("intro")},"/me"===a?n&&void 0!==n.profile?n.profile.intro:0:n&&void 0!==n.user?n.user.intro:0))),u.a.createElement("div",null,u.a.createElement("ul",{className:ct("catalog-list")},u.a.createElement("li",{className:0===l?ct("active"):"",onClick:function(){return e.setState({idx:0})}},"\ucc45"),u.a.createElement("li",{className:1===l?ct("active"):"",onClick:function(){return e.setState({idx:1})}},"\ub9ac\ubdf0")),u.a.createElement("div",{style:0===l?{display:"block"}:{display:"none"}},u.a.createElement("div",{className:ct("uploaded")},u.a.createElement("div",{className:ct("uploaded-head")},u.a.createElement(d.b,{to:"/me"===a?n&&void 0!==n.profile?"shelve/".concat(n.profile._id):"/":n&&void 0!==n.user?"shelve/".concat(n.user._id):"/  "},u.a.createElement("h2",null,"\uc5c5\ub85c\ub4dc \ud55c \ucc45"))),u.a.createElement("div",{className:ct("uploaded-body"),style:{marginLeft:"5px",marginTop:"5px"}},it(a,n,"uploaded"))),u.a.createElement("div",{className:ct("want-read")},u.a.createElement("div",{className:ct("want-read-head")},u.a.createElement("h2",null,"\uc77d\uc744 \ucc45 (","/me"===a?n&&void 0!==n.profile?n.profile.want_read.length:0:n&&void 0!==n.user?n.user.want_read.length:0,")")),u.a.createElement("div",{className:ct("want-read-body")},it(a,n,"want_read")),u.a.createElement("div",null)),u.a.createElement("div",{className:ct("currently-reading")},u.a.createElement("div",{className:ct("currently-head")},u.a.createElement("h2",null,"\ud604\uc7ac \uc77d\uace0 \uc788\ub294 \ucc45 (","/me"===a?n&&void 0!==n.profile?n.profile.reading.length:0:n&&void 0!==n.user?n.user.reading.length:0,")")),u.a.createElement("div",{className:ct("currently-body")},it(a,n,"reading"))),u.a.createElement("div",{className:ct("read")},u.a.createElement("div",{className:ct("read-head")},u.a.createElement("h2",null,"\uc77d\uc740 \ucc45 (","/me"===a?n&&void 0!==n.profile?n.profile.read.length:0:n&&void 0!==n.user?n.user.read.length:0,")")),u.a.createElement("div",{className:ct("read-body")},it(a,n,"read")))),u.a.createElement("div",{style:1===l?{display:"block"}:{display:"none"}},u.a.createElement("div",{className:ct("recent-update")},u.a.createElement("div",{className:ct("recent-head")},u.a.createElement("h2",null,"\ub9ac\ubdf0")),u.a.createElement("div",{className:ct("recent-body")},"/me"===a?n&&void 0!==n.profile?u.a.createElement(lt,{profile:n.profile}):"\ub9ac\ubdf0 \uc5c6\uc74c":n&&void 0!==n.user?u.a.createElement(lt,{profile:n.user}):"\ub9ac\ubdf0 \uc5c6\uc74c"))))),function(e,t,n){return u.a.createElement(s.Fragment,null,u.a.createElement("div",{className:ct("modal-overay",e?"open-modal":"close-modal")}),u.a.createElement("div",{className:ct(e?"open-modal":"close-modal")},u.a.createElement(He,{handleClose:t,profile:n,isOpen:!e})))}(o,this.handleCancel,n))}}]),t}(s.Component),ut="http://localhost:8080",pt=function(e){return B.a.get("".concat(ut,"/profile/").concat(e))},mt=function(e){return B.a.get("".concat(ut,"/rank/reader/").concat(e))},dt=function(e){return B.a.get("".concat(ut,"/rank/reviewer/").concat(e))},Et=function(e){return{type:"GET_USER",payload:pt(e)}},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{type:"GET_TOP_READERS",payload:mt(e)}},bt=function(e){return{type:"GET_TOP_REVIEWERS",payload:dt(e)}},vt=Object(F.a)((c={},Object(G.a)(c,"GET_USER_PENDING",(function(e,t){return Object(M.a)({},e,{pending:!0,error:!1})})),Object(G.a)(c,"GET_USER_SUCCESS",(function(e,t){return{pending:!1,error:!1,profile:t.payload.data}})),Object(G.a)(c,"GET_USER_FAILURE",(function(e,t){return Object(M.a)({},e,{pending:!1,error:!0})})),Object(G.a)(c,"GET_TOP_READERS_PENDING",(function(e,t){return Object(M.a)({},e,{pending:!0,error:!1})})),Object(G.a)(c,"GET_TOP_READERS_SUCCESS",(function(e,t){var n=t.payload.data.readers;return Object(M.a)({},e,{topReaders:n,pending:!1,error:!1})})),Object(G.a)(c,"GET_TOP_READERS_FAILURE",(function(e,t){return Object(M.a)({},e,{pending:!1,error:!0})})),Object(G.a)(c,"GET_TOP_REVIEWERS_PENDING",(function(e,t){return Object(M.a)({},e,{pending:!0,error:!1})})),Object(G.a)(c,"GET_TOP_REVIEWERS_SUCCESS",(function(e,t){var n=t.payload.data.reviewers;return Object(M.a)({},e,{topReviewers:n,pending:!1,error:!1})})),Object(G.a)(c,"GET_TOP_REVIEWERS_FAILURE",(function(e,t){return Object(M.a)({},e,{pending:!1,error:!0})})),c),{pending:!1,error:!1,profile:{},topReaders:[],topReviewers:[]}),ft=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(k.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).getProfile=function(){var e=Object(v.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.getProfile,e.prev=1,e.next=4,a(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.history.location;if("/me"!==e.pathname){var t=e.pathname.substring(1).split("/")[1];this.getProfile(t)}}},{key:"render",value:function(){var e=this.props,t=e.isLoggedIn,n=e.user,a=e.profile,r=e.history.location;return u.a.createElement(s.Fragment,null,u.a.createElement(st,{isLoggedIn:t,profile:"/me"===r.pathname?a:n,from:r.pathname}))}}]),t}(s.Component),gt=Object(P.b)((function(e){return{isLoggedIn:e.login.isLoggedIn,profile:e.login.profile,user:e.user.profile}}),(function(e){return{getProfile:function(t){return e(Et(t))}}}))(ft),kt=n(79),Ot=n.n(kt),wt=n(92),yt=n(80),jt=n.n(yt),St=_.a.bind(jt.a),_t=["1","2","3","4","5"],Nt={color:"#f1c40f",cursor:"pointer"},Ct=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(k.a)(this,Object(O.a)(t).call(this,e))).handleOnClick=function(e){for(var t=n.props.isLoggedIn,a=e.target;"svg"!==a.nodeName;)a=a.parentNode;var r=a.dataset.rating;t?n.postVote(r):alert("Please Login")},n.postVote=function(){var e=Object(v.a)(b.a.mark((function e(t){var a,r,o,l,c,i,s,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props,r=a.book,o=r.isbn,l=r.title,c=r.authors,i=r.thumbnail,s=a.profile.profile.email,u=a.postVote,e.next=3,u(l,c,t,o.split(" ")[0],s,i);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={hoveredRating:"0",currentRating:"0"},n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props.votes;return u.a.createElement("div",{className:St("rater")},_t.map((function(n,a){return u.a.createElement(A.g,{key:a,"data-rating":a+1,onClick:e.handleOnClick,style:t>=a+1?Nt:{}})})))}}]),t}(s.Component),It=Object(P.b)((function(e){return{isLoggedIn:e.login.isLoggedIn,profile:e.login.profile}}))(Ct),Rt=n(81),xt=n.n(Rt),Lt=_.a.bind(xt.a),Tt=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(k.a)(this,Object(O.a)(t).call(this,e))).getReview=Object(v.a)(b.a.mark((function e(){var t,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.id,r=t.getReviews,e.prev=1,e.next=4,r(a);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])}))),n.postReview=function(){var e=Object(v.a)(b.a.mark((function e(t){var a,r,o,l,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props,r=a.profile.profile.email,o=a.postReview,l=a.books,c=window.location.pathname.substring(1).split("/")[1],e.prev=2,e.next=5,o(c,r,t,l[0]);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(e){n.setState({input:e})},n.handleSubmit=function(e){e.preventDefault();var t=n.props.isLoggedIn,a=n.state.input;t?(n.postReview(a),n.setState({input:""})):alert("Please Login")},n.handleLike=function(e){var t=e.currentTarget.getAttribute("data-value");n.postLike("like",t)},n.postLike=function(){var e=Object(v.a)(b.a.mark((function e(t,a){var r,o,l,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props,o=r.me,l=r.postLike,c=r.profile,e.prev=1,e.next=4,l(t,a,c._id,o.profile._id);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}(),n.state={input:""},n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.getReview()}},{key:"componentDidUpdate",value:function(e){this.props.reviews&&e.reviews&&this.props.reviews.length!==e.reviews.length&&this.getReview()}},{key:"render",value:function(){var e=this,t=this.state.input,n=this.props.reviews;return u.a.createElement("div",{className:Lt("review")},u.a.createElement("p",null,"\ub9ac\ubdf0"),u.a.createElement("div",null,u.a.createElement("div",{className:Lt("form-container")},u.a.createElement("form",{onSubmit:this.handleSubmit},u.a.createElement("textarea",{onChange:function(t){return e.handleChange(t.target.value)},value:t}),u.a.createElement("input",{type:"submit",value:"\ub4f1\ub85d"}))),u.a.createElement("div",{className:Lt("review-list-wrapper")},void 0!==n?n.map((function(t,n){return function(e,t,n){return console.log(e),u.a.createElement(s.Fragment,{key:t},u.a.createElement("div",null,u.a.createElement("div",null,u.a.createElement(d.b,{to:e.reviewer?"/profile/".concat(e.reviewer._id):""},u.a.createElement("img",{className:Lt("user-img"),src:e.reviewer?e.reviewer.avatarUrl:"",alt:e.reviewer?e.reviewer.avatarUrl:""}),u.a.createElement("span",{className:Lt("user")},e.reviewer?e.reviewer.email:""))),u.a.createElement("span",{className:Lt("date")},e.createdAt?ze()(e.createdAt).format("MMMM MM\uc6d4 DD\uc77c HH:MM:SS"):""),u.a.createElement("div",{style:{marginTop:"10px"}},u.a.createElement("span",{className:Lt("user-review")},e.content)),u.a.createElement("div",{className:Lt("review-footer")},u.a.createElement("span",null,e.likes," likes"),u.a.createElement("span",{style:{marginLeft:"5px",marginRight:"5px"}},"\xb7"),u.a.createElement("span",{className:Lt("heart"),onClick:n,"data-value":e._id},u.a.createElement(A.e,null)),u.a.createElement("span",{style:{marginLeft:"5px",marginRight:"5px"}},"\xb7"),u.a.createElement("span",{className:Lt("more")},"see more"))))}(t,n,e.handleLike)})):u.a.createElement("div",null))))}}]),t}(s.Component),Ut=Object(P.b)((function(e){return{pending:e.review.pending,error:e.review.error,success:e.review.success,isLoggedIn:e.login.isLoggedIn,profile:e.login.profile,reviews:e.review.reviews,books:e.books.books}}),(function(e){return{postReview:function(t,n,a,r){return e(function(e,t,n,a){return{type:"POST_REVIEW",payload:Qe(e,t,n,a)}}(t,n,a,r))},getReviews:function(t){return e(function(e){return{type:"GET_REVIEW",payload:$e(e)}}(t))},postLike:function(t,n,a){return e(J(t,n,a))}}}))(Tt),Dt=_.a.bind(Ot.a),At=[{value:"want_read",label:"\uc77d\uae30"},{value:"reading",label:"\uc77d\ub294\uc911"},{value:"read",label:"\uc77d\uc74c"}],Pt=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(k.a)(this,Object(O.a)(t).call(this,e))).checkStatus=function(e,t){return e.filter((function(e){return e.isbn===t})).length>0},n.checkUserVote=function(){var e=n.props,t=e.votes,a=e.profile.profile,r="0";if(t)for(var o=0;o<t.length;o++)if(t[o]._id===a._id){r=String(t[o].vote);break}return r},n.getStatus=function(){var e=n.props,t=e.profile.profile,a=e.id;if(t){if(n.checkStatus(t.want_read,a))return void n.setState({selected:At[0],status:At[0].label});if(n.checkStatus(t.reading,a))return void n.setState({selected:At[1],status:At[1].label});if(n.checkStatus(t.read,a))return void n.setState({selected:At[2],status:At[2].label})}},n.handleOnClick=Object(v.a)(b.a.mark((function e(){var t,a,r,o,l,c,i,s,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.selected.value,a=n.props,r=a.postShelve,o=a.book,l=o.title,c=o.authors,i=o.thumbnail,s=a.profile.profile.email,u=window.location.pathname.substring(1).split("/")[1],e.prev=3,e.next=6,r(s,u,l,c,t,i);case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:case"end":return e.stop()}}),e,null,[[3,8]])}))),n.handleRadio=function(e){n.setState({selected:e},(function(){return console.log("Selected: ".concat(n.state.selected))}))},n.state={selected:null,status:"\uc77d\uae30"},n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getStatus();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.book,n=e.votes,a=e.postVote,r=e.id,o=e.reviews,l=this.state,c=l.selected,i=l.status;return u.a.createElement(s.Fragment,null,t?u.a.createElement(s.Fragment,null,u.a.createElement("div",{className:Dt("book-detail")},u.a.createElement("div",{className:Dt("book-info-wrapper")},u.a.createElement("div",{className:Dt("img-col")},u.a.createElement("img",{src:t.thumbnail,alt:"geisha"})),u.a.createElement("div",{className:Dt("book-content")},u.a.createElement("h2",{className:Dt("title")},t.title),u.a.createElement("p",{className:Dt("author")},function(e){for(var t="",n=0;n<e.length;n++)t+="".concat(e[n]," ");return t}(t.authors)),u.a.createElement("div",{className:Dt("bookmeta")},u.a.createElement("span",{className:Dt("score")},u.a.createElement(A.g,null),function(e){if(e){var t=0;if(e.length>0){for(var n=0;n<e.length;n++)t+=parseInt(e[n].vote);return console.log(t),(t/e.length).toFixed(2)}return 0}return 0}(n),u.a.createElement(A.a,{className:Dt("angle-down")})),u.a.createElement("span",{className:Dt("rate-cnt")},n?n.length:0," \ud3c9\uac00"),u.a.createElement("span",{className:Dt("review-cnt")},o?o.length:0," \ub9ac\ubdf0")),u.a.createElement("span",{className:Dt("discription")},t.contents),u.a.createElement("div",null,u.a.createElement("div",{className:Dt("rate-wrapper")},u.a.createElement("span",null,"\ucc45 \ud3c9\uac00\ud558\uae30"),u.a.createElement(It,{postVote:a,book:t,id:r,votes:n&&n.length>0?this.checkUserVote():"0"})),u.a.createElement("div",{className:Dt("add")},u.a.createElement(wt.a,{className:Dt("select"),options:At,onChange:this.handleRadio,value:c,isSearchable:!1,placeholder:i}),u.a.createElement("button",{className:Dt("want-read"),onClick:this.handleOnClick},u.a.createElement("span",null,u.a.createElement(A.f,null)),"\ub4f1\ub85d")))))),u.a.createElement(Ut,{id:r})):u.a.createElement(ee.ChasingDots,{color:"white",size:60}))}}]),t}(s.Component),Gt=Object(P.b)(null,(function(e){return{postShelve:function(t,n,a,r,o,l){return e(X(t,n,a,r,o,l))}}}))(Pt),Mt=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(k.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={avg_vote:0},n.getBook=function(){var e=Object(v.a)(b.a.mark((function e(t){var a,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props,r=a.getBook,o=a.getAvg_Reviews,e.prev=1,e.t0=Promise,e.next=5,r(t);case 5:return e.t1=e.sent,e.next=8,o(t);case 8:e.t2=e.sent,e.t3=[e.t1,e.t2],e.t0.all.call(e.t0,e.t3),e.next=16;break;case 13:e.prev=13,e.t4=e.catch(1),console.log(e.t4);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;window.scrollTo(0,0),this.getBook(e)}},{key:"render",value:function(){var e=this.props,t=e.match.params.id,n=e.books,a=e.votes,r=e.reviews,o=e.postVote,l=e.profile;return u.a.createElement(s.Fragment,null,u.a.createElement("div",{className:"main-container"},u.a.createElement(Gt,{book:n[0],id:t,postVote:o,votes:a,reviews:r,profile:l})))}}]),t}(s.Component),Ft=Object(P.b)((function(e){return{pending:e.books.pending,error:e.books.error,books:e.books.books,vote_error:e.books.vote_error,vote_pending:e.books.vote_pending,vote_success:e.books.vote_success,votes:e.books.votes,reviews:e.review.reviews,profile:e.login.profile}}),(function(e){return{getBook:function(t){return e({type:"GET_DETAIL",payload:se(t,3,1)})},getAvg_Reviews:function(t){return e(function(e){return{type:"GET_VOTE_REVIEW",payload:ue(e)}}(t))},postVote:function(t,n,a,r,o,l){return e(function(e,t,n,a,r,o){return{type:"POST_BOOK",payload:ie(e,t,n,a,r,o)}}(t,n,a,r,o,l))}}}))(Mt),Vt=n(82),Bt=n.n(Vt),Wt=_.a.bind(Bt.a),Ht=function(e){function t(){return Object(f.a)(this,t),Object(k.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return u.a.createElement("footer",{className:Wt("footer")},u.a.createElement("div",{className:Wt("footer_icon")}),u.a.createElement("span",{className:Wt("footer_text")},"\xa9 HappReads ",ze()().format("YYYY")))}}]),t}(s.Component),qt={form:{height:"80px",width:"450px",margin:"0 auto"},text:{width:"100%",padding:"5px",fontSize:"12px"}},Kt=function(e){function t(e){var n;Object(f.a)(this,t),(n=Object(k.a)(this,Object(O.a)(t).call(this,e))).getBooks=function(){var e=Object(v.a)(b.a.mark((function e(t,a){var r,o,l=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:1,o=n.props.getBooks,e.prev=2,e.next=5,o(t,a,r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}(),n.getMoreBooks=function(){var e=Object(v.a)(b.a.mark((function e(t,a){var r,o,l=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:1,o=n.props.getMoreBooks,e.prev=2,e.next=5,o(t,a,r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}(),n.handleScroll=function(){var e=window.innerHeight,t=document.body.scrollHeight,a=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop,r=n.props.location.search,o=n.state.page,l=decodeURI(r).split("=")[1].replace(/[%20]/gi," ").split("&")[0],c=window.location.search.split("type=")[1];t-e-a<100&&(n.getMoreBooks(l,c,o+1),n.setState({page:o+1}))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.keyword,r=t.type;n.props.history.push("/search?p=".concat(a,"&type=").concat(r," ")),n.setState({isSubmited:!0}),n.getBooks(a,r)},n.handleChange=function(e){n.setState({keyword:e})},n.handleAll=function(){n.setState({type:"0"})},n.handleBook=function(){n.setState({type:"1"})},n.handleAuthor=function(){n.setState({type:"2"})};var a=window.location.search.split("type=")[1];return n.state={keyword:null,type:a||"0",page:1,isSubmited:!1},n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.location.search,t=decodeURI(e).split("=")[1].replace(/[%20]/gi," ").split("&")[0],n=window.location.search.split("type=")[1];this.getBooks(t,n),window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this,t=this.props,n=t.location.search,a=t.books,r=t.keyword,o=this.state.type,l=decodeURI(n).split("=")[1].replace(/[%20]/gi," ");return u.a.createElement(s.Fragment,null,u.a.createElement("div",{style:{marginTop:"73px"}},u.a.createElement("h1",{style:{marginLeft:"10px",paddingTop:"10px"}},u.a.createElement("span",{style:{fontWeight:"800"}},"\uac80\uc0c9")," >"," ",l.substring(0,l.length-5)),u.a.createElement("div",{className:"form-container",style:qt.form},u.a.createElement("form",{style:{width:"100%"},onSubmit:this.handleSubmit},u.a.createElement("input",{type:"text",style:qt.text,placeholder:"\ucc45/\uc800\uc790 \uac80\uc0c9",value:r,onChange:function(t){return e.handleChange(t.target.value)}}),u.a.createElement("div",{style:{marginTop:"10px"}},u.a.createElement("input",{type:"radio",name:"check",value:"all",onChange:this.handleAll,checked:"0"===o}),u.a.createElement("label",null,"\ubaa8\ub4e0"),u.a.createElement("input",{type:"radio",name:"check",value:"book",onChange:this.handleBook,checked:"1"===o}),u.a.createElement("label",null,"\ucc45"),u.a.createElement("input",{type:"radio",name:"check",value:"author",onChange:this.handleAuthor,checked:"2"===o}),u.a.createElement("label",null," \uc791\uac00")))),function(e){return u.a.createElement(s.Fragment,null,u.a.createElement(re,{booklist:e,from:"search"}))}(a)))}}]),t}(s.Component),Yt=Object(P.b)((function(e){return{pending:e.books.pending,error:e.books.error,books:e.books.books}}),(function(e){return{getMoreBooks:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e(me(t,n,a))},getBooks:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e(pe(t,n,a))}}}))(Kt),zt=function(e){function t(){return Object(f.a)(this,t),Object(k.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props,t=e.history,n=e.profile;return u.a.createElement("div",null,u.a.createElement(He,{history:t,profile:n}))}}]),t}(s.Component),Xt=Object(P.b)((function(e){return{isLoggedIn:e.login.isLoggedIn,profile:e.login.profile}}))(zt),Jt=n(83),$t=n.n(Jt),Qt=function(e){return B.a.post("http://localhost:8080/upload",e)},Zt=Object(F.a)((i={},Object(G.a)(i,"UPLOAD_PENDING",(function(e,t){return Object(M.a)({},e,{pending:!0,error:!1})})),Object(G.a)(i,"UPLOAD_SUCCESS",(function(e,t){return{success:!0,pending:!1,error:!1}})),Object(G.a)(i,"UPLOAD_FAILURE",(function(e,t){return Object(M.a)({},e,{pending:!1,error:!0})})),i),{pending:!1,error:!1,success:!1}),en=_.a.bind($t.a),tn=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(k.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={selected:null,title:"",authors:[],author:"",isbn:"",contents:""},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.selected,r=t.title,o=t.authors,l=t.isbn,c=t.contents,i=n.props.profile.profile._id,s=new FormData;s.append("thumbnail",a),s.append("title",r),s.append("authors",o),s.append("isbn",l),s.append("contents",c),s.append("uid",i),n.submitData(s)},n.handleAuthorChange=function(e){n.setState({author:e})},n.handleKeyPress=function(e){var t=n.state,a=t.author,r=t.authors;""!==a&&13===e&&n.setState({authors:[].concat(Object(ce.a)(r),[a]),author:""})},n.handleDeleteTag=function(e){var t=n.state.authors,a=e.target.previousSibling.innerHTML,r=t.filter((function(e){return e!==a}));n.setState({authors:r})},n.handleFile=function(e){var t=e.target.files;n.setState({selected:t[0]});var a=URL.createObjectURL(t[0]);document.querySelector(".preview-img").src=a},n.handleTitle=function(e){n.setState({title:e})},n.handleContents=function(e){n.setState({contents:e})},n.handleIsbn=function(e){n.setState({isbn:e})},n.submitData=function(){var e=Object(v.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.postUpload,e.prev=1,e.next=4,a(t);case 4:window.location.href="/",e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.title,a=t.isbn,r=t.contents,o=t.author,l=t.authors;t.selected;return u.a.createElement("div",{className:en("book-upload")},u.a.createElement("div",{className:en("form-container")},u.a.createElement("form",{onSubmit:this.handleSubmit},u.a.createElement("div",{className:en("upload-btn-wrapper")},u.a.createElement("img",{className:en("preview-img"),alt:""}),u.a.createElement("div",{style:{position:"relative"}},u.a.createElement("button",{className:en("btn")},"\uc774\ubbf8\uc9c0 \uc120\ud0dd"),u.a.createElement("input",{type:"file",onChange:this.handleFile,required:!0}))),u.a.createElement("input",{type:"text",value:n,onChange:function(t){return e.handleTitle(t.target.value)},placeholder:"\ucc45 \uc774\ub984",required:!0}),u.a.createElement("div",{className:en("authors")},function(e,t){return e.map((function(e){var n=Object(te.a)();return u.a.createElement("div",{className:en("author-tag"),key:n},u.a.createElement("span",{className:en("author-name")},e),u.a.createElement("span",{className:en("author-x"),onClick:t},"x"))}))}(l,this.handleDeleteTag),u.a.createElement("input",{className:en("author-input"),type:"text",placeholder:"\uc800\uc790 +",value:o,onChange:function(t){return e.handleAuthorChange(t.target.value)},onKeyDown:function(t){return e.handleKeyPress(t.keyCode)}})),u.a.createElement("input",{type:"text",value:a,onChange:function(t){return e.handleIsbn(t.target.value)},placeholder:"ISBN",required:!0}),u.a.createElement("textarea",{placeholder:"\uc694\uc57d",value:r,onChange:function(t){return e.handleContents(t.target.value)},required:!0}),u.a.createElement("input",{type:"submit",value:"\uc81c\ucd9c"}))))}}]),t}(s.Component),nn=Object(P.b)((function(e){return{pending:e.upload.pending,error:e.upload.error,success:e.upload.success,profile:e.login.profile}}),(function(e){return{postUpload:function(t){return e(function(e){return{type:"UPLOAD",payload:Qt(e)}}(t))}}}))(tn),an=function(e){function t(){return Object(f.a)(this,t),Object(k.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return u.a.createElement(s.Fragment,null,u.a.createElement(nn,null))}}]),t}(s.Component),rn=n(84),on=n.n(rn),ln=n(85),cn=n.n(ln),sn=_.a.bind(cn.a),un=Object(E.g)((function(e){var t=e.match,n=e.location,a=e.history,r=Object(s.useState)(""),o=Object(T.a)(r,2),l=o[0],c=o[1];return console.log(t,n,a),u.a.createElement(s.Fragment,null,u.a.createElement("div",{className:sn("search-bar")},u.a.createElement("form",{className:sn("form-container"),onSubmit:function(e){a.push("/search?p=".concat(l)),e.preventDefault()}},u.a.createElement("input",{type:"input",placeholder:"\ucc45 \uac80\uc0c9...",value:l,name:"q",onChange:function(e){return t=e.target.value,void c(t);var t}}))))})),pn=_.a.bind(on.a),mn=function(e,t,n){return u.a.createElement("div",{className:pn("menu","".concat(e?"show":""))},u.a.createElement("ul",null,u.a.createElement("li",null,u.a.createElement(d.b,{to:"/me"},u.a.createElement("p",null,"\ud504\ub85c\ud544"))),u.a.createElement("li",null,u.a.createElement(d.b,{to:"/upload"},u.a.createElement("p",null,"\ucc45 \uc5c5\ub85c\ub4dc"))),u.a.createElement("li",{onClick:function(){return t()}},u.a.createElement("p",null,"\ub85c\uadf8\uc544\uc6c3"))),u.a.createElement("div",{className:pn("callout")}))},dn=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(k.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,n.state={showMenu:!1,lastPos:window.pageYOffset,isLogOut:!1},n.checkUser=Object(v.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("atk"),a=n.props.checkUser,!t){e.next=11;break}return e.prev=3,e.next=6,a(t);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])}))),n.requestLogOut=Object(v.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.userLogOut,e.prev=1,e.next=4,t();case 4:a=e.sent,200===a.value.status&&(localStorage.removeItem("atk"),n.setState({isLogOut:!0})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),n.clickMenu=function(){var e=n.state.showMenu;n.setState({showMenu:!e})},n.handleScroll=function(e){var t=window.pageYOffset,a=n.state.lastPos;e&&(a>t?document.querySelector(".header").classList.remove("header-up"):document.querySelector(".header").classList.add("header-up"),n.setState({lastPos:t}))},n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this._isMounted,this.checkUser()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.state,t=e.showMenu,n=e.isLogOut,a=this.props,r=a.isLoggedIn,o=a.profile;a.getBooks;return this.handleScroll(),u.a.createElement("div",{className:pn("header")},u.a.createElement("div",{className:pn("title")},u.a.createElement(d.b,{to:"/"},u.a.createElement("span",{className:pn("fr")},"Happ"),u.a.createElement("span",{className:pn("en")},"Reads"))),u.a.createElement(un,null),u.a.createElement("div",{className:pn("community")},u.a.createElement(d.b,{to:"/community/reviews"},"\ucee4\ubba4\ub2c8\ud2f0")),u.a.createElement("div",null,u.a.createElement("ul",{className:pn("ul")},function(e,t,n,a,r){return e?u.a.createElement(s.Fragment,null,u.a.createElement("li",null,u.a.createElement("span",null,u.a.createElement("img",{src:r.profile?r.profile.avatarUrl:"",alt:"me",onClick:t,style:{width:"40px",height:"40px",borderRadius:"50%"}})),mn(n,a,e))):u.a.createElement(s.Fragment,null,u.a.createElement("li",{className:pn("login")},u.a.createElement(d.b,{to:"/login"},"\ub85c\uadf8\uc778")),u.a.createElement("li",null,u.a.createElement(d.b,{to:"/signup"},"\uac00\uc785")))}(r,this.clickMenu,t,this.requestLogOut,o))),n&&u.a.createElement(E.a,{to:"/"}))}}]),t}(s.Component),En=Object(P.b)((function(e){return{isLoggedIn:e.login.isLoggedIn,profile:e.login.profile}}),(function(e){return{checkUser:function(t){return e(z(t))},userLogOut:function(){return e({type:"LOGOUT",payload:B.a.post("http://localhost:8080/logout")})},getBooks:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e(pe(t,n,a))}}}))(dn),hn=n(86),bn=n.n(hn),vn={padding:"80px",textAlign:"center"},fn=function(e){function t(){return Object(f.a)(this,t),Object(k.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{style:vn},u.a.createElement("h1",{style:{fontSize:"2.0rem",fontWeight:"700",marginTop:"20px",marginBottom:"20px"}},"404 Not Found"),u.a.createElement("img",{src:bn.a,style:{height:"250px",marginBottom:"10px"},alt:"404"}))}}]),t}(s.Component),gn=n(87),kn=n.n(gn),On=n(88),wn=n.n(On),yn=_.a.bind(wn.a),jn={"\uc77d\uc74c":"read","\uc77d\uae30":"want_read","\uc77d\ub294\uc911":"reading"},Sn=function(e){var t=e.handleCancel,n=e.handleChange,a=e.item,r=e.type,o=Object(s.useState)(jn[r]),l=Object(T.a)(o,2),c=l[0],i=l[1];return u.a.createElement("div",{className:"modal-container"},u.a.createElement("div",{className:"modal-overlay"}),u.a.createElement("div",{className:"modal"},u.a.createElement("p",{className:yn("exit")},u.a.createElement("span",{role:"img","aria-label":"cancel",onClick:t},"\u274c")),u.a.createElement("img",{src:a.thumbnail,alt:a.id}),u.a.createElement("div",{className:yn("status-wrapper")},u.a.createElement("div",{className:yn("read-status")},u.a.createElement("span",null,"\ud604\uc7ac \uc0c1\ud0dc:"),u.a.createElement("p",{className:yn("current-status")},r)),u.a.createElement("select",{className:yn("select"),defaultValue:c,onChange:function(e){var t=e.target;i(t.value)}},u.a.createElement("option",{value:"want_read"},"\uc77d\uc744 \ucc45"),u.a.createElement("option",{value:"reading"},"\uc77d\b\ub294\uc911"),u.a.createElement("option",{value:"read"},"\uc77d\uc74c")),u.a.createElement("div",{className:yn("button-container")},u.a.createElement("button",{className:yn("ok-btn"),onClick:function(e){return n(a,c)}},"\uc218\uc815"),u.a.createElement("button",{className:yn("cancel-btn"),onClick:t},"\ucde8\uc18c")))))},_n=_.a.bind(kn.a),Nn=null,Cn=null,In=function(e){e.classList.add("show"),Nn=e},Rn={"\uc77d\uc74c":"read","\uc77d\uae30":"want_read","\uc77d\ub294\uc911":"reading"},xn=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(k.a)(this,Object(O.a)(t).call(this,e))).handleScroll=function(e){var t=document.querySelector(".menu-ul"),n=t.getBoundingClientRect().top;e&&(n<50?Cn.classList.contains("fix")||(Cn.classList.add("fix"),t.classList.add("fix")):(Cn.classList.remove("fix"),t.classList.remove("fix")))},n.getUser=Object(v.a)(b.a.mark((function e(){var t,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.hash.split("/"),a=t[t.length-1],r=n.props.getUser,e.prev=3,e.next=6,r(a);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])}))),n.checkType=function(e){for(var t=n.props.user.user,a=t.read,r=t.want_read,o=t.reading,l=0;l<r.length;l++)if(r[l].book.isbn===e.isbn)return"\uc77d\uae30";for(var c=0;c<o.length;c++)if(o[c].book.isbn===e.isbn)return"\uc77d\ub294\uc911";for(var i=0;i<a.length;i++)if(a[i].book.isbn===e.isbn)return"\uc77d\uc74c"},n.getBooks=function(e){var t=n.props.user.user,a=parseInt(e,10);if(t){if(1===a){var r=t.read,o=t.want_read,l=t.reading;return o.concat(l).concat(r).sort((function(e,t){return e.title>t.title?1:-1})).map((function(e){return u.a.createElement("tr",{key:e.book._id},u.a.createElement("td",null,u.a.createElement(d.b,{to:"/book/".concat(e.isbn)},u.a.createElement("img",{src:e.book.thumbnail,alt:e.book.thumbnail}))),u.a.createElement("td",null,u.a.createElement(d.b,{to:"/book/".concat(e.book.isbn)},e.book.title)),u.a.createElement("td",null,e.book.authors.length>1?e.book.authors[0]+"*":e.book.authors[0]),u.a.createElement("td",null,0),u.a.createElement("td",null,ze()(e.book.createdAt).format("YY\ub144MM\uc6d4DD\uc77c HH:MM:SS")),u.a.createElement("td",null,n.checkType(e.book)," "),u.a.createElement("td",{className:_n("settings all"),onClick:function(t){return n.handleSettings(t.target,e.book,n.checkType(e.book))}},u.a.createElement("span",null,"\uc218\uc815"),u.a.createElement("span",null,"X")))}))}if(2===a){var c=t.uploaded;return console.log(c),c.map((function(e){return u.a.createElement("tr",{key:e._id},u.a.createElement("td",null,u.a.createElement(d.b,{to:"/book/".concat(e.isbn)},u.a.createElement("img",{src:e.thumbnail,alt:e.thumbnail}))),u.a.createElement("td",null,u.a.createElement(d.b,{to:"/book/".concat(e.isbn)},e.title)),u.a.createElement("td",null,e.authors.length>1?e.authors[0]+"*":e.authors[0]),u.a.createElement("td",null,0),u.a.createElement("td",null,ze()(e.createdAt).format("YY\ub144MM\uc6d4DD\uc77c HH:MM:SS")),u.a.createElement("td",null,"\uc5c5\ub85c\ub4dc"),u.a.createElement("td",{className:_n("settings uploaded"),onClick:function(t){return n.handleSettings(t.target,e,n.checkType(e))}},u.a.createElement("span",null,"\uc218\uc815"),u.a.createElement("span",null,"X")))}))}if(3===a)return t.want_read.map((function(e){return u.a.createElement("tr",{key:e.book._id},u.a.createElement("td",null,u.a.createElement(d.b,{to:"/book/".concat(e.isbn)},u.a.createElement("img",{src:e.book.thumbnail,alt:e.book.thumbnail}))),u.a.createElement("td",null,u.a.createElement(d.b,{to:"/book/".concat(e.book.isbn)},e.book.title)),u.a.createElement("td",null,e.book.authors.length>1?e.book.authors[0]+"*":e.book.authors[0]),u.a.createElement("td",null,0),u.a.createElement("td",null,ze()(e.book.createdAt).format("YY\ub144MM\uc6d4DD\uc77c HH:MM:SS")),u.a.createElement("td",null,"\uc77d\uae30"),u.a.createElement("td",{className:_n("settings want"),onClick:function(t){return n.handleSettings(t.target,e.book,n.checkType(e.book))}},u.a.createElement("span",null,"\uc218\uc815"),u.a.createElement("span",null,"X")))}));if(4===a)return t.reading.map((function(e){return u.a.createElement("tr",{key:e._id},u.a.createElement("td",null,u.a.createElement(d.b,{to:"/book/".concat(e.book.isbn)},u.a.createElement("img",{src:e.book.thumbnail,alt:e.book.thumbnail}))),u.a.createElement("td",null,u.a.createElement(d.b,{to:"/book/".concat(e.book.isbn)},e.book.title)),u.a.createElement("td",null,e.book.authors.length>1?e.book.authors[0]+"*":e.book.authors[0]),u.a.createElement("td",null,0),u.a.createElement("td",null,ze()(e.book.createdAt).format("YY\ub144MM\uc6d4DD\uc77c HH:MM:SS")),u.a.createElement("td",null,"\uc77d\ub294\uc911"),u.a.createElement("td",{className:_n("settings reading"),onClick:function(t){return n.handleSettings(t.target,e.book,n.checkType(e.book))}},u.a.createElement("span",null,"\uc218\uc815"),u.a.createElement("span",null,"X")))}));if(5===a)return t.read.map((function(e){return u.a.createElement("tr",{key:e.book._id},u.a.createElement("td",null,u.a.createElement(d.b,{to:"/book/".concat(e.book.isbn)},u.a.createElement("img",{src:e.book.thumbnail,alt:e.book.thumbnail}))),u.a.createElement("td",null,u.a.createElement(d.b,{to:"/book/".concat(e.book.isbn)},e.book.title)),u.a.createElement("td",null,e.book.authors.length>1?e.book.authors[0]+"*":e.book.authors[0]),u.a.createElement("td",null,0),u.a.createElement("td",null,ze()(e.book.createdAt).format("YY\ub144MM\uc6d4DD\uc77c HH:MM:SS")),u.a.createElement("td",null,"\uc77d\uc74c"),u.a.createElement("td",{className:_n("settings"),onClick:function(t){return n.handleSettings(t.target,e.book,n.checkType(e.book))}},u.a.createElement("span",null,"\uc218\uc815"),u.a.createElement("span",null,"X")))}))}return u.a.createElement(s.Fragment,null)},n.deleteShelve=function(){var e=Object(v.a)(b.a.mark((function e(t,a,r){var o,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.props.deleteShelve,e.prev=1,e.next=4,o(t,a,r);case 4:l=e.sent,200===l.value.status&&n.getUser(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n,a){return e.apply(this,arguments)}}(),n.handleClick=function(e){var t=e.target,a=t.getAttribute("data-value");n.setState({type:a}),Nn&&function(e){e.classList.remove("show")}(Nn),In(t)},n.handleSettings=function(e,t,a){if("\uc218\uc815"===e.innerText&&n.setState({openModal:!0,item:t,status:a}),"X"===e.innerText){var r=n.props.profile.profile;n.deleteShelve(r._id,t._id,Rn[a])}},n.handleCancel=function(e){n.setState({openModal:!1})},n.handleChange=function(){var e=Object(v.a)(b.a.mark((function e(t,a){var r,o,l,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props,o=r.postShelve,l=r.profile.profile,e.prev=1,e.next=4,o(l.email,t.isbn,t.title,t.authors,a,t.thumbnail);case 4:c=e.sent,200===c.value.status&&(n.getUser(l.id),n.setState({openModal:!1})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),n.state={type:1,openModal:!1,lastPos:90,item:{},status:""},n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=document.querySelector(".menu-ul");Cn=document.querySelector(".shelve-header"),window.addEventListener("scroll",this.handleScroll),e.addEventListener("click",this.handleClick),In(document.querySelector(".menu-ul li:nth-child(1)")),this.getUser(),window.scrollTo(0,0)}},{key:"componentWillUnmount",value:function(){var e=document.querySelector(".menu-ul");window.removeEventListener("scroll",this.handleScroll),e.removeEventListener("click",this.handleClick)}},{key:"render",value:function(){var e=this.props,t=e.user.user,n=e.profile.profile,a=this.state,r=a.type,o=a.openModal,l=a.item,c=a.status,i=window.location.pathname.substring(1).split("/")[1];return u.a.createElement("div",{className:_n("book-shelve")},o?u.a.createElement(Sn,{handleCancel:this.handleCancel,handleChange:this.handleChange,item:l,type:c}):u.a.createElement(s.Fragment,null),u.a.createElement("div",null,u.a.createElement("p",{className:_n("shelve-header")},u.a.createElement("span",null,t?t.email:"","'s ")," ",u.a.createElement("span",null,"\ucc45\uc7a5")),u.a.createElement("ul",{className:_n("menu-ul")},u.a.createElement("li",{"data-value":1},"\uc804\uccb4"),u.a.createElement("li",{"data-value":3},"\uc77d\uae30 (",t?t.want_read.length:0,")"),u.a.createElement("li",{"data-value":4},"\uc77d\ub294\uc911 (",t?t.reading.length:0,")"),u.a.createElement("li",{"data-value":5},"\uc77d\uc74c (",t?t.read.length:0,")"),u.a.createElement("li",{"data-value":2},"\uc5c5\ub85c\ub4dc"))),u.a.createElement("div",null,u.a.createElement("table",null,u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"\ucee4\ubc84"),u.a.createElement("th",null,"\uc81c\ubaa9"),u.a.createElement("th",null,"\uc800\uc790"),u.a.createElement("th",null,"\ud3c9\uade0"),u.a.createElement("th",null,"\uc0dd\uc131 \ub0a0\uc9dc"),u.a.createElement("th",null,"\uc0c1\ud0dc"),n&&i===n._id?u.a.createElement("th",null,"\uc124\uc815"):u.a.createElement(s.Fragment,null))),u.a.createElement("tbody",null,this.getBooks(r)))))}}]),t}(s.Component),Ln=Object(P.b)((function(e){return{profile:e.login.profile,user:e.user.profile}}),(function(e){return{getUser:function(t){return e(Et(t))},postShelve:function(t,n,a,r,o,l){return e(X(t,n,a,r,o,l))},deleteShelve:function(t,n,a){return e(function(e,t,n){return{type:"DELETE_SHELVE",payload:Y(e,t,n)}}(t,n,a))}}}))(xn),Tn=n(89),Un=n.n(Tn),Dn=_.a.bind(Un.a),An=function(e){var t=e.path;return u.a.createElement("div",{className:Dn("category")},u.a.createElement("ul",null,u.a.createElement("li",null,u.a.createElement(d.b,{to:"/community/reviews"},"\ucd5c\uadfc \ub9ac\ubdf0")),u.a.createElement("li",null,u.a.createElement(d.b,{to:"/community/top-readers",style:"top-readers"===t?{fontWeight:800}:{}},"Top Readers")),u.a.createElement("li",null,u.a.createElement(d.b,{to:"/community/top-reviewers",style:"top-reviewers"===t?{fontWeight:800}:{}},"Top Reviewers"))))},Pn=n(90),Gn=n.n(Pn),Mn=_.a.bind(Gn.a),Fn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return"top-readers"===e?u.a.createElement(s.Fragment,null,u.a.createElement("div",{className:Mn("range-container")},u.a.createElement("span",{"data-value":0,"data-role":"reader",onClick:n},"\uc804\uccb4"),u.a.createElement("span",null," | "),u.a.createElement("span",{"data-value":1,"data-role":"reader",onClick:n},"\uc774\ubc88 \uc8fc"),u.a.createElement("span",null," | "),u.a.createElement("span",{"data-value":2,"data-role":"reader",onClick:n},"\uc774\ubc88 \ub2ec")),u.a.createElement("table",{className:Mn("table")},u.a.createElement("tbody",null,0===t.length&&u.a.createElement("tr",{style:{textAlign:"center",border:"none"}},u.a.createElement("p",null,"\uae30\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.")),t.length>=1&&t.map((function(e,t){return u.a.createElement("tr",{key:e&&e._id},u.a.createElement("td",null,t+1),u.a.createElement("td",null,u.a.createElement(d.b,{to:"/profile/".concat(e._id)},u.a.createElement("img",{src:e&&e.avatarUrl,alt:e&&e.avatarUrl}))),u.a.createElement("td",null,u.a.createElement(d.b,{to:"/profile/".concat(e._id)},u.a.createElement("p",null,e&&e.email)),u.a.createElement("p",null,"\ucc45: ",e&&e.read.length," \uad8c")),u.a.createElement("td",null,u.a.createElement("p",null,0===parseInt(a)&&u.a.createElement("span",null,"\uc804\uccb4: "),1===parseInt(a)&&u.a.createElement("span",null,"\uc774\ubc88 \uc8fc: "),2===parseInt(a)&&u.a.createElement("span",null,"\uc774\ubc88 \ub2ec: "),u.a.createElement("span",null,e&&e.read.length," \uad8c"))))}))))):"top-reviewers"===e?u.a.createElement(s.Fragment,null,u.a.createElement("div",{className:Mn("range-container")},u.a.createElement("span",{"data-value":0,"data-role":"reviewer",onClick:n},"\uc804\uccb4"),u.a.createElement("span",null," | "),u.a.createElement("span",{"data-value":1,"data-role":"reviewer",onClick:n},"\uc774\ubc88 \uc8fc"),u.a.createElement("span",null," | "),u.a.createElement("span",{"data-value":2,"data-role":"reviewer",onClick:n},"\uc774\ubc88 \ub2ec")),u.a.createElement("table",{className:Mn("table")},u.a.createElement("tbody",null,0===t.length&&u.a.createElement("tr",{style:{textAlign:"center",border:"none"}},u.a.createElement("p",null,"\uae30\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.")),t.length>0&&t.map((function(e,t){return u.a.createElement("tr",{key:e._id},u.a.createElement("td",null,t+1),u.a.createElement("td",null,u.a.createElement("img",{src:e.avatarUrl,alt:e.avatarUrl})),u.a.createElement("td",null,u.a.createElement("p",null,e.email),u.a.createElement("p",null,e.reviews.length," \ub9ac\ubdf0")),u.a.createElement("td",null,u.a.createElement("p",null,0===parseInt(a)&&u.a.createElement("span",null,"\uc804\uccb4: "),1===parseInt(a)&&u.a.createElement("span",null,"\uc774\ubc88 \uc8fc: "),2===parseInt(a)&&u.a.createElement("span",null,"\uc774\ubc88 \ub2ec: "),u.a.createElement("span",null,e.reviews.length," \ub9ac\ubdf0"))))}))))):"reviews"===e?u.a.createElement(s.Fragment,null,0===t.length&&u.a.createElement("p",{style:{textAlign:"center"}},"\uae30\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."),t.length>0&&t.map((function(e){return u.a.createElement("div",{key:e&&e._id,className:Mn(["card","row"])},u.a.createElement("div",{className:Mn("first-col")},u.a.createElement(d.b,{to:"/book/".concat(e&&e.book&&e.book.isbn)},u.a.createElement("img",{src:e&&e.book&&e.book.thumbnail,alt:e&&e.book&&e.book.title}))),u.a.createElement("div",{className:Mn("second-col")},u.a.createElement("p",{className:Mn("date")},e&&ze()(e.createdAt).format("YYYY/MM/DD HH:MM:DD")),u.a.createElement("p",{className:Mn("reviewer")},u.a.createElement(d.b,{to:"/profile/".concat(e&&e.reviewer._id)},e&&e.reviewer.email)),u.a.createElement("h4",{className:Mn("title")},u.a.createElement(d.b,{to:"/book/".concat(e&&e.book&&e.book.isbn)},e&&e.book&&e.book.title)),u.a.createElement("div",{className:Mn("content")},u.a.createElement("img",{src:e&&e.reviewer&&e.reviewer.avatarUrl,alt:e&&e.reviewer.email}),u.a.createElement("p",null,e&&e.content))))}))):void 0},Vn=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(k.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={type:0},n.getReviews=Object(v.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.getReviews,e.prev=1,e.next=4,t();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])}))),n.getTopReaders=function(){var e=Object(v.a)(b.a.mark((function e(){var t,a,r=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:0,a=n.props.getTopReaders,e.prev=2,e.next=5,a(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}(),n.getTopReviewers=function(){var e=Object(v.a)(b.a.mark((function e(){var t,a,r=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:0,a=n.props.getTopReviewers,e.prev=2,e.next=5,a(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}(),n.handleType=function(e){var t=e.target,a=t.getAttribute("data-value"),r=t.getAttribute("data-role");"reader"===r&&n.getTopReaders(a),"reviewer"===r&&n.getTopReviewers(a),n.setState({type:a})},n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.getReviews(),this.getTopReaders(),this.getTopReviewers()}},{key:"render",value:function(){var e=this.props,t=e.path,n=e.reviews,a=e.topReaders,r=e.topReviewers,o=this.state.type;return u.a.createElement("div",{className:Mn("community-container")},"reviews"===t&&u.a.createElement("div",{className:Mn("reviews")},Fn("reviews",n)),"top-readers"===t&&u.a.createElement("div",null,Fn("top-readers",a,this.handleType,o)),"top-reviewers"===t&&u.a.createElement("div",null,Fn("top-reviewers",r,this.handleType,o)))}}]),t}(s.Component),Bn=Object(P.b)((function(e){return{reviews:e.review.reviews,topReaders:e.user.topReaders,topReviewers:e.user.topReviewers}}),(function(e){return{getReviews:function(){return e({type:"GET_REVIEWS",payload:B.a.get("http://localhost:8080/reviews")})},getTopReaders:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e(ht(t))},getTopReviewers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e(bt(t))}}}))(Vn),Wn=function(e){function t(){return Object(f.a)(this,t),Object(k.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.history.location.pathname.substr(1).split("/")[1];return u.a.createElement(s.Fragment,null,u.a.createElement("div",{style:{paddingTop:"70px"}},u.a.createElement(An,{path:e}),u.a.createElement(Bn,{path:e})))}}]),t}(s.Component);var Hn=function(){return u.a.createElement(d.a,null,u.a.createElement(En,null),u.a.createElement(E.d,null,u.a.createElement(E.b,{path:"/",exact:!0,component:he}),u.a.createElement(E.b,{path:"/book/:id",component:Ft}),u.a.createElement(E.b,{path:"/login",component:Ne}),u.a.createElement(E.b,{path:"/search",component:Yt}),u.a.createElement(E.b,{path:"/signup",component:Ae}),u.a.createElement(E.b,{path:"/edit",component:Xt}),u.a.createElement(E.b,{path:"/me",component:gt}),u.a.createElement(E.b,{path:"/upload",component:an}),u.a.createElement(E.b,{path:"/community/reviews",component:Wn}),u.a.createElement(E.b,{path:"/community/top-readers",component:Wn}),u.a.createElement(E.b,{path:"/community/top-reviewers",component:Wn}),u.a.createElement(E.b,{path:"/profile/:id",component:gt}),u.a.createElement(E.b,{path:"/shelve/:id",component:Ln}),u.a.createElement(E.b,{component:fn})),u.a.createElement(Ht,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var qn,Kn=n(31),Yn=Object(F.a)((qn={},Object(G.a)(qn,"POST_SHELVE_PENDING",(function(e,t){return{pending:!0,error:!1}})),Object(G.a)(qn,"POST_SHELVE_SUCCESS",(function(e,t){})),Object(G.a)(qn,"POST_SHELVE_FAILURE",(function(e,t){return{pending:!1,error:!0}})),qn),{pending:!1,error:!1}),zn=Object(Kn.c)({books:de,signup:Ue,login:$,review:et,shelve:Yn,user:vt,upload:Zt}),Xn=(n(172),n(91)),Jn=Object(Xn.a)({promiseTypeSuffixes:["PENDING","SUCCESS","FAILURE"]}),$n=Object(Kn.d)(zn,Object(Kn.a)(Jn));m.a.render(u.a.createElement(P.a,{store:$n},u.a.createElement(Hn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},45:function(e,t,n){e.exports=n.p+"static/media/1.f081dab0.jpg"},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){e.exports=n.p+"static/media/go_back.62137145.png"},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},94:function(e,t,n){e.exports=n(173)}},[[94,1,2]]]);
//# sourceMappingURL=main.dae182f5.chunk.js.map