(this.webpackJsonpgoodreads=this.webpackJsonpgoodreads||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){e.exports=a.p+"static/media/go_back.62137145.png"},110:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){},114:function(e,t,a){},128:function(e,t,a){e.exports=a(228)},227:function(e,t,a){},228:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),l=a(23),o=a.n(l),i=a(8),s=a(12),u=a(5),m=a(79),d=a.n(m),p=a(6),b=a.n(p),E=b.a.bind(d.a),v=function(){return c.a.createElement("section",{className:E("home-section")},c.a.createElement("section",{className:E("words")},c.a.createElement("h3",null,"With Happyness"),c.a.createElement("h4",null,"\uc790\uc2e0\uc758 \uc778\uc0dd \ucc45\uc744 \ucc3e\uc544\ubcf4\uc138\uc694")))},f=a(80),g=a.n(f),O=a(1),j=a(81),h=a.n(j),k=(a(133),a(134),a(82)),S=a.n(k),_=a(83),N=a.n(_),w=b.a.bind(N.a),y=function(e){var t=e.children;return c.a.createElement("div",{className:w("scroll-item")},t)},C=a(230),R=b.a.bind(h.a),I=function(e){var t,a=e.books,n=Object(r.useState)({dots:!1,infinite:!0,speed:500,slidesToShow:4,slidesToScroll:4,adaptiveHeight:!0,autoplay:!0,autoplaySpeed:4e3}),l=Object(u.a)(n,2),o=l[0],s=l[1],m=Object(r.useCallback)((function(){var e=window.innerWidth;s(e>=0&&e<=425?Object(O.a)({},o,{slidesToShow:2,slidesToScroll:2}):e>=426&&e<=1024?Object(O.a)({},o,{slidesToShow:4,slidesToScroll:4}):Object(O.a)({},o,{slidesToShow:6,slidesToScroll:6}))}),[o]);return Object(r.useEffect)((function(){return m(),window.addEventListener("resize",m),function(){window.removeEventListener("resize",m)}}),[]),c.a.createElement("section",{className:R("slider-container")},c.a.createElement(S.a,o,null===a||void 0===a?void 0:null===(t=a.slice(0,8))||void 0===t?void 0:t.map((function(e){return c.a.createElement(y,{key:Object(C.a)()},c.a.createElement(i.b,{to:"/book/".concat(e._id)},c.a.createElement("img",{src:e.thumbnail,alt:e.title})))}))))},L=a(84),P=a.n(L),T=a(85),U=a.n(T),D=a(11),G=a(4),x=a(2),B=a(229),F=a(9),A=a.n(F),H=a(14),V=a.n(H);V.a.config(),A.a.defaults.baseURL="https://happread.herokuapp.com/";var M,K=function(e,t){return A.a.post("login",{email:e,password:t})},W=function(e){return A.a.create({headers:{Authorization:"".concat(e)}}).post("profile")},Y=function(e,t,a){return A.a.post("shelve",{email:e,id:t,type:a})},q=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return A.a.delete("shelve",{data:{uid:e,id:t,type:a}})},z=function(e,t,a){return A.a.delete("book/".concat(e,"/review/").concat(t),{data:{uid:a}})},J=function(e){return A.a.post("edit",e)},X=function(e){return{type:"USER_CHECK",payload:W(e)}},Q=function(e,t,a){return{type:"POST_SHELVE",payload:Y(e,t,a)}},Z=function(e,t,a){return{type:"DELETE_SHELVE",payload:q(e,t,a)}},$=function(e,t,a){return{type:"DELETE_REVIEW",payload:z(e,t,a)}},ee=Object(B.a)((n={},Object(x.a)(n,"LOGIN_PENDING",(function(e,t){return Object(O.a)({},e,{loginPending:!0,loginError:!1,loginSuccess:!1})})),Object(x.a)(n,"LOGIN_SUCCESS",(function(e,t){return{profile:t.payload.data,loginPending:!1,loginError:!1,loginSuccess:!0,isLoggedIn:!0}})),Object(x.a)(n,"LOGIN_FAILURE",(function(e,t){return console.log(),Object(O.a)({},e,{loginPending:!1,loginError:!0,loginSuccess:!1,isLoggedIn:!1})})),Object(x.a)(n,"USER_CHECK_PENDING",(function(e,t){return Object(O.a)({},e,{pending:!0,error:!1,isLoggedIn:!1})})),Object(x.a)(n,"USER_CHECK_SUCCESS",(function(e,t){return{pending:!1,error:!1,isLoggedIn:!0,profile:t.payload.data}})),Object(x.a)(n,"USER_CHECK_FAILURE",(function(e,t){return{pending:!1,error:!0,isLoggedIn:!1}})),Object(x.a)(n,"LOGOUT_PENDING",(function(e,t){return Object(O.a)({},e,{logoutPending:!0,logoutError:!1,logoutSuccess:!1})})),Object(x.a)(n,"LOGOUR_SUCCESS",(function(e,t){return Object(O.a)({},e,{logoutPending:!1,logoutError:!1,logoutSuccess:!0,isLoggedIn:!1,profile:{}})})),Object(x.a)(n,"LOGOUT_FAILURE",(function(e,t){return Object(O.a)({},e,{logoutPending:!1,logoutError:!0,logoutSuccess:!1})})),Object(x.a)(n,"POST_SHELVE_INIT",(function(e,t){return console.log(t.payload),Object(O.a)({},e,{postShelveSuccess:!1,postShelveError:!1,postShelvePending:!1})})),Object(x.a)(n,"POST_SHELVE_PENDING",(function(e,t){return Object(O.a)({},e,{postShelvePending:!0,postShelveSuccess:!1,postShelveError:!1})})),Object(x.a)(n,"POST_SHELVE_SUCCESS",(function(e,t){var a=t.payload.data;return Object(O.a)({},e,{postShelvePending:!1,postShelveSuccess:!0,profile:a})})),Object(x.a)(n,"POST_SHELVE_FAILURE",(function(e,t){return Object(O.a)({},e,{postShelvePending:!1,postShelveError:!0})})),Object(x.a)(n,"DELETE_SHELVE_PENDING",(function(e,t){return Object(O.a)({},e,{pending:!0,error:!1})})),Object(x.a)(n,"DELETE_SHELVE_SUCCESS",(function(e,t){var a=t.payload.data;return Object(O.a)({},e,{profile:a,pending:!1,error:!1})})),Object(x.a)(n,"DELETE_SHELVE_FAILURE",(function(e,t){return Object(O.a)({},e,{pending:!1,error:!0})})),Object(x.a)(n,"DELETE_REVIEW_PENDING",(function(e,t){return Object(O.a)({},e,{pending:!0,error:!1})})),Object(x.a)(n,"DELETE_REVIEW_SUCCESS",(function(e,t){var a=t.payload.data;return Object(O.a)({},e,{pending:!1,error:!0,profile:a})})),Object(x.a)(n,"DELETE_REVIEW_FAILURE",(function(e,t){return Object(O.a)({},e,{pending:!1,error:!0})})),n),{pending:!0,error:!1,success:!1,profile:{},isLoggedIn:!1,loginPending:!1,loginError:!1,loginSuccess:!1,logoutPending:!1,logoutSuccess:!1,logoutError:!1,postShelvePending:!1,postShelveSuccess:!1,postShelveError:!1}),te=a(7),ae=a.n(te),ne=a(10),re=a(87),ce=a.n(re),le=b.a.bind(ce.a),oe={read:"\uc77d\uc740 \ucc45",want_read:"\uc77d\uc744 \ucc45",reading:"\uc77d\ub294\uc911"},ie=function(e){var t=e.handleSubmit,a=e.handleCancel,n=e.item,l=e.type,o=Object(r.useState)(oe[l]),i=Object(u.a)(o,2),s=i[0],m=i[1],d=Object(r.useState)(Object(O.a)({},n)),p=Object(u.a)(d,2),b=p[0],E=p[1],v=Object(G.c)(),f=Object(G.d)((function(e){return e.login})).profile,g=Object(r.useCallback)((function(e){var t=e.target;m(t.options[t.selectedIndex].value)}),[]),j=Object(r.useCallback)(function(){var e=Object(ne.a)(ae.a.mark((function e(t){var a;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=f.user;try{v(Q(a.email,n._id,s))}catch(t){console.log(t)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,s,f,v]),h=Object(r.useCallback)((function(e){var t=e.target;E(Object(O.a)({},b,{title:t.value}))}),[b]),k=Object(r.useCallback)((function(e){var t=e.target;E(Object(O.a)({},b,{genres:t.value}))}),[b]),S=Object(r.useCallback)((function(e){var t=e.target;E(Object(O.a)({},b,{contents:t.value}))}),[b]);return c.a.createElement("div",{className:"modal-container"},c.a.createElement("div",{className:"modal-overlay"}),c.a.createElement("div",{className:"modal"},c.a.createElement("p",{className:le("exit")},c.a.createElement("span",{role:"img","aria-label":"cancel",onClick:a},"\u274c")),void 0!==l?c.a.createElement(c.a.Fragment,null,c.a.createElement("img",{src:n.thumbnail,alt:n.id}),c.a.createElement("div",{className:le("status-wrapper")},c.a.createElement("div",{className:le("read-status")},c.a.createElement("span",null,"\ud604\uc7ac \uc0c1\ud0dc:"),c.a.createElement("p",{className:le("current-status")},oe[l])),c.a.createElement("select",{className:le("select"),defaultValue:s,onChange:g},c.a.createElement("option",{value:"want_read"},"\uc77d\uc744 \ucc45"),c.a.createElement("option",{value:"reading"},"\uc77d\b\ub294\uc911"),c.a.createElement("option",{value:"read"},"\uc77d\uc74c")),c.a.createElement("div",{className:le("button-container")},c.a.createElement("button",{className:le("ok-btn"),onClick:j},"\uc218\uc815"),c.a.createElement("button",{className:le("cancel-btn"),onClick:a},"\ucde8\uc18c")))):c.a.createElement("div",{className:le("book-info-container")},c.a.createElement("div",{className:le("img-container")},c.a.createElement("img",{src:b.thumbnail,alt:b.title})),c.a.createElement("form",{className:le("book-info-form"),onSubmit:t(b)},c.a.createElement("input",{value:b.title,placeholder:"\uc81c\ubaa9",onChange:h}),c.a.createElement("input",{value:b.genres,placeholder:"\uc7a5\ub974",onChange:k}),c.a.createElement("textarea",{value:b.contents,placeholder:"\uc694\uc57d",onChange:S}),c.a.createElement("button",{className:"ok-btn"},"\uc218\uc815")))))},se=b.a.bind(U.a),ue=Object(G.b)((function(e){return{profile:e.login.profile,success:e.login.success}}),(function(e){return{postShelve:function(t,a,n){return e(Q(t,a,n))},deleteShelve:function(t,a,n){return e(Z(t,a,n))}}}))((function(e){var t=e.from,a=e.type,n=Object(r.useState)(!1),l=Object(u.a)(n,2),o=l[0],s=l[1];if("home"===t){var m=e.book;return c.a.createElement("div",{className:se("book")},c.a.createElement("img",{src:m.thumbnail,alt:"book"}),c.a.createElement("p",null,m.title))}if("search"===t){var d=e.book;return c.a.createElement("li",{className:se("ser-bg")},c.a.createElement("div",{className:se("ser-book")},c.a.createElement(i.b,{to:"/book/".concat(d._id)},c.a.createElement("img",{src:d.thumbnail,alt:"book"}))),c.a.createElement("div",{className:se("ser-info")},c.a.createElement(i.b,{to:"/book/".concat(d._id)},c.a.createElement("h3",{className:se("ser-title")},d.title)),c.a.createElement("p",{className:se("ser-author")},function(e){var t="";return e.forEach((function(e){t+=e})),t}(d.authors)),c.a.createElement("p",{className:se("ser-contents")},d&&d.contents?d.contents.length>100?"".concat(d.contents.substr(0,100),"..."):d.contents:"\uc785\ub825\ub41c \ub0b4\uc6a9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4")))}if("profile"===t){var p=e.book.book,b=window.location.href.endsWith("/me"),E=function(){s((function(e){return!e}))};return c.a.createElement("div",{className:se("shelve")},c.a.createElement(i.b,{to:"/book/".concat(null===p||void 0===p?void 0:p._id)},c.a.createElement("p",{className:se("title")},null===p||void 0===p?void 0:p.title)),b?c.a.createElement("div",{className:se("setting-btns")},c.a.createElement("div",{className:se("edit-container")},c.a.createElement("span",{className:se("edit"),onClick:E},c.a.createElement(D.c,null)),o?c.a.createElement(ie,{type:a,item:p,handleCancel:E}):null),c.a.createElement("div",null,c.a.createElement("span",{className:se("delete"),onClick:function(t){return function(){var a=e.deleteShelve,n=e.book;a(e.profile.user._id,n._id,t)}}(a)},c.a.createElement(D.k,null)))):null)}})),me=a(33),de=b.a.bind(P.a),pe=Object(G.b)(null,null)((function(e){var t=e.from,a=e.booklist,n=e.type,r=e.handleMore,l=e.done;return"home"===t?c.a.createElement("section",{className:de("book-list")},a?"\uc804\uccb4"===n&&a.length>0?c.a.createElement(c.a.Fragment,null,a.map((function(e){return c.a.createElement(i.b,{to:"/book/".concat(e._id),key:Object(C.a)()},c.a.createElement(ue,{book:e,from:t}))})),!1===l&&c.a.createElement("div",{className:de("more-book-btn"),onClick:r},c.a.createElement("p",null,"\ub354 \ubcf4\uae30 +"))):c.a.createElement(c.a.Fragment,null,a.filter((function(e){var t;return null===e||void 0===e?void 0:null===(t=e.genres)||void 0===t?void 0:t.includes(n)})).map((function(e){return c.a.createElement(i.b,{to:"/book/".concat(e._id),key:Object(C.a)()},c.a.createElement(ue,{book:e,from:t}))})),a.filter((function(e){var t;return null===e||void 0===e?void 0:null===(t=e.genres)||void 0===t?void 0:t.includes(n)})).length>0&&!1===l&&a.length%15!==0&&c.a.createElement("div",{className:de("more-book-btn"),onClick:r},c.a.createElement("p",null,"\ub354 \ubcf4\uae30 +"))):c.a.createElement(me.ChasingDots,{color:"white",size:60})):"search"===t?c.a.createElement("section",{className:de("ser-container")},c.a.createElement("ul",{className:de("ser-ul")},a.map((function(e){return c.a.createElement(ue,{book:e,from:t,key:Object(C.a)()})})))):"profile"===t?c.a.createElement("section",null,c.a.createElement("ul",null,a.map((function(e){return c.a.createElement(ue,{book:e,from:t,key:Object(C.a)(),type:n})})))):void 0})),be=a(88),Ee=a.n(be),ve=a(34),fe=a(31),ge=b.a.bind(Ee.a),Oe=function(e){var t=e.title,a=e.books;return c.a.createElement("section",{className:ge("vertical")},c.a.createElement("p",{className:ge("title")},t,c.a.createElement(ve.a,{className:ge("book-icon"),icon:fe.c})),c.a.createElement("section",{className:ge("list")},null===a||void 0===a?void 0:a.map((function(e){return c.a.createElement(i.b,{key:Object(C.a)(),to:"/book/".concat(e._id)},c.a.createElement(ue,{book:e,from:"home"}))}))))},je=b.a.bind(g.a),he=function(e){var t=e.booklist,a=e.handleClick,n=e.handleMore,l=e.sliderBooks,o=e.recentBooks,i=e.popularBooks,s=e.type,m=e.done,d=Object(r.useState)(!0),p=Object(u.a)(d,2),b=p[0],E=p[1],v=Object(r.useState)(["\uc804\uccb4","\uc18c\uc124","IT","\uacbd\uc81c","\uad50\uc591","\uc790\uae30\uacc4\ubc1c","\uacfc\ud559","\uc5ed\uc0ac","\uc815\uce58","\uae30\ud0c0"]),f=Object(u.a)(v,2),g=f[0];f[1];return Object(r.useEffect)((function(){return function(){}})),c.a.createElement("section",{className:je("home-content")},c.a.createElement(I,{books:l}),c.a.createElement(Oe,{title:"\ucd5c\uadfc \uacf5\uc720\ub41c \ucc45",books:o.slice(0,15)}),c.a.createElement(Oe,{title:"\ud3c9\uc810 \uc88b\uc740 \ucc45",books:i}),c.a.createElement("section",{className:je("books-wrapper")},c.a.createElement("section",{className:je("book-category-section")},c.a.createElement("div",{className:je(["book-category-div","".concat(b?"hide":"more")])},c.a.createElement("ul",{className:je("book-category-ul")},b?g.slice(0,7).map((function(e){return c.a.createElement("li",{key:Object(C.a)(),className:je("book-category-li","".concat(s===e?"selected":"")),onClick:a,"data-value":e},e)})):g.map((function(e){return c.a.createElement("li",{key:Object(C.a)(),className:je("book-category-li","".concat(s===e?"selected":"")),onClick:a,"data-value":e},e)})))),c.a.createElement("div",{className:je("more-container"),onClick:function(){E((function(e){return!e}))}},b?"\ub354 \ubcf4\uae30":"\uc228\uae30\uae30",c.a.createElement(ve.a,{className:je("more"),icon:b?fe.a:fe.b}))),c.a.createElement(pe,{booklist:t,handleMore:n,from:"home",type:s,done:m})))},ke=a(89),Se=function(e){var t=e.title,a=e.keywords,n=e.description;return c.a.createElement(ke.a,null,n&&c.a.createElement("meta",{name:"description",content:n}),a&&c.a.createElement("meta",{name:"keywords",content:a}),c.a.createElement("title",null,t),c.a.createElement("meta",{property:"og:title",content:t}),c.a.createElement("meta",{name:"twitter:title",content:t}))},_e=a(20);V.a.config();var Ne="https://happread.herokuapp.com/";console.log(Ne);var we=function(e,t){return A.a.get("".concat(Ne,"books/type/").concat(decodeURI(e),"?page=").concat(t))},ye=function(e,t,a){return A.a.get("".concat(Ne,"book/search?q=").concat(decodeURI(e),"&type=",0))},Ce=function(e){return A.a.get("".concat(Ne,"book/").concat(e))},Re=function(e,t,a){return A.a.post("".concat(Ne,"book/").concat(e),{vote:a,name:t})},Ie=function(e){var t=e._id,a=e.title,n=e.contents,r=e.genres;return A.a.put("".concat(Ne,"book/").concat(t),{title:a,contents:n,genres:r})},Le=function(e,t){return{type:"GET_BOOKS",payload:we(e,t)}},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ";arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"GET_SEARCH_BOOKS",payload:ye(e)}},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"GET_MORE_BOOKS",payload:ye(e)}},Ue=function(e){return{type:"GET_DETAIL",payload:Ce(e)}},De=Object(B.a)((M={},Object(x.a)(M,"GET_SLIDER_BOOKS_PENDING",(function(e,t){return Object(O.a)({},e,{sliderPending:!0,sliderError:!1,sliderSuccess:!1})})),Object(x.a)(M,"GET_SLIDER_BOOKS_SUCCESS",(function(e,t){var a=t.payload.data.books;return Object(O.a)({},e,{sliderBooks:a,sliderPending:!1,sliderSuccess:!0})})),Object(x.a)(M,"GET_SLIDER_BOOKS_FAILURE",(function(e,t){return Object(O.a)({},e,{sliderPending:!1,sliderError:!0})})),Object(x.a)(M,"GET_BOOKS_PENDING",(function(e,t){return Object(O.a)({},e,{allBookPending:!0,allBookError:!1,allBookSuccess:!1,allBookDone:!1})})),Object(x.a)(M,"GET_BOOKS_SUCCESS",(function(e,t){var a=t.payload.data,n=a.books,r=a.page;return Object(O.a)({},e,{allBookPending:!1,allBookSuccess:!0,allBookDone:n.length<15,books:void 0===e.books||1===parseInt(r,10)?n:[].concat(Object(_e.a)(e.books),Object(_e.a)(n))})})),Object(x.a)(M,"GET_BOOKS_FAILURE",(function(e,t){return Object(O.a)({},e,{allBookPending:!1,allBookError:!0})})),Object(x.a)(M,"GET_SEARCH_BOOKS_PENDING",(function(e,t){return Object(O.a)({},e,{books:[],searchPending:!0,searchSuccess:!1,searchFailure:!1})})),Object(x.a)(M,"GET_SEARCH_BOOKS_SUCCESS",(function(e,t){var a=t.payload.data.books;return Object(O.a)({},e,{searchPending:!1,searchSuccess:!0,books:a})})),Object(x.a)(M,"GET_SEARCH_BOOKS_FAILURE",(function(e,t){return Object(O.a)({},e,{searchPending:!1,searchFailure:!0})})),Object(x.a)(M,"GET_MORE_BOOKS_PENDING",(function(e,t){return Object(O.a)({},e,{morePending:!0,moreError:!1})})),Object(x.a)(M,"GET_MORE_BOOKS_SUCCESS",(function(e,t){var a=t.payload.data.documents;return Object(O.a)({},e,{morePending:!1,moreError:!1,books:[].concat(Object(_e.a)(e.books),Object(_e.a)(a))})})),Object(x.a)(M,"GET_MORE_BOOKS_FAILURE",(function(e,t){return Object(O.a)({},e,{morePending:!1,moreError:!0})})),Object(x.a)(M,"POST_RATE_PENDING",(function(e,t){return Object(O.a)({},e,{vote_pending:!0,vote_error:!1,vote_success:!1})})),Object(x.a)(M,"POST_RATE_SUCCESS",(function(e,t){var a=t.payload.data.book;return Object(O.a)({},e,{vote_pending:!1,vote_error:!1,vote_success:!0,book:a})})),Object(x.a)(M,"POST_RATE_FAILURE",(function(e,t){return Object(O.a)({},e,{vote_pending:!1,vote_error:!0,vote_success:!1})})),Object(x.a)(M,"GET_DETAIL_PENDING",(function(e,t){return Object(O.a)({},e,{bookPending:!0,bookError:!1})})),Object(x.a)(M,"GET_DETAIL_SUCCESS",(function(e,t){var a=t.payload.data.book;return Object(O.a)({},e,{bookPending:!1,bookSuccess:!0,book:a,votes:a.votes})})),Object(x.a)(M,"GET_DETAIL_FAILURE",(function(e,t){return Object(O.a)({},e,{bookPending:!1,bookError:!0})})),Object(x.a)(M,"GET_RECENT_BOOKS_PENDING",(function(e,t){return Object(O.a)({},e,{recentPending:!0,recentError:!1,recentSuccess:!1})})),Object(x.a)(M,"GET_RECENT_BOOKS_SUCCESS",(function(e,t){var a=t.payload.data;return Object(O.a)({},e,{recentBooks:a,recentPending:!1,recentSuccess:!0})})),Object(x.a)(M,"GET_RECENT_BOOKS_FAILURE",(function(e,t){return Object(O.a)({},e,{recentPending:!0,recentError:!0})})),Object(x.a)(M,"GET_POPULAR_BOOKS_PENDING",(function(e,t){return Object(O.a)({},e,{popularPending:!0,popularError:!1,popularSuccess:!1})})),Object(x.a)(M,"GET_POPULAR_BOOKS_SUCCESS",(function(e,t){var a=t.payload.data;return Object(O.a)({},e,{popularBooks:a,popularPending:!1,popularSuccess:!0})})),Object(x.a)(M,"GET_POPULAR_BOOKS_FAILURE",(function(e,t){return Object(O.a)({},e,{popularPending:!0,popularError:!0})})),Object(x.a)(M,"EDIT_BOOK_PENDING",(function(e,t){return Object(O.a)({},e,{editBookPending:!0,editBookSuccess:!1,editBookFailure:!1})})),Object(x.a)(M,"EDIT_BOOK_SUCCESS",(function(e,t){return Object(O.a)({},e,{editBookPending:!1,editBookSuccess:!0})})),Object(x.a)(M,"EDIT_BOOK_FAILURE",(function(e,t){return Object(O.a)({},e,{editBookPending:!1,editBookFailure:!0})})),M),{allBookPending:!1,allBookSuccess:!1,allBookError:!1,allBookDone:!1,books:[],morePending:!1,moreError:"",sliderBooks:[],sliderPending:!1,sliderError:!1,sliderSuccess:!1,total:0,vote_pending:!1,vote_error:!1,vote_success:!1,term:"",book:{},bookPending:!1,bookSuccess:!1,bookFailure:!1,recentBooks:[],recentPending:!1,recentError:!1,recentSuccess:!1,popularBooks:[],popularPending:!1,popularError:!1,popularSuccess:!1,editBookPending:!1,editBookSuccess:!1,editBookFailure:!1,searchPending:!1,searchSuccess:!1,searchFailure:!1}),Ge=a(92),xe=a.n(Ge),Be=b.a.bind(xe.a),Fe=function(){return c.a.createElement("section",{className:Be("loading")},c.a.createElement(me.ChasingDots,{color:"white",size:60}))},Ae=function(){var e=Object(r.useState)(!0),t=Object(u.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)("\uc804\uccb4"),o=Object(u.a)(l,2),i=o[0],s=o[1],m=Object(r.useState)(1),d=Object(u.a)(m,2),p=d[0],b=d[1],E=Object(G.c)(),f=Object(G.d)((function(e){return e.books})),g=f.allBookDone,O=f.sliderPending,j=f.recentPending,h=f.popularPending,k=f.books,S=f.sliderBooks,_=f.recentBooks,N=f.popularBooks;Object(r.useEffect)((function(){n(!0),E(Le("\uc804\uccb4",1)),E({type:"GET_SLIDER_BOOKS",payload:A.a.get("".concat(Ne,"book/sliders"))}),E({type:"GET_RECENT_BOOKS",payload:A.a.get("".concat(Ne,"books/recent"))}),E({type:"GET_POPULAR_BOOKS",payload:A.a.get("".concat(Ne,"books/popular"))}),n(!1)}),[E]);var w=Object(r.useCallback)((function(e){var t=e.target.dataset;s(t.value)}),[s]),y=Object(r.useCallback)((function(){g||(E(Le("\uc804\uccb4",p+1)),b(p+1))}),[E,p,g]);return c.a.createElement("main",null,c.a.createElement(Se,{title:"Home | HappReads",description:"\ucc45\ub4e4\uc744 \uacf5\uc720 \uadf8\ub9ac\uace0 \ub9ac\ubdf0\ud558\uba70 \uc77d\uc5b4\ubcf4\uc9c0 \ubabb\ud55c \uc0c8\ub85c\uc6b4 \ucc45\uc744 \ubc1c\uacac\ud558\uc138\uc694!!",keywords:"\ucc45, \ucc45 \uacf5\uc720, \ucc45 \ub9ac\ubdf0, HappReads, happreads"}),a||O||j||h?c.a.createElement(Fe,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(v,null),c.a.createElement(he,{booklist:k,sliderBooks:S,recentBooks:_,popularBooks:N,handleClick:w,handleMore:y,done:g,type:i,page:p})))},He=a(48),Ve=a.n(He),Me=a(93),Ke=a.n(Me),We=b.a.bind(Ke.a),Ye=function(e){var t=e.type;return c.a.createElement("div",{className:We("social-login")},c.a.createElement("h2",null,"login"===t?"\ub85c\uadf8\uc778":"\ud68c\uc6d0\uac00\uc785"),c.a.createElement("button",{className:We("github","button")},c.a.createElement("span",{className:We("icon")},c.a.createElement(D.d,null)),c.a.createElement("span",null,"Github\uc73c\ub85c \uc2dc\uc791\ud558\uae30")))},qe=b.a.bind(Ve.a),ze=function(e){var t=e.loginRequest,a=(e.login_success,e.login_pending,Object(r.useState)("")),n=Object(u.a)(a,2),l=n[0],o=n[1],s=Object(r.useState)(""),m=Object(u.a)(s,2),d=m[0],p=m[1],b=Object(r.useCallback)((function(e){e.preventDefault(),t(l,d)}),[l,d,t]),E=Object(r.useCallback)((function(e){o(e.target.value)}),[]),v=Object(r.useCallback)((function(e){p(e.target.value)}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:qe("login-form","form-container")},c.a.createElement(Ye,{type:"login"}),c.a.createElement("form",{onSubmit:b},c.a.createElement("input",{type:"email",value:l,onChange:E,placeholder:"\uc774\uba54\uc77c",required:!0}),c.a.createElement("input",{type:"password",value:d,onChange:v,placeholder:"\ube44\ubc00\ubc88\ud638",required:!0}),c.a.createElement("input",{type:"submit",value:"\ub85c\uadf8\uc778"})),c.a.createElement(i.b,{to:"/signup"},c.a.createElement("button",null,"\uac00\uc785"))))},Je=a(94),Xe=a.n(Je),Qe=b.a.bind(Xe.a),Ze=function(e){var t=e.type,a=e.children;return c.a.createElement("div",{className:Qe(["notice-container",t])},a)};V.a.config();var $e,et=function(){var e=Object(G.d)((function(e){return e.login})),t=e.isLoggedIn,a=e.loginPending,n=e.loginSuccess,r=e.loginError,l=Object(G.c)(),o=function(){var e=Object(ne.a)(ae.a.mark((function e(t,a){var n,r,c;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l({type:"LOGIN",payload:K(t,a)});case 3:n=e.sent,r=n.value,c=r.data,200===r.status&&(o=c.token,localStorage.setItem("atk",o)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}var o}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}();return!0===t?c.a.createElement(s.a,{to:"/"}):c.a.createElement(c.a.Fragment,null,c.a.createElement(Se,{title:"Login | HappReads"}),r&&c.a.createElement(Ze,{type:"error"},"\ub4f1\ub85d\ub418\uc9c0 \uc54a\uc740 \uc774\uba54\uc77c \ud639\uc740 \ube44\ubc00\ubc88\ud638\uac00 \ud2c0\ub838\uc2b5\ub2c8\ub2e4"),c.a.createElement(ze,{loginRequest:o,login_pending:a,login_success:n}))},tt=b.a.bind(Ve.a),at=function(e){var t=e.handleSignUp,a=Object(r.useState)(""),n=Object(u.a)(a,2),l=n[0],o=n[1],i=Object(r.useState)({p1:"",p2:""}),s=Object(u.a)(i,2),m=s[0],d=s[1],p=Object(r.useCallback)((function(e){var t=e.target;o(t.value)}),[]),b=Object(r.useCallback)((function(e){var t=e.target;d(Object(O.a)({},m,{p1:t.value}))}),[m]),E=Object(r.useCallback)((function(e){var t=e.target;d(Object(O.a)({},m,{p2:t.value}))}),[m]);return c.a.createElement("section",{className:tt("signup-form","form-container")},c.a.createElement(Ye,{type:"signup"}),c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=m.p1;a===m.p2&&t(l,a)}},c.a.createElement("input",{type:"email",value:l,onChange:p,placeholder:"\uc774\uba54\uc77c",required:!0}),c.a.createElement("input",{type:"password",value:m.p1,onChange:b,placeholder:"\ube44\ubc00\ubc88\ud638",required:!0}),c.a.createElement("input",{type:"password",value:m.p2,onChange:E,placeholder:"\ube44\ubc00\ubc88\ud638 \uc7ac\uc785\ub825",required:!0}),c.a.createElement("input",{type:"submit",value:"\uac00\uc785"})))};V.a.config(),A.a.defaults.baseURL="https://happread.herokuapp.com/";var nt=function(e,t){return A.a.post("signup",{email:e,password:t})},rt=function(e,t){return{type:"SIGNUP",payload:nt(e,t)}},ct=Object(B.a)(($e={},Object(x.a)($e,"SIGNUP_PENDING",(function(e,t){return{signup_pending:!0,signup_success:!1,signup_error:!1}})),Object(x.a)($e,"SIGNUP_SUCCESS",(function(e,t){return{signup_pending:!1,signup_success:!0}})),Object(x.a)($e,"SIGNUP_FAILURE",(function(e,t){return{signup_pending:!1,signup_error:!0}})),$e),{signup_pending:!1,signup_success:!1,signup_error:!1});V.a.config();var lt=function(e){var t=e.history,a=Object(G.c)(),n=Object(G.d)((function(e){return e.signup})),r=n.signup_pending,l=n.signup_success,o=n.signup_error,i=Object(G.d)((function(e){return e.login})).isLoggedIn,u=function(){var e=Object(ne.a)(ae.a.mark((function e(t,n){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(rt(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return i?c.a.createElement(s.a,{to:"/HappReads-front"}):l?c.a.createElement(s.a,{to:"/login"}):c.a.createElement(c.a.Fragment,null,c.a.createElement(Se,{title:"SignUp | HappReads"}),c.a.createElement(at,{history:t,handleSignUp:u,signup_pending:r,signup_success:l,signup_error:o}))},ot=a(95),it=a.n(ot),st=a(96),ut=a.n(st),mt=function(){return localStorage.getItem("atk")},dt=function(e){if(e){var t=0;if(e.length>0){for(var a=0;a<e.length;a++)t+=parseInt(e[a].vote);return(t/e.length).toFixed(2)}return 0}return 0};V.a.config();var pt,bt=b.a.bind(ut.a),Et=function(e){var t,a,n=e.profile,l=e.isOpen,o=e.handleClose,i=Object(G.c)(),s=Object(r.useState)({seletedImg:null,avatarUrl:n?n.avatarUrl:void 0,nickname:n?n.name:"",website:n?n.website:"",intro:n?n.intro:"",interest:n?n.interest:""}),m=Object(u.a)(s,2),d=m[0],p=m[1],b=function(){var e=Object(ne.a)(ae.a.mark((function e(){var t,a,r,c,l,o,s;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.seletedImg,a=d.nickname,r=d.website,c=d.interest,l=d.intro,(o=new FormData).append("avatar",t),o.append("email",n.email),o.append("nickname",a),o.append("website",r),o.append("interest",c),o.append("intro",l),e.prev=8,e.next=11,i({type:"EDIT_PROFILE",payload:J(o)});case 11:s=e.sent,200===s.value.status&&(window.location.href="".concat("/HappReads-front/#/me")),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(){return e.apply(this,arguments)}}(),E=Object(r.useCallback)((function(e){var t=e.target.files;p(Object(O.a)({},d,{seletedImg:t[0]})),function(e){var t=URL.createObjectURL(e);document.querySelector(".preview-img").src=t}(t[0])}),[d,p]),v=Object(r.useCallback)((function(e){var t=e.target;p(Object(O.a)({},d,{nickname:t.value}))}),[d,p]),f=Object(r.useCallback)((function(e){var t=e.target;p(Object(O.a)({},d,{website:t.value}))}),[d,p]),g=Object(r.useCallback)((function(e){var t=e.target;p(Object(O.a)({},d,{interest:t.value}))}),[d,p]),j=Object(r.useCallback)((function(e){var t=e.target;p(Object(O.a)({},d,{intro:t.value}))}),[d,p]);return c.a.createElement("section",{className:bt("user-edit",l?"close":"open")},c.a.createElement("div",{className:bt("x-button")},c.a.createElement("p",{onClick:o},c.a.createElement("span",{role:"img","aria-label":"close"},"\u274c"))),c.a.createElement("section",{className:bt("form-container")},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),alert(e.target.dataset),b()}},c.a.createElement("div",{className:bt("upload-btn-wrapper")},c.a.createElement("img",{className:bt("preview-img"),alt:"\uc0ac\uc6a9\uc790 \uc774\ubbf8\uc9c0",src:(a=null===d||void 0===d?void 0:d.avatarUrl,void 0===a?"https://wetuberbucket.s3.ap-northeast-2.amazonaws.com/avatars/58c11a401956bab841de5f227c337c43":a)}),c.a.createElement("div",{style:{position:"relative"}},c.a.createElement("button",{className:bt("btn")},void 0===(null===d||void 0===d?void 0:null===(t=d.seletedImg)||void 0===t?void 0:t.name)?"\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc":d.seletedImg.name),c.a.createElement("input",{type:"file",name:"avatar",onChange:E}))),c.a.createElement("input",{type:"text",name:"nickname",value:null===d||void 0===d?void 0:d.nickname,placeholder:"\ub2c9\ub124\uc784",onChange:v}),c.a.createElement("input",{type:"email",name:"website",placeholder:"\uc6f9 \uc0ac\uc774\ud2b8 ex) http://www.example.com",value:null===d||void 0===d?void 0:d.website,onChange:f}),c.a.createElement("input",{type:"text",name:"interest",placeholder:"\ucde8\ubbf8",value:null===d||void 0===d?void 0:d.interest,onChange:g}),c.a.createElement("textarea",{name:"intro",placeholder:"\uc18c\uac1c",value:null===d||void 0===d?void 0:d.intro,onChange:j}),c.a.createElement("input",{type:"submit",value:"\uc218\uc815"}),c.a.createElement("button",{onClick:o,"data-value":"cancel"},"\ucde8\uc18c"))))},vt=a(97),ft=a.n(vt),gt=a(24),Ot=a.n(gt);V.a.config(),A.a.defaults.baseURL="https://happread.herokuapp.com/";var jt,ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return A.a.get("reviews?limit=".concat(e,"&page=").concat(t))},kt=function(e,t,a,n){return A.a.post("book/".concat(e,"/review"),{name:t,content:a,book:n})},St=function(e,t){return A.a.post("book/review/".concat(e),{content:t})},_t=function(e,t,a){return A.a.post("review/like",{type:e,id:t,uid:a})},Nt=function(e){return{type:"GET_REVIEWS",payload:ht(e.limit,e.page)}},wt=function(e){return{type:"GET_REVIEW",payload:(t=e,A.a.get("book/".concat(t,"/review")))};var t},yt=function(e,t,a,n){return{type:"POST_REVIEW",payload:kt(e,t,a,n)}},Ct=function(e,t){return{type:"EDIT_REVIEW",payload:St(e,t)}},Rt=function(e,t,a){return{type:"LIKE_REVIEW",payload:_t(e,t,a)}},It=Object(B.a)((pt={},Object(x.a)(pt,"GET_REVIEWS_PENDING",(function(e,t){return Object(O.a)({},e,{loadReviewsPending:!0,loadReviewsError:!1,loadReviewsSuccess:!1,loadReviewsDone:!1})})),Object(x.a)(pt,"GET_REVIEWS_SUCCESS",(function(e,t){var a=t.payload.data,n=a.reviews,r=a.page,c=a.hasMore;return Object(O.a)({},e,{reviews:1!==parseInt(r)?[].concat(Object(_e.a)(e.reviews),Object(_e.a)(n)):Object(_e.a)(n),loadReviewsPending:!1,loadReviewsSuccess:!0,hasMore:c})})),Object(x.a)(pt,"GET_REVIEWS_FAILURE",(function(e,t){return Object(O.a)({},e,{loadReviewsPending:!1,loadReviewsError:!0,loadReviewsDone:!1})})),Object(x.a)(pt,"POST_REVIEW_PENDING",(function(e,t){return Object(O.a)({},e,{postReviewPending:!0,postReviewSuccess:!1,postReviewError:!1})})),Object(x.a)(pt,"POST_REVIEW_SUCCESS",(function(e,t){return Object(O.a)({},e,{reviews:t.payload.data.reviews,postReviewPending:!1,postReviewSuccess:!0})})),Object(x.a)(pt,"POST_REVIEW_FAILURE",(function(e,t){return Object(O.a)({},e,{postReviewPending:!1,postReviewError:!0})})),Object(x.a)(pt,"GET_REVIEW_PENDING",(function(e,t){return Object(O.a)({},e,{error:!1,pending:!0,success:!1})})),Object(x.a)(pt,"GET_REVIEW_SUCCESS",(function(e,t){return{reviews:t.payload.data.reviews,error:!1,pending:!1,success:!0}})),Object(x.a)(pt,"GET_REVIEW_FAILURE",(function(e,t){return{error:!0,pending:!1,success:!1}})),Object(x.a)(pt,"EDIT_REVIEW_PENDING",(function(e,t){return Object(O.a)({},e,{pending:!0,error:!1,success:!1})})),Object(x.a)(pt,"EDIT_REVIEW_SUCCESS",(function(e,t){return Object(O.a)({},e,{reviews:t.payload.data.reviews,pending:!1,error:!1,success:!0})})),Object(x.a)(pt,"EDIT_REVIEW_FAILURE",(function(e,t){return Object(O.a)({},e,{pending:!1,error:!0,success:!1})})),Object(x.a)(pt,"LIKE_REVIEW_PENDING",(function(e,t){return Object(O.a)({},e,{pending:!0,error:!1})})),Object(x.a)(pt,"LIKE_REVIEW_SUCCESS",(function(e,t){var a=t.payload.data.review,n=-1;e.reviews.forEach((function(e,t){e._id===a._id&&(n=t)})),e.reviews[n]=a;var r=e.reviews;return Object(O.a)({},e,{pending:!1,error:!1,success:!0,reviews:Object(_e.a)(r)})})),Object(x.a)(pt,"LIKE_REVIEW_FAILURE",(function(e,t){return Object(O.a)({},e,{pending:!1,error:!0})})),pt),{reviews:[],pending:!1,success:!1,error:!1,loadReviewsPending:!1,loadReviewsError:!1,loadReviewsSuccess:!1,loadReviewsDone:!1,hasMore:!1,postReviewPending:!1,postReviewSuccess:!1,postReviewError:!1});V.a.config(),A.a.defaults.baseURL="https://happread.herokuapp.com/";var Lt,Pt=function(e){return A.a.get("profile/".concat(e))},Tt=function(e){return{type:"GET_USER",payload:Pt(e)}},Ut=Object(B.a)((jt={},Object(x.a)(jt,"GET_USER_PENDING",(function(e,t){return Object(O.a)({},e,{pending:!0,error:!1})})),Object(x.a)(jt,"GET_USER_SUCCESS",(function(e,t){return{pending:!1,error:!1,profile:t.payload.data.user}})),Object(x.a)(jt,"GET_USER_FAILURE",(function(e,t){return Object(O.a)({},e,{pending:!1,error:!0})})),Object(x.a)(jt,"GET_TOP_READERS_PENDING",(function(e,t){return Object(O.a)({},e,{pending:!0,error:!1})})),Object(x.a)(jt,"GET_TOP_READERS_SUCCESS",(function(e,t){var a=t.payload.data.readers;return Object(O.a)({},e,{topReaders:a,pending:!1,error:!1})})),Object(x.a)(jt,"GET_TOP_READERS_FAILURE",(function(e,t){return Object(O.a)({},e,{pending:!1,error:!0})})),Object(x.a)(jt,"GET_TOP_REVIEWERS_PENDING",(function(e,t){return Object(O.a)({},e,{pending:!0,error:!1})})),Object(x.a)(jt,"GET_TOP_REVIEWERS_SUCCESS",(function(e,t){var a=t.payload.data.reviewers;return Object(O.a)({},e,{topReviewers:a,pending:!1,error:!1})})),Object(x.a)(jt,"GET_TOP_REVIEWERS_FAILURE",(function(e,t){return Object(O.a)({},e,{pending:!1,error:!0})})),jt),{pending:!1,error:!1,profile:{},topReaders:[],topReviewers:[]}),Dt=a(98),Gt=a.n(Dt),xt=b.a.bind(Gt.a),Bt=function(e){var t=e.review,a=e.handleClose,n=Object(r.useState)((null===t||void 0===t?void 0:t.content)||""),l=Object(u.a)(n,2),o=l[0],i=l[1],s=Object(G.c)(),m=Object(G.d)((function(e){return e.login})).isLoggedIn,d=Object(r.useCallback)(Object(ne.a)(ae.a.mark((function e(){var t;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=mt())try{s(X(t))}catch(a){console.log(a)}case 2:case"end":return e.stop()}}),e)}))),[s]),p=Object(r.useCallback)(function(){var e=Object(ne.a)(ae.a.mark((function e(t,a){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(Ct(t,a));case 3:n=e.sent,200===n.value.status&&d(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}(),[d,s]),b=Object(r.useCallback)((function(e){e.preventDefault(),m&&p(t._id,o)}),[o,m,t,p]);return c.a.createElement("section",{className:xt(["review-modal","modal-container"])},c.a.createElement("section",{className:"modal-overlay"},c.a.createElement("div",{className:"modal"},c.a.createElement("div",{className:xt("form-container")},c.a.createElement("img",{src:void 0!==t.book?t.book.thumbnail:"",alt:void 0!==t.book?t.book.title:""}),c.a.createElement("form",{onSubmit:b},c.a.createElement("textarea",{value:o,onChange:function(e){var t=e.target;i(t.value)}},o),c.a.createElement("input",{type:"submit",value:"\uc218\uc815"}),c.a.createElement("button",{className:xt("cancel"),onClick:a},"\ucde8\uc18c"))))))},Ft=b.a.bind(ft.a),At=function(e){var t=e.profile,a=e.isMe,n=Object(r.useState)(null),l=Object(u.a)(n,2),o=l[0],s=l[1],m=Object(r.useState)(!1),d=Object(u.a)(m,2),p=d[0],b=d[1],E=Object(G.c)(),v=Object(G.d)((function(e){return e.login})),f=v.profile,g=v.pending,O=v.isLoggedIn,j=Object(r.useCallback)((function(){if(a){var e=mt();e&&E(X(e))}else E(Tt(t._id))}),[E,a,t]),h=function(e){var t=e.currentTarget,a=t.getAttribute("data-bid"),n=t.getAttribute("data-value"),r=f.user._id;k(a,n,r)},k=function(){var e=Object(ne.a)(ae.a.mark((function e(t,a,n){var r;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E($(t,a,n));case 3:r=e.sent,200===r.value.status&&j(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),S=Object(r.useCallback)(function(){var e=Object(ne.a)(ae.a.mark((function e(a,n){var r,c;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(Rt(a,n,t._id,f.user._id));case 3:r=e.sent,200===(c=r.value.status)&&(console.log(c),j()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}(),[E,f,t,j]),_=Object(r.useCallback)((function(e){return function(t){O?S("like",e):alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4")}}),[S,O]),N=Object(r.useCallback)((function(e){return function(t){b(!0),s(e)}}),[]),w=Object(r.useCallback)((function(){b(!1),s(null)}),[]),y=function(e){var t,a=e.review,n=e.handleLike,r=e.handleDelete,l=e.handleEdit,o=e.mid,s=e.uid;return c.a.createElement("section",{className:Ft("review-container"),id:a._id,key:Object(C.a)()},c.a.createElement("div",null,c.a.createElement(i.b,{to:"/book/".concat(null===(t=a.book)||void 0===t?void 0:t._id)},c.a.createElement("img",{src:void 0!==a.book?a.book.thumbnail:"",alt:void 0!==a.book?a.book.title:""}))),c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("p",{className:Ft("review-book")},void 0!==a.book?a.book.title:""),c.a.createElement("p",{className:Ft("review-text")},void 0!==a.book?a.content:""),c.a.createElement("p",{className:Ft("review-date")},Ot()(a.createdAt).format("YYYY\ub144 MM\uc6d4 DD\uc77c HH:MM:SS")),c.a.createElement("p",{className:Ft("like-container")},c.a.createElement("span",{className:Ft("review-like")},a.likes.length," likes"),c.a.createElement("span",{className:Ft("likebtn"),onClick:n(a._id)},c.a.createElement(D.e,null))))),s===o?c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:Ft("review-edit"),"data-value":a._id,onClick:l(a)},c.a.createElement(D.c,null)),c.a.createElement("span",{className:Ft("review-remove"),"data-value":a._id,"data-bid":a.book._id,onClick:r},c.a.createElement(D.k,null))):null)};return c.a.createElement("div",{className:Ft("user-review")},!1===g&&t&&t.reviews&&t.reviews.map((function(e){return c.a.createElement(y,{review:e,handleLike:_,handleDelete:h,handleEdit:N,mid:f.user._id,uid:t._id})})),p&&c.a.createElement(Bt,{review:o,handleClose:w}))},Ht=b.a.bind(it.a),Vt=function(e){var t,a,n,l,o,s,m,d,p=e.profile,b=e.from,E=e.type,v=Object(r.useState)(!1),f=Object(u.a)(v,2),g=f[0],O=f[1],j=Object(r.useState)(0),h=Object(u.a)(j,2),k=h[0],S=h[1],_=Object(r.useState)("/me"===b),N=Object(u.a)(_,2),w=N[0],y=N[1],R=Object(r.useCallback)((function(){O(!0)}),[]),I=Object(r.useCallback)((function(e){e.preventDefault(),O(!1)}),[]),L=Object(r.useCallback)((function(e){return function(t){S(e)}}),[]);Object(r.useEffect)((function(){return E.includes("?type=reviews")&&S(1),y("/me"===b),function(){}}),[b,E]);var P=function(e){var t,a,n,r,l,o,s=e.from,u=e.profile,m=e.type;return"uploaded"!==m?"/me"===s?u&&(null===(t=u[m])||void 0===t?void 0:t.length)>0?c.a.createElement("div",null,c.a.createElement(pe,{booklist:u[m],from:"profile",type:m})):c.a.createElement("p",{className:Ht("recent-empty")},"\ucd5c\uadfc \uc544\ubb34 \ud65c\ub3d9\ub3c4 \uc5c6\uc2b5\ub2c8\ub2e4."):u&&(null===(a=u[m])||void 0===a?void 0:a.length)>0?c.a.createElement("div",null,c.a.createElement(pe,{booklist:u[m],from:"profile"})):c.a.createElement("p",{className:Ht("recent-empty")},"\ucd5c\uadfc \uc544\ubb34 \ud65c\ub3d9\ub3c4 \uc5c6\uc2b5\ub2c8\ub2e4."):"/me"===s?u&&(null===u||void 0===u?void 0:null===(n=u.uploaded)||void 0===n?void 0:n.length)>0?c.a.createElement("div",{className:Ht("uploaded-list")},null===u||void 0===u?void 0:null===(r=u.uploaded)||void 0===r?void 0:r.map((function(e){return c.a.createElement("div",{className:Ht("uploaded-img-wrapper"),key:Object(C.a)()},c.a.createElement("img",{className:Ht("uploaded-img"),src:e.thumbnail,alt:e.thumbnail}),c.a.createElement("div",{className:Ht("to-detail")},c.a.createElement(i.b,{to:"/book/".concat(e._id)},e.title)))}))):c.a.createElement("p",{className:Ht("recent-empty")},"\ucd5c\uadfc \uc544\ubb34 \ud65c\ub3d9\ub3c4 \uc5c6\uc2b5\ub2c8\ub2e4."):u&&(null===u||void 0===u?void 0:null===(l=u.uploaded)||void 0===l?void 0:l.length)>0?c.a.createElement("div",{className:Ht("uploaded-list")},null===u||void 0===u?void 0:null===(o=u.uploaded)||void 0===o?void 0:o.map((function(e){return c.a.createElement("div",{className:Ht("uploaded-img-wrapper"),key:Object(C.a)()},c.a.createElement("img",{className:Ht("uploaded-img"),src:e.thumbnail,alt:e.thumbnail}),c.a.createElement("div",{className:Ht("to-detail")},c.a.createElement(i.b,{to:"/book/".concat(e._id)},"\uc0c1\uc138 \ud398\uc774\uc9c0")))}))):c.a.createElement("p",{className:Ht("recent-empty")},"\ucd5c\uadfc \uc544\ubb34 \ud65c\ub3d9\ub3c4 \uc5c6\uc2b5\ub2c8\ub2e4.")};return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:Ht("user-profile")},c.a.createElement("section",{className:Ht("profile-wrapper")},c.a.createElement("div",{className:Ht("info")},c.a.createElement("img",{src:p&&void 0!==p?p.avatarUrl:"",alt:p&&void 0!==p?p.email:""}),c.a.createElement("h1",null,p&&void 0!==p?p.email:""),c.a.createElement("div",{className:Ht("profile-edit")},"/me"===b?c.a.createElement("p",{to:"/edit",onClick:R},"\ud504\ub85c\ud544 \uc218\uc815"):null),c.a.createElement("div",{className:Ht("rate-review")},c.a.createElement("p",null,p&&void 0!==p?null===p||void 0===p?void 0:null===(t=p.votes)||void 0===t?void 0:t.length:0,"\ud3c9\uac00"),c.a.createElement("p",null,p&&void 0!==p?null===p||void 0===p?void 0:null===(a=p.reviews)||void 0===a?void 0:a.length:0,"\ub9ac\ubdf0")),c.a.createElement("p",{className:Ht("intro")},p&&void 0!==p?null===p||void 0===p?void 0:p.intro:0))),c.a.createElement("section",null,c.a.createElement("ul",{className:Ht("catalog-list")},c.a.createElement("li",{className:0===k?Ht("active"):"",onClick:L(0)},c.a.createElement(i.c,{to:"/me"},"\ucc45")),c.a.createElement("li",{className:1===k?Ht("active"):"",onClick:L(1)},c.a.createElement(i.c,{to:"/me?type=reviews"},"\ub9ac\ubdf0"))),0===k&&c.a.createElement("section",null,c.a.createElement("section",{className:Ht("uploaded")},c.a.createElement("div",{className:Ht("uploaded-head")},"/me"===b?c.a.createElement(i.b,{to:p&&void 0!==p?"shelve/".concat(null===p||void 0===p?void 0:p._id):"/"},c.a.createElement("h2",null,"\uc5c5\ub85c\ub4dc \ud55c \ucc45")):c.a.createElement("h2",null,"\uc5c5\ub85c\ub4dc \ud55c \ucc45")),c.a.createElement("div",{className:Ht("uploaded-body"),style:{marginLeft:"5px",marginTop:"5px"}},c.a.createElement(P,{from:b,profile:p,type:"uploaded"}))),c.a.createElement("section",{className:Ht("want-read")},c.a.createElement("div",{className:Ht("want-read-head")},"/me"===b?c.a.createElement("h2",null,"\uc77d\uc744 \ucc45 (",p&&void 0!==p?null===p||void 0===p?void 0:null===(n=p.want_read)||void 0===n?void 0:n.length:0,")"):c.a.createElement("h2",null,"\uc77d\uc744 \ucc45 (",p&&void 0!==p?null===p||void 0===p?void 0:null===(l=p.want_read)||void 0===l?void 0:l.length:0,")")),c.a.createElement("div",{className:Ht("want-read-body")},c.a.createElement(P,{from:b,profile:p,type:"want_read"})),c.a.createElement("div",null)),c.a.createElement("section",{className:Ht("currently-reading")},c.a.createElement("div",{className:Ht("currently-head")},"/me"===b?c.a.createElement("h2",null,"\ud604\uc7ac \uc77d\uace0 \uc788\ub294 \ucc45 (",p&&void 0!==p?null===p||void 0===p?void 0:null===(o=p.reading)||void 0===o?void 0:o.length:0,")"):c.a.createElement("h2",null,"\ud604\uc7ac \uc77d\uace0 \uc788\ub294 \ucc45 (",p&&void 0!==p?null===p||void 0===p?void 0:null===(s=p.reading)||void 0===s?void 0:s.length:0,")")),c.a.createElement("div",{className:Ht("currently-body")},c.a.createElement(P,{from:b,profile:p,type:"reading"}))),c.a.createElement("section",{className:Ht("read")},c.a.createElement("div",{className:Ht("read-head")},"/me"===b?c.a.createElement("h2",null,"\uc77d\uc740 \ucc45 (",p&&void 0!==p?null===p||void 0===p?void 0:null===(m=p.read)||void 0===m?void 0:m.length:0,")"):c.a.createElement("h2",null,"\uc77d\uc740 \ucc45 (",p&&void 0!==p?null===p||void 0===p?void 0:null===(d=p.read)||void 0===d?void 0:d.length:0,")")),c.a.createElement("div",{className:Ht("read-body")},c.a.createElement(P,{from:b,profile:p,type:"read"})))),1===k&&c.a.createElement("section",null,c.a.createElement("section",{className:Ht("recent-update")},c.a.createElement("div",{className:Ht("recent-head")},c.a.createElement("h2",null,"\ub9ac\ubdf0")),c.a.createElement("div",{className:Ht("recent-body")},p&&void 0!==p?c.a.createElement(At,{key:Object(C.a)(),profile:p,isMe:w}):"\ub9ac\ubdf0 \uc5c6\uc74c"))))),c.a.createElement((function(e){var t=e.isOpen,a=e.handleClose,n=e.profile;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:Ht("modal-overay",t?"open-modal":"close-modal")}),c.a.createElement("div",{className:Ht(t?"open-modal":"close-modal")},c.a.createElement(Et,{handleClose:a,profile:n,isOpen:!t})))}),{isOpen:g,handleClose:I,profile:p}))},Mt=function(e){var t=e.history.location,a=(e.history,Object(r.useState)(!0)),n=Object(u.a)(a,2),l=n[0],o=n[1],i=Object(G.d)((function(e){return e.login})),s=i.isLoggedIn,m=i.profile,d=i.pending,p=Object(G.d)((function(e){return e.user})),b=p.profile,E=p.pending,v=Object(G.c)(),f=Object(r.useCallback)(function(){var e=Object(ne.a)(ae.a.mark((function e(t){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{v(Tt(t))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v]);return Object(r.useEffect)((function(){if(o(!0),"/me"!==t.pathname){var e=t.pathname.substring(1).split("/")[1];f(e)}o(!1)}),[f,t.pathname]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Se,{title:"Profile | HappReads"}),l||d||E?c.a.createElement(Fe,null):c.a.createElement(Vt,{isLoggedIn:s,profile:"/me"===t.pathname?null===m||void 0===m?void 0:m.user:b,from:t.pathname,type:t.search}))},Kt=a(99),Wt=a.n(Kt),Yt=a(116),qt=a(100),zt=a.n(qt),Jt=b.a.bind(zt.a),Xt=["1","2","3","4","5"],Qt={color:"#f1c40f",cursor:"pointer"},Zt=function(e){var t=e.book,a=e.postVote,n=e.votes,l=Object(G.d)((function(e){return e.login})),o=l.isLoggedIn,i=l.profile,s=Object(r.useCallback)(function(){var e=Object(ne.a)(ae.a.mark((function e(n){var r,c;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._id,c=i.user.email,e.next=4,a(r,c,n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,i,a]),u=Object(r.useCallback)((function(e){for(var t=e.target;"svg"!==t.nodeName;)t=t.parentNode;var a=t.dataset.rating;o?s(a):alert("\ub85c\uadf8\uc778 \ud544\uc694\ud55c \uc11c\ube44\uc2a4 \uc785\ub2c8\ub2e4")}),[o,s]);return c.a.createElement("div",{className:Jt("rater")},Xt.map((function(e,t){return c.a.createElement(D.j,{key:t,"data-rating":t+1,onClick:u,style:n>=t+1?Qt:{}})})))},$t=a(101),ea=a.n($t),ta=b.a.bind(ea.a),aa=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(!1),o=Object(u.a)(l,2),s=o[0],m=o[1],d=Object(r.useRef)(null),p=Object(G.c)(),b=Object(G.d)((function(e){return e.login})),E=b.isLoggedIn,v=b.profile,f=Object(G.d)((function(e){return e.review})).reviews,g=Object(G.d)((function(e){return e.books})).book,O=Object(r.useCallback)(Object(ne.a)(ae.a.mark((function e(){var t;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=mt())try{p(X(t))}catch(a){console.log(a)}case 2:case"end":return e.stop()}}),e)}))),[p]),j=Object(r.useCallback)(function(){var e=Object(ne.a)(ae.a.mark((function e(t){var a;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=v.user.email;try{p(yt(g._id,a,t,g)),O()}catch(n){console.log(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[g,O,p,v]),h=Object(r.useCallback)((function(e){var t=e.target;n(t.value)}),[]),k=Object(r.useCallback)((function(e){e.preventDefault(),E?a.length>0&&(j(a),n("")):alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4")}),[E,a,j]),S=Object(r.useCallback)(function(){var e=Object(ne.a)(ae.a.mark((function e(t,a,n){var r,c;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p(Rt(t,a,null===v||void 0===v?void 0:null===(r=v.user)||void 0===r?void 0:r._id));case 3:c=e.sent,200===c.value.status&&(n.style.fill="pink",O()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),[p,v,O]),_=Object(r.useCallback)((function(e){var t=e.currentTarget,a=e.target,n=t.getAttribute("data-value");S("like",n,a)}),[S]),N=Object(r.useCallback)((function(){m((function(e){return!e}))}),[]),w=function(e){var t=e.item;return c.a.createElement("article",{key:Object(C.a)(),className:ta("review-item")},c.a.createElement("div",null,c.a.createElement(i.b,{to:t.reviewer?"/profile/".concat(t.reviewer._id):""},c.a.createElement("img",{className:ta("user-img"),src:t.reviewer?t.reviewer.avatarUrl:"",alt:t.reviewer?t.reviewer.avatarUrl:""}),c.a.createElement("span",{className:ta("user")},t.reviewer?t.reviewer.email:""))),c.a.createElement("span",{className:ta("date")},t.createdAt?Ot()(t.createdAt).format("YYYY\ub144 MM\uc6d4 DD\uc77c HH:MM:SS"):""),c.a.createElement("article",{style:{marginTop:"10px"}},c.a.createElement("p",{className:ta("user-review")},!s&&t.content.length>30?"".concat(t.content.substr(0,30),"..."):t.content),t.content.length>20&&c.a.createElement("p",{className:ta("more"),onClick:N},s?"\uc904\uc774\uae30":"\ub354\ubcf4\uae30")),c.a.createElement("div",{className:ta("review-footer")},c.a.createElement("span",{className:ta("heart"),onClick:_,"data-value":t._id},c.a.createElement(D.e,null)),c.a.createElement("span",null,t.likes.length," \uc88b\uc544\uc694")))};return c.a.createElement("section",{className:ta("review")},c.a.createElement("p",{className:ta("review-title")},"\ub9ac\ubdf0"),c.a.createElement("section",{className:ta("form-container")},c.a.createElement("form",{onSubmit:k},c.a.createElement("textarea",{placeholder:"\ucc45 \ub9ac\ubdf0\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694",onChange:h,value:a,onKeyDown:function(e){var t=e.target,a=e.key;t.style.height="auto",0===t.value.length&&(t.style.height="50px"),"Backspace"!==a&&(t.scrollHeight<=500?t.style.height="".concat(t.scrollHeight,"px"):t.style.height="500px")},maxLength:500}),c.a.createElement("input",{type:"submit",value:"\ub4f1\ub85d",ref:d}))),c.a.createElement("section",{className:ta("review-list-wrapper")},f?f.map((function(e){return c.a.createElement(w,{key:Object(C.a)(),item:e})})):null))},na=a(102),ra=a.n(na),ca=a(28),la=b.a.bind(ra.a),oa=function(e){var t=e.votes,a=Object(r.useRef)(),n=Object(r.useState)(null),l=Object(u.a)(n,2),o=l[0],i=l[1],s=Object(r.useCallback)((function(){for(var e=a.current,n=20,r=20,c=e.width.baseVal.value-n-20,l=e.height.baseVal.value-r-20,o=[],i=function(e){var a=t.filter((function(t){return parseInt(t.vote)===e}));o.push({rate:e,count:a.length})},s=0;s<=5;s++)i(s);var u=Object(ca.d)().range([0,c]).domain([1,2,3,4,5]).paddingInner(.5),m=Object(ca.e)().range([l,0]).domain([0,Object(ca.c)(o,(function(e){return parseInt(e.count)<5?5:Object(ca.c)(o,(function(e){return parseInt(e.count)}))}))]),d=Object(ca.f)(a.current).append("g").attr("class","graph").attr("transform","translate(".concat(n,",").concat(r,")"));d.append("g").attr("class","xaxis").attr("transform","translate(0,130)").transition().duration(500).call(Object(ca.a)(u)),d.append("g").attr("class","yaxis").attr("transform","translate(0,130)").transition().duration(500).call(Object(ca.b)(m));var p=d.append("g").attr("class","rect-container").selectAll("rect").data(o);p.enter().append("rect").attr("height",(function(e){return 0})).attr("width",u.bandwidth()).attr("x",(function(e){return u(e.rate)})).attr("y",l).attr("fill","#f1c40f").transition().duration(500).attr("y",(function(e){return m(e.count)})).attr("height",(function(e){return l-m(e.count)})),p.exit().remove()}),[t]),m=function(){var e=window.innerWidth;i(e<=425?"mobile":e>425&&e<=767?"tablet":"desktop")};return Object(r.useEffect)((function(){if(a.current.innerHTML="",t){if(a.current.hasChildNodes()){var e=document.querySelector(".rect-container");e&&e.remove()}s()}return window.addEventListener("resize",m),m(),function(){window.removeEventListener("resize",m)}}),[t,s,o]),c.a.createElement("section",{className:la("rate-bar")},c.a.createElement("svg",{className:la("svg-container"),ref:a,width:"mobile"===o?"250":"tablet"===o?"300":"400",height:"170"}))},ia=void 0,sa=b.a.bind(Wt.a),ua=[{value:"want_read",label:"\uc77d\uae30"},{value:"reading",label:"\uc77d\ub294\uc911"},{value:"read",label:"\uc77d\uc74c"}],ma=function(e){var t,a,n=e.profile,l=e.votes,o=e.id,s=e.book,m=e.postVote,d=e.reviews,p=e.isLoggedIn,b=Object(r.useState)({value:"want_read",label:"\uc77d\uae30"}),E=Object(u.a)(b,2),v=E[0],f=E[1],g=Object(r.useState)("\uc77d\uae30"),O=Object(u.a)(g,2),j=O[0],h=O[1],k=Object(r.useState)(!1),S=Object(u.a)(k,2),_=S[0],N=S[1],w=Object(G.c)(),y=Object(r.useCallback)((function(){var e=n.profile,t=o.isbn;if(e){if(ia.checkStatus(e.want_read,t))return f(ua[0]),void h(ua[0].label);if(ia.checkStatus(e.reading,t))return f(ua[1]),void h(ua[1].label);if(ia.checkStatus(e.read,t))return f(ua[2]),void h(ua[2].label)}}),[o,n]),R=Object(r.useCallback)((function(){var e=v.value;if(p){var t=n.user.email;w(Q(t,s._id,e)),N(!0)}else alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud55c \uc11c\ube44\uc2a4 \uc785\ub2c8\ub2e4")}),[w,s,n,v,p]);return Object(r.useEffect)((function(){y()}),[y]),c.a.createElement(c.a.Fragment,null,s?c.a.createElement(c.a.Fragment,null,_&&c.a.createElement(Ze,{type:"success"},"".concat(v.label,"\ubaa9\ub85d\uc5d0 \ucd94\uac00\ub42c\uc2b5\ub2c8\ub2e4")),c.a.createElement("section",{className:sa("book-detail")},c.a.createElement("section",{className:sa("book-rater-list")},c.a.createElement("ul",null,c.a.createElement("li",{className:"star"},c.a.createElement(D.j,null)),(null===s||void 0===s?void 0:null===(t=s.votes)||void 0===t?void 0:t.length)>0?null===s||void 0===s?void 0:null===(a=s.votes)||void 0===a?void 0:a.map((function(e){return c.a.createElement("li",{key:Object(C.a)(),className:"book-rater"},c.a.createElement(i.b,{to:"/profile/".concat(e.voter._id)},c.a.createElement("img",{src:e.voter.avatarUrl,alt:e.voter.emails})))})):c.a.createElement("p",{className:"book-rater-empty"},"\uc544\uc9c1 \uc544\ubb34\ub3c4 \uc810\uc218\ub97c \uc8fc\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4..."))),c.a.createElement("section",{className:sa("book-info-wrapper")},c.a.createElement("section",{className:sa("img-col")},c.a.createElement("img",{src:s.thumbnail,alt:"geisha"})),c.a.createElement("section",{className:sa("book-content")},c.a.createElement("h2",{className:sa("title")},s.title),c.a.createElement("p",{className:sa("author")},c.a.createElement("strong",null,"\uc800\uc790 "),function(e){var t="";if(e)for(var a=0;a<e.length;a++)t+="".concat(e[a]," ");return t}(s.authors)),c.a.createElement("section",{className:sa("bookmeta")},c.a.createElement("span",{className:sa("score")},c.a.createElement(D.j,null),dt(l),c.a.createElement(D.a,{className:sa("angle-down")})),c.a.createElement("span",{className:sa("rate-cnt")},l?l.length:0," \ud3c9\uac00"),c.a.createElement("span",{className:sa("review-cnt")},d?d.length:0," \ub9ac\ubdf0")),c.a.createElement(oa,{votes:s.votes}),c.a.createElement("section",{className:sa("discription")},c.a.createElement("h5",null,"\ucc45 \uc18c\uac1c"),c.a.createElement("p",null,void 0!==s.contents?s.contents:"\ub0b4\uc6a9 \uc5c6\uc74c")),c.a.createElement("div",null,c.a.createElement("div",{className:sa("rate-wrapper")},c.a.createElement("span",null,"\ucc45 \ud3c9\uac00\ud558\uae30"),c.a.createElement(Zt,{postVote:m,book:s,id:o,votes:l&&l.length>0?function(){var e=n.profile,t="0";if(l)for(var a=0;a<l.length;a++){var r;if((null===(r=l[a])||void 0===r?void 0:r._id)===(null===e||void 0===e?void 0:e._id)){t=String(l[a].vote);break}}return t}():"0"})),c.a.createElement("div",{className:sa("add")},c.a.createElement(Yt.a,{className:sa("select"),options:ua,onChange:function(e){f(e)},value:v,isSearchable:!1,placeholder:j}),c.a.createElement("button",{className:sa("want-read"),onClick:R},c.a.createElement("span",null,c.a.createElement(D.f,null)),"\ub4f1\ub85d")))))),c.a.createElement(aa,null)):c.a.createElement(me.ChasingDots,{color:"white",size:60}))},da=function(e){var t=e.match,a=Object(r.useState)(!0),n=Object(u.a)(a,2),l=n[0],o=n[1],i=Object(G.c)(),s=Object(G.d)((function(e){return e.books})),m=s.book,d=s.bookPending,p=Object(G.d)((function(e){return e.review})).reviews,b=Object(G.d)((function(e){return e.login})),E=b.profile,v=b.isLoggedIn,f=Object(r.useCallback)(function(){var e=Object(ne.a)(ae.a.mark((function e(t){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i(Ue(t)),i(wt(t))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i]);return Object(r.useEffect)((function(){o(!0);var e=t.params.id;window.scrollTo(0,0),f(e),o(!1)}),[f,t]),c.a.createElement("main",{className:"main-container"},c.a.createElement(Se,{title:"".concat(null===m||void 0===m?void 0:m.title," | HappReads"),description:"".concat(null===m||void 0===m?void 0:m.contents)}),l||d?c.a.createElement(Fe,null):c.a.createElement(ma,{book:m,id:t.params.id,postVote:function(e,t,a){i(function(e,t,a){return{type:"POST_RATE",payload:Re(e,t,a)}}(e,t,a))},votes:(null===m||void 0===m?void 0:m.votes)||[],reviews:p,profile:E,isLoggedIn:v}))},pa=a(104),ba=a.n(pa),Ea=b.a.bind(ba.a),va=function(){return c.a.createElement("footer",{className:Ea("footer")},c.a.createElement("div",{className:Ea("footer_icon")}),c.a.createElement("span",{className:Ea("footer_text")},"\xa9 HappReads ",Ot()().format("YYYY")))},fa=a(105),ga=a.n(fa),Oa=b.a.bind(ga.a),ja=function(e){var t=e.location,a=Object(r.useState)(""),n=Object(u.a)(a,2),l=n[0],o=n[1],i=Object(r.useState)(1),s=Object(u.a)(i,2),m=s[0],d=s[1],p=Object(r.useState)(!0),b=Object(u.a)(p,2),E=b[0],v=b[1],f=Object(G.c)(),g=Object(G.d)((function(e){return e.books})),O=g.books,j=g.searchPending,h=(Object(r.useCallback)(function(){var e=Object(ne.a)(ae.a.mark((function e(t,a){var n,r=arguments;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.length>2&&void 0!==r[2]?r[2]:1;try{f(Te(t,a,n))}catch(c){console.log(c)}case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[f]),Object(r.useCallback)((function(){var e=window.innerHeight,a=document.body.scrollHeight,n=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop,r=t.search;decodeURI(r).split("=")[1].replace(/[%20]/gi," ").split("&")[0];a-e-n<100&&d(m+1)}),[t,d,m]));return Object(r.useEffect)((function(){v(!0);var e=t.search,a=decodeURI(e).split("=")[1].replace(/[%20]/gi," ").split("&")[0];o(a),f(Pe(a,0,m)),v(!1)}),[f,t,h,m]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Se,{title:"\uac80\uc0c9 | HappReads"}),E||j?c.a.createElement(Fe,null):c.a.createElement("section",{className:Oa("search-result-container")},c.a.createElement("h1",{className:"search-keyword"},"\uac80\uc0c9 \ud0a4\uc6cc\ub4dc: ",l),O.length>0?c.a.createElement(pe,{booklist:O,from:"search"}):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"empty"},c.a.createElement("p",null,"\uac80\uc0c9 \uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.")))))},ha=a(106),ka=a.n(ha);V.a.config(),A.a.defaults.baseURL="https://happread.herokuapp.com/";var Sa=function(e,t){return A.a.post("upload",e,{onUploadProgress:function(e){var a=e.loaded,n=e.total,r=Math.floor(100*a/n);t(Na(r))}})},_a=function(e){return function(t){return{type:"UPLOAD",payload:Sa(t,e)}}},Na=function(e){return{type:"UPLOAD_PROGRESS",payload:{progress:e}}},wa=Object(B.a)((Lt={},Object(x.a)(Lt,"UPLOAD_PENDING",(function(e,t){return Object(O.a)({},e,{pending:!0,error:!1,success:!1,progress:0})})),Object(x.a)(Lt,"UPLOAD_SUCCESS",(function(e,t){return Object(O.a)({},e,{success:!0,pending:!1,error:!1,isUploaded:100===e.progress,progress:0})})),Object(x.a)(Lt,"UPLOAD_FAILURE",(function(e,t){return Object(O.a)({},e,{pending:!1,error:!0})})),Object(x.a)(Lt,"UPLOAD_PROGRESS",(function(e,t){var a=t.payload;return Object(O.a)({},e,{progress:a.progress})})),Lt),{pending:!1,error:!1,success:!1,progress:0,isUploaded:!1});V.a.config();var ya=b.a.bind(ka.a),Ca=function(){var e=Object(r.useState)({selected:null,title:"",authors:[],author:"",isbn:"",contents:"",genres:""}),t=Object(u.a)(e,2),a=t[0],n=t[1],l=Object(r.useRef)(null),o=Object(r.useRef)(null),i=Object(r.useRef)(null),s=Object(r.useRef)(null),m=Object(r.useRef)(null),d=Object(r.useRef)(null),p=(Object(r.useRef)(null),Object(G.c)()),b=Object(G.d)((function(e){return e.login})).profile,E=Object(G.d)((function(e){return e.upload})),v=E.progress,f=E.isUploaded,g=Object(r.useCallback)((function(e){var t=e.target;n(Object(O.a)({},a,{author:t.value}))}),[a]),j=Object(r.useCallback)((function(e){var t=a.author,r=a.authors,c=e.keyCode;""!==t&&(s.current.classList.remove("empty"),13===c&&n(Object(O.a)({},a,{authors:[].concat(Object(_e.a)(r),[t]),author:""})))}),[a]),h=Object(r.useCallback)((function(e){var t=e.target;t.value.length>0&&i.current.classList.remove("input-empty"),n(Object(O.a)({},a,{title:t.value}))}),[a]),k=Object(r.useCallback)((function(e){var t=e.target;t.value.length>0&&d.current.classList.remove("input-empty"),n(Object(O.a)({},a,{contents:t.value}))}),[a]),S=Object(r.useCallback)((function(e){e.preventDefault();var t=e.target;t.value.length>0&&m.current.classList.remove("input-empty"),n(Object(O.a)({},a,{genres:t.value}))}),[a]),_=Object(r.useCallback)(function(){var e=Object(ne.a)(ae.a.mark((function e(t){var n,r,c,l,o,u,E;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),13===t.keyCode){e.next=20;break}if(n=b.user._id,r=a.selected,c=a.contents,l=a.title,o=a.authors,u=a.genres,!(null!==r&&c.length>0&&l.length>0&&o.length>0&&u.length>0)){e.next=16;break}return(E=new FormData).append("thumbnail",r),E.append("title",l),E.append("authors",o),E.append("contents",c),E.append("uid",n),E.append("genres",u),e.next=14,p(_a(p)(E));case 14:e.next=20;break;case 16:0===c.length&&d.current.classList.add("input-empty"),0===l.length&&i.current.classList.add("input-empty"),0===o.length&&s.current.classList.add("input-empty"),0===u.length&&m.current.classList.add("input-empty");case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,b,p]);Object(r.useLayoutEffect)((function(){f?(o.current.style.width="".concat(0,"%"),window.location.href="".concat("/HappReads-front")):o.current.style.width="".concat(v,"%")}),[v,f]);var N=a.title,w=a.authors,y=a.author,R=a.contents,I=a.genres;return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:ya("progress-container")},c.a.createElement("div",{className:ya("progress"),ref:o})),c.a.createElement("section",{className:ya("book-upload")},c.a.createElement("section",{className:ya("form-container")},c.a.createElement("section",{className:ya("form")},c.a.createElement("div",{className:ya("upload-btn-wrapper")},c.a.createElement("img",{className:ya("preview-img"),alt:"",ref:l}),c.a.createElement("div",{className:ya("btn-container"),style:{position:"relative"}},c.a.createElement("button",{className:ya("btn")},"\uc774\ubbf8\uc9c0 \uc120\ud0dd"),c.a.createElement("input",{type:"file",onChange:function(e){var t=e.target.files,r=URL.createObjectURL(t[0]);l.current.src=r,n(Object(O.a)({},a,{selected:t[0]}))},required:!0}))),c.a.createElement("input",{type:"text",value:N,onChange:h,placeholder:"\ucc45 \uc774\ub984",required:!0,ref:i}),c.a.createElement("div",{className:ya("authors"),ref:s},function(e,t){return null===e||void 0===e?void 0:e.map((function(e){var a=Object(C.a)();return c.a.createElement("div",{className:ya("author-tag"),key:a},c.a.createElement("span",{className:ya("author-name")},e),c.a.createElement("span",{className:ya("author-x"),onClick:t},"x"))}))}(w,(function(e){var t=a.authors,r=e.target.previousSibling.innerHTML,c=t.filter((function(e){return e!==r}));n(Object(O.a)({},a,{authors:c}))})),c.a.createElement("input",{className:ya("author-input"),type:"text",placeholder:"\uc800\uc790 +",value:y,onChange:g,onKeyDown:j})),c.a.createElement("input",{type:"text",value:I,placeholder:"\ucc45 \uc7a5\ub974 ( ,\uad6c\ubd84\uc9c4\ud589)",onChange:S,required:!0,ref:m}),c.a.createElement("textarea",{placeholder:"\uc694\uc57d",value:R,onChange:k,required:!0,ref:d}),c.a.createElement("button",{className:"submit",onClick:_},"\uc5c5\ub85c\ub4dc")))))},Ra=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Se,{title:"Upload | HappReads"}),c.a.createElement(Ca,null))},Ia=a(107),La=a.n(Ia),Pa=a(108),Ta=a.n(Pa),Ua=b.a.bind(Ta.a),Da=Object(s.g)((function(e){var t=e.history,a=e.getBooks,n=Object(r.useState)(""),l=Object(u.a)(n,2),o=l[0],i=l[1],s=Object(r.useCallback)((function(e){i(e.target.value)}),[]),m=function(e){e.preventDefault(),a(o,0,1),t.push("/search?p=".concat(o))};return c.a.createElement("div",{className:Ua("search-bar")},c.a.createElement("form",{className:Ua("form-container"),onSubmit:m},c.a.createElement(D.g,{className:Ua("search-icon"),onClick:m}),c.a.createElement("input",{type:"input",placeholder:"\ucc45 \uac80\uc0c9...",value:o,name:"q",onChange:s})))})),Ga=b.a.bind(La.a),xa=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(!1),o=Object(u.a)(l,2),s=o[0],m=o[1],d=Object(G.c)(),p=Object(G.d)((function(e){return e.login})),b=p.isLoggedIn,E=p.profile,v=Object(r.useCallback)(Object(ne.a)(ae.a.mark((function e(){var t;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=mt())try{d(X(t))}catch(a){console.log(a)}case 2:case"end":return e.stop()}}),e)}))),[d]),f=Object(r.useCallback)(Object(ne.a)(ae.a.mark((function e(){var t;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({type:"LOGOUT",payload:A.a.post("logout")});case 2:t=e.sent,200===t.value.status&&(localStorage.removeItem("atk"),window.location.href="/");case 5:case"end":return e.stop()}}),e)}))),[d]),g=function(e){var t=window.innerWidth;m(t>=320&&t<=425)};Object(r.useEffect)((function(){return v(),g(),window.addEventListener("resize",g),function(){window.removeEventListener("resize",g)}}),[v]);var O=Object(r.useCallback)((function(){n((function(e){return!e}))}),[n]);return c.a.createElement("header",{className:Ga("header")},c.a.createElement("nav",{className:Ga(["nav",s&&"mobile"])},c.a.createElement("div",{className:Ga("title")},c.a.createElement(i.b,{to:"/"},c.a.createElement("span",{className:Ga("fr")},"Happ"),c.a.createElement("span",{className:Ga("en")},"Reads"))),c.a.createElement(Da,{getBooks:Pe}),s&&c.a.createElement("ul",{className:Ga("mobile-menu-bar"),onClick:O},c.a.createElement("li",null),c.a.createElement("li",null),c.a.createElement("li",null)),!1===s&&c.a.createElement("div",{className:Ga("menu-container")},c.a.createElement("div",{className:Ga("community")},c.a.createElement(i.b,{to:"/community/reviews"},c.a.createElement(D.b,null),c.a.createElement("p",null,"\ucc45 \ub9ac\ubdf0"))),c.a.createElement("ul",{className:Ga("ul")},b?c.a.createElement(c.a.Fragment,null,c.a.createElement("li",null,c.a.createElement("span",null,c.a.createElement("img",{src:E.user?E.user.avatarUrl:"",alt:"me",onClick:O})),c.a.createElement("div",{className:Ga("menu","".concat(a?"show":""))},c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(i.b,{to:"/me"},"\ud504\ub85c\ud544")),c.a.createElement("li",null,c.a.createElement(i.b,{to:"/upload"},"\ucc45 \uc5c5\ub85c\ub4dc")),c.a.createElement("li",{onClick:f},"\ub85c\uadf8\uc544\uc6c3")),c.a.createElement("div",{className:Ga("callout")})))):c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:Ga("login")},c.a.createElement(i.b,{to:"/login"},"\ub85c\uadf8\uc778")),c.a.createElement("li",null,c.a.createElement(i.b,{to:"/signup"},"\uac00\uc785")))))),s&&a&&c.a.createElement("ul",{className:Ga("mobile-menu-container"),onClick:O},b?c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:Ga("mobile-menu-item")},c.a.createElement(i.b,{to:"/me"},c.a.createElement(D.m,null)," \ud504\ub85c\ud544")),c.a.createElement("li",{className:Ga("mobile-menu-item")},c.a.createElement(i.b,{to:"/upload"},c.a.createElement(D.l,null)," \ucc45 \uc5c5\ub85c\ub4dc")),c.a.createElement("li",{className:Ga("mobile-menu-item")},c.a.createElement(i.b,{to:"/community/reviews"},c.a.createElement(D.b,null)," \ucc45 \ub9ac\ubdf0")),c.a.createElement("li",{className:Ga("mobile-menu-item"),onClick:f},c.a.createElement(D.i,null)," \ub85c\uadf8\uc544\uc6c3")):c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:Ga("mobile-menu-item")},c.a.createElement(i.b,{to:"/login"},c.a.createElement(D.h,null)," \ub85c\uadf8\uc778")),c.a.createElement("li",{className:Ga("mobile-menu-item")},c.a.createElement(i.b,{to:"/signup"},c.a.createElement(D.n,null)," \uac00\uc785")),c.a.createElement("li",{className:Ga("mobile-menu-item")},c.a.createElement(i.b,{to:"/community/reviews"},c.a.createElement(D.b,null)," \ucc45 \ub9ac\ubdf0")))))},Ba=a(109),Fa=a.n(Ba),Aa=a(110),Ha=a.n(Aa),Va=b.a.bind(Ha.a),Ma=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Se,{title:"404 Error | HappReads"}),c.a.createElement("section",{className:Va("nomatch-section")},c.a.createElement("h1",null,"404 Not Found"),c.a.createElement("img",{src:Fa.a,alt:"404"})))},Ka=a(111),Wa=a.n(Ka),Ya=b.a.bind(Wa.a),qa=function(){var e=Object(r.useState)({type:1,openModal:!1,lastPos:90,item:{},status:""}),t=Object(u.a)(e,2),a=t[0],n=t[1],l=Object(G.c)(),o=Object(G.d)((function(e){return e.login})),s=o.profile,m=o.isLoggedIn,d=Object(G.d)((function(e){return e.user})).profile,p=Object(r.useCallback)(Object(ne.a)(ae.a.mark((function e(){var t,a,n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=mt())&&l(X(t)),a=window.location.hash.split("/"),n=a[a.length-1],l(Tt(n));case 5:case"end":return e.stop()}}),e)}))),[l]);Object(r.useEffect)((function(){return p(),window.scrollTo(0,0),function(){}}),[p]);var b=Object(r.useCallback)((function(e,t,a){return function(){var n=Object(ne.a)(ae.a.mark((function n(r){var c;return ae.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,l(Z(e,t,a));case 3:c=n.sent,200===c.value.status&&p(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}),[l,p]),E=Object(r.useCallback)((function(e){return function(t){n(Object(O.a)({},a,{openModal:!0,item:e}))}}),[a]),v=Object(r.useCallback)((function(e){n(Object(O.a)({},a,{openModal:!1}))}),[a]),f=Object(r.useCallback)((function(e){return function(){var t=Object(ne.a)(ae.a.mark((function t(a){var n;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!m){t.next=13;break}return t.prev=2,t.next=5,l((r=Object(O.a)({},e),{type:"EDIT_BOOK",payload:Ie(r)}));case 5:n=t.sent,200===n.value.status&&p(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:case"end":return t.stop()}var r}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}),[l,p,m]),g=a.openModal,j=a.item;return c.a.createElement("section",{className:Ya("book-shelve")},g?c.a.createElement(ie,{handleCancel:v,handleSubmit:f,item:j}):null,c.a.createElement("div",null,c.a.createElement("p",{className:Ya("shelve-header")},d?d.email:"","\uc758 \ucc45\uc7a5")),c.a.createElement("div",null,c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"\ucee4\ubc84"),c.a.createElement("th",null,"\uc81c\ubaa9"),c.a.createElement("th",null,"\uc800\uc790"),c.a.createElement("th",null,"\ud3c9\uade0"),c.a.createElement("th",null,"\uc0dd\uc131 \ub0a0\uc9dc"),(null===s||void 0===s?void 0:s.user)&&d&&d._id===s.user._id?c.a.createElement("th",null,"\uc124\uc815"):null)),c.a.createElement("tbody",null,function(){var e,t=s.user;return t?null===t||void 0===t?void 0:null===(e=t.uploaded)||void 0===e?void 0:e.map((function(e){return c.a.createElement("tr",{key:e._id},c.a.createElement("td",null,c.a.createElement(i.b,{to:"/book/".concat(e._id)},c.a.createElement("img",{src:e.thumbnail,alt:e.thumbnail}))),c.a.createElement("td",null,c.a.createElement(i.b,{to:"/book/".concat(e._id)},e.title)),c.a.createElement("td",null,e.authors.length>1?"".concat(e.authors[0]," *"):e.authors[0]),c.a.createElement("td",null,e.votes?dt(e.votes):0),c.a.createElement("td",null,Ot()(e.createdAt).format("YY\ub144MM\uc6d4DD\uc77c HH:MM:SS")),c.a.createElement("td",{className:Ya("settings uploaded")},c.a.createElement("p",{onClick:E(e)},"\uc218\uc815"),c.a.createElement("p",{onClick:b(t._id,e._id)},"X")))})):null}()))))},za=a(112),Ja=a.n(za),Xa=b.a.bind(Ja.a),Qa=function(){return c.a.createElement("div",{className:Xa("category")},c.a.createElement("ul",null,c.a.createElement("li",null,"\ucd5c\uadfc \ucc45 \ub9ac\ubdf0")))},Za=a(113),$a=a.n(Za),en=b.a.bind($a.a),tn=function(e){var t=e.path,a=e.loadMore,n=e.toggleMore,r=e.selected,l=e.handleLike,o=e.hasMore,s=Object(G.d)((function(e){return e.review})).reviews;return c.a.createElement("section",{className:en("community-container")},"reviews"===t&&c.a.createElement("section",{className:en("reviews")},function(e){if("reviews"===e)return c.a.createElement(c.a.Fragment,null,0===s.length&&c.a.createElement("p",{className:en("empty")},"\ucd5c\uadfc \ub9ac\ubdf0\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."),c.a.createElement(c.a.Fragment,null,s.length>0&&s.map((function(e){return c.a.createElement("section",{key:Object(C.a)(),className:en(["card","row"])},c.a.createElement("section",{className:en("first-col")},c.a.createElement(i.b,{to:"/book/".concat(e&&e.book&&e.book._id)},c.a.createElement("img",{src:e&&e.book&&e.book.thumbnail,alt:e&&e.book&&e.book.title})),c.a.createElement("p",{className:en("like")},c.a.createElement(ve.a,{className:en("heart"),icon:fe.d,onClick:l(e)})," ",e&&e.likes&&e.likes.length," \uc88b\uc544\uc694")),c.a.createElement("section",{className:en("second-col")},c.a.createElement("p",{className:en("date")},e&&Ot()(e.createdAt).format("YYYY/MM/DD HH:MM:DD")),c.a.createElement("p",{className:en("reviewer")},c.a.createElement(i.b,{to:"/profile/".concat(e&&e.reviewer._id)},e&&e.reviewer.email.split("@")[0])),c.a.createElement("h4",{className:en("title")},c.a.createElement(i.b,{to:"/book/".concat(e&&e.book&&e.book._id)},e&&e.book&&e.book.title)),c.a.createElement("section",{className:en("content")},c.a.createElement("img",{src:e&&e.reviewer&&e.reviewer.avatarUrl,alt:e&&e.reviewer.email}),c.a.createElement("article",null,c.a.createElement("p",{className:en("content-text")},e&&e.content&&e.content.length>=50&&e._id&&!0===r[e._id]?e.content:"".concat(e.content.substring(0,50),"...")),e&&e.content&&e.content.length>=50?c.a.createElement("p",{className:en("more"),onClick:n,"data-id":e._id},r[e._id]?"\uc904\uc774\uae30":"\ub354\ubcf4\uae30"):null))))})),o&&c.a.createElement("button",{className:en("load-more-btn"),onClick:a},"\ub354 \ubcf4\uae30")))}("reviews")))},an=function(e){var t=e.history.location.pathname.substr(1).split("/")[1],a=Object(r.useState)(!0),n=Object(u.a)(a,2),l=(n[0],n[1]),o=Object(r.useState)({}),i=Object(u.a)(o,2),s=i[0],m=i[1],d=Object(r.useState)(1),p=Object(u.a)(d,2),b=p[0],E=p[1],v=Object(G.d)((function(e){return e.review})).hasMore,f=Object(G.d)((function(e){return e.login})),g=f.profile,j=f.isLoggedIn,h=Object(G.c)(),k=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{h(Nt({limit:5,page:e}))}catch(t){console.log(t)}}),[h]),S=Object(r.useCallback)((function(e){var t=e.target.dataset;if(void 0===s[t.id]||!1===s[t.id]){var a=Object(O.a)({},s,Object(x.a)({},t.id,!0));m(a)}else{var n=Object(O.a)({},s,Object(x.a)({},t.id,!1));m(n)}}),[s]),_=Object(r.useCallback)((function(e){k(b+1),E((function(e){return e+1}))}),[k,b]),N=Object(r.useCallback)((function(e){return function(){var t=g.user;j?h(Rt("like",e._id,t._id)):alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4")}}),[g,j,h]);return Object(r.useEffect)((function(){return l(!0),k(),l(!1),function(){}}),[k,h]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Se,{title:"Book Reviews | HappReads",keywords:"\ucc45 \ub9ac\ubdf0, \ub9ac\ubdf0, \ucd5c\uadfc \ub9ac\ubdf0"}),c.a.createElement(Qa,{path:t}),c.a.createElement(tn,{path:t,hasMore:v,loadMore:_,selected:s,toggleMore:S,handleLike:N}))},nn=a(114),rn=a.n(nn),cn=b.a.bind(rn.a),ln=function(){var e=Object(r.useState)(!0),t=Object(u.a)(e,2),a=t[0],n=t[1],l=Object(r.useCallback)((function(){window.scrollTo(0,0)}),[]),o=Object(r.useCallback)((function(){var e=window.pageYOffset;n(e<=600)}),[]);return Object(r.useEffect)((function(){return window.addEventListener("scroll",o),function(){window.removeEventListener("scroll",o)}}),[o]),c.a.createElement("button",{className:cn(["floating-button",a?"hide":"show"]),onClick:l},"\uc704\ub85c")};a(227);var on,sn=function(){return c.a.createElement(i.a,null,c.a.createElement(xa,null),c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"/",exact:!0,component:Ae}),c.a.createElement(s.b,{path:"/book/:id",component:da}),c.a.createElement(s.b,{path:"/login",component:et}),c.a.createElement(s.b,{path:"/search",component:ja}),c.a.createElement(s.b,{path:"/signup",component:lt}),c.a.createElement(s.b,{path:"/me",component:Mt}),c.a.createElement(s.b,{path:"/upload",component:Ra}),c.a.createElement(s.b,{path:"/community/reviews",component:an}),c.a.createElement(s.b,{path:"/community/top-readers",component:an}),c.a.createElement(s.b,{path:"/community/top-reviewers",component:an}),c.a.createElement(s.b,{path:"/profile/:id",component:Mt}),c.a.createElement(s.b,{path:"/shelve/:id",component:qa}),c.a.createElement(s.b,{component:Ma})),c.a.createElement(ln,null),c.a.createElement(va,null))},un=a(30);V.a.config(),A.a.defaults.baseURL="https://happread.herokuapp.com/";var mn=Object(B.a)((on={},Object(x.a)(on,"POST_SHELVE_PENDING",(function(e,t){return{pending:!0,error:!1}})),Object(x.a)(on,"POST_SHELVE_SUCCESS",(function(e,t){})),Object(x.a)(on,"POST_SHELVE_FAILURE",(function(e,t){return{pending:!1,error:!0}})),on),{pending:!1,error:!1}),dn=Object(un.c)({books:De,signup:ct,login:ee,review:It,shelve:mn,user:Ut,upload:wa}),pn=a(115),bn=Object(pn.a)({promiseTypeSuffixes:["PENDING","SUCCESS","FAILURE"]}),En=Object(un.d)(dn,Object(un.a)(bn));o.a.render(c.a.createElement(G.a,{store:En},c.a.createElement(sn,null)),document.getElementById("root"))},48:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[128,1,2]]]);
//# sourceMappingURL=main.6b9a0853.chunk.js.map