(this.webpackJsonpgoodreads=this.webpackJsonpgoodreads||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){e.exports=a.p+"static/media/go_back.62137145.png"},114:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},181:function(e,t,a){e.exports=a(282)},278:function(e,t,a){},281:function(e,t,a){},282:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),l=a(28),o=a.n(l),i=a(8),s=a(13),u=a(7),m=a.n(u),d=a(10),b=a(5),p=a(4),E=a(12),f=a(6),v=a.n(f),O=a(86),g=a.n(O),j=v.a.bind(g.a),h=Object(s.h)((function(e){var t=e.history,a=e.getBooks,n=Object(r.useState)(""),l=Object(b.a)(n,2),o=l[0],i=l[1],s=Object(r.useCallback)((function(e){i(e.target.value)}),[]),u=function(e){e.preventDefault(),a(o,0,1),t.push("/search?p=".concat(o))};return c.a.createElement("div",{className:j("search-bar")},c.a.createElement("form",{className:j("form-container"),onSubmit:u},c.a.createElement(E.g,{className:j("search-icon"),onClick:u}),c.a.createElement("input",{type:"input",placeholder:"\ucc45 \uac80\uc0c9...",value:o,name:"q",onChange:s})))})),k=a(2),S=a(1),_=a(283),N=a(9),w=a.n(N),y=a(15),C=a.n(y);C.a.config(),w.a.defaults.baseURL="https://happread.herokuapp.com/";var R,I=function(e,t){return w.a.post("login",{email:e,password:t})},L=function(e){return w.a.create({headers:{Authorization:"".concat(e)}}).post("profile")},P=function(e,t,a){return w.a.post("shelve",{email:e,id:t,type:a})},T=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return w.a.delete("shelve",{data:{uid:e,id:t,type:a}})},U=function(e,t,a){return w.a.delete("book/".concat(e,"/review/").concat(t),{data:{uid:a}})},D=function(e){return w.a.post("edit",e)},x=function(e){return{type:"USER_CHECK",payload:L(e)}},G=function(e,t,a){return{type:"POST_SHELVE",payload:P(e,t,a)}},B=function(e,t,a){return{type:"DELETE_SHELVE",payload:T(e,t,a)}},F=function(e,t,a){return{type:"DELETE_REVIEW",payload:U(e,t,a)}},A=Object(_.a)((n={},Object(k.a)(n,"LOGIN_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{loginPending:!0,loginError:!1,loginSuccess:!1})})),Object(k.a)(n,"LOGIN_SUCCESS",(function(e,t){return{profile:t.payload.data,loginPending:!1,loginError:!1,loginSuccess:!0,isLoggedIn:!0}})),Object(k.a)(n,"LOGIN_FAILURE",(function(e,t){return console.log(),Object(S.a)(Object(S.a)({},e),{},{loginPending:!1,loginError:!0,loginSuccess:!1,isLoggedIn:!1})})),Object(k.a)(n,"USER_CHECK_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{pending:!0,error:!1,isLoggedIn:!1})})),Object(k.a)(n,"USER_CHECK_SUCCESS",(function(e,t){return{pending:!1,error:!1,isLoggedIn:!0,profile:t.payload.data}})),Object(k.a)(n,"USER_CHECK_FAILURE",(function(e,t){return{pending:!1,error:!0,isLoggedIn:!1}})),Object(k.a)(n,"LOGOUT_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{logoutPending:!0,logoutError:!1,logoutSuccess:!1})})),Object(k.a)(n,"LOGOUR_SUCCESS",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{logoutPending:!1,logoutError:!1,logoutSuccess:!0,isLoggedIn:!1,profile:{}})})),Object(k.a)(n,"LOGOUT_FAILURE",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{logoutPending:!1,logoutError:!0,logoutSuccess:!1})})),Object(k.a)(n,"POST_SHELVE_INIT",(function(e,t){return console.log(t.payload),Object(S.a)(Object(S.a)({},e),{},{postShelveSuccess:!1,postShelveError:!1,postShelvePending:!1})})),Object(k.a)(n,"POST_SHELVE_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{postShelvePending:!0,postShelveSuccess:!1,postShelveError:!1})})),Object(k.a)(n,"POST_SHELVE_SUCCESS",(function(e,t){var a=t.payload.data;return Object(S.a)(Object(S.a)({},e),{},{postShelvePending:!1,postShelveSuccess:!0,profile:a})})),Object(k.a)(n,"POST_SHELVE_FAILURE",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{postShelvePending:!1,postShelveError:!0})})),Object(k.a)(n,"DELETE_SHELVE_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{pending:!0,error:!1})})),Object(k.a)(n,"DELETE_SHELVE_SUCCESS",(function(e,t){var a=t.payload.data;return Object(S.a)(Object(S.a)({},e),{},{profile:a,pending:!1,error:!1})})),Object(k.a)(n,"DELETE_SHELVE_FAILURE",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{pending:!1,error:!0})})),Object(k.a)(n,"DELETE_REVIEW_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{pending:!0,error:!1})})),Object(k.a)(n,"DELETE_REVIEW_SUCCESS",(function(e,t){var a=t.payload.data;return Object(S.a)(Object(S.a)({},e),{},{pending:!1,error:!0,profile:a})})),Object(k.a)(n,"DELETE_REVIEW_FAILURE",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{pending:!1,error:!0})})),n),{pending:!0,error:!1,success:!1,profile:{},isLoggedIn:!1,loginPending:!1,loginError:!1,loginSuccess:!1,logoutPending:!1,logoutSuccess:!1,logoutError:!1,postShelvePending:!1,postShelveSuccess:!1,postShelveError:!1}),H=a(21);C.a.config();var V="https://happread.herokuapp.com/";console.log(V);var M,K=function(e,t){return w.a.get("".concat(V,"books/type/").concat(decodeURI(e),"?page=").concat(t))},W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return w.a.get("".concat(V,"book/search?q=").concat(decodeURI(e),"&type=").concat(t,"&page=").concat(a))},Y=function(e){return w.a.get("".concat(V,"book/").concat(e))},q=function(e,t,a){return w.a.post("".concat(V,"book/").concat(e),{vote:a,name:t})},z=function(e){var t=e._id,a=e.title,n=e.contents,r=e.genres;return w.a.put("".concat(V,"book/").concat(t),{title:a,contents:n,genres:r})},J=function(e,t){return{type:"GET_BOOKS",payload:K(e,t)}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return{type:"GET_SEARCH_BOOKS",payload:W(e,t,a)}},Q=function(e){return{type:"GET_DETAIL",payload:Y(e)}},Z=Object(_.a)((R={},Object(k.a)(R,"GET_SLIDER_BOOKS_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{sliderPending:!0,sliderError:!1,sliderSuccess:!1})})),Object(k.a)(R,"GET_SLIDER_BOOKS_SUCCESS",(function(e,t){var a=t.payload.data.books;return Object(S.a)(Object(S.a)({},e),{},{sliderBooks:a,sliderPending:!1,sliderSuccess:!0})})),Object(k.a)(R,"GET_SLIDER_BOOKS_FAILURE",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{sliderPending:!1,sliderError:!0})})),Object(k.a)(R,"GET_BOOKS_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{allBookPending:!0,allBookError:!1,allBookSuccess:!1,allBookDone:!1})})),Object(k.a)(R,"GET_BOOKS_SUCCESS",(function(e,t){var a=t.payload.data,n=a.books,r=a.page;return Object(S.a)(Object(S.a)({},e),{},{allBookPending:!1,allBookSuccess:!0,allBookDone:n.length<15,books:void 0===e.books||1===parseInt(r,10)?n:[].concat(Object(H.a)(e.books),Object(H.a)(n))})})),Object(k.a)(R,"GET_BOOKS_FAILURE",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{allBookPending:!1,allBookError:!0})})),Object(k.a)(R,"GET_SEARCH_BOOKS_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{books:[],searchPending:!0,searchSuccess:!1,searchFailure:!1})})),Object(k.a)(R,"GET_SEARCH_BOOKS_SUCCESS",(function(e,t){var a=t.payload.data.books;return Object(S.a)(Object(S.a)({},e),{},{searchPending:!1,searchSuccess:!0,books:a})})),Object(k.a)(R,"GET_SEARCH_BOOKS_FAILURE",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{searchPending:!1,searchFailure:!0})})),Object(k.a)(R,"GET_MORE_BOOKS_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{morePending:!0,moreError:!1})})),Object(k.a)(R,"GET_MORE_BOOKS_SUCCESS",(function(e,t){var a=t.payload.data.books;return Object(S.a)(Object(S.a)({},e),{},{morePending:!1,moreError:!1,moreDone:a.length<10,books:[].concat(Object(H.a)(e.books),Object(H.a)(a))})})),Object(k.a)(R,"GET_MORE_BOOKS_FAILURE",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{morePending:!1,moreError:!0})})),Object(k.a)(R,"POST_RATE_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{vote_pending:!0,vote_error:!1,vote_success:!1})})),Object(k.a)(R,"POST_RATE_SUCCESS",(function(e,t){var a=t.payload.data.book;return Object(S.a)(Object(S.a)({},e),{},{vote_pending:!1,vote_error:!1,vote_success:!0,book:a})})),Object(k.a)(R,"POST_RATE_FAILURE",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{vote_pending:!1,vote_error:!0,vote_success:!1})})),Object(k.a)(R,"GET_DETAIL_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{bookPending:!0,bookError:!1})})),Object(k.a)(R,"GET_DETAIL_SUCCESS",(function(e,t){var a=t.payload.data.book;return Object(S.a)(Object(S.a)({},e),{},{bookPending:!1,bookSuccess:!0,book:a,votes:a.votes})})),Object(k.a)(R,"GET_DETAIL_FAILURE",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{bookPending:!1,bookError:!0})})),Object(k.a)(R,"GET_RECENT_BOOKS_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{recentPending:!0,recentError:!1,recentSuccess:!1})})),Object(k.a)(R,"GET_RECENT_BOOKS_SUCCESS",(function(e,t){var a=t.payload.data;return Object(S.a)(Object(S.a)({},e),{},{recentBooks:a,recentPending:!1,recentSuccess:!0})})),Object(k.a)(R,"GET_RECENT_BOOKS_FAILURE",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{recentPending:!0,recentError:!0})})),Object(k.a)(R,"GET_POPULAR_BOOKS_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{popularPending:!0,popularError:!1,popularSuccess:!1})})),Object(k.a)(R,"GET_POPULAR_BOOKS_SUCCESS",(function(e,t){var a=t.payload.data;return Object(S.a)(Object(S.a)({},e),{},{popularBooks:a,popularPending:!1,popularSuccess:!0})})),Object(k.a)(R,"GET_POPULAR_BOOKS_FAILURE",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{popularPending:!0,popularError:!0})})),Object(k.a)(R,"EDIT_BOOK_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{editBookPending:!0,editBookSuccess:!1,editBookFailure:!1})})),Object(k.a)(R,"EDIT_BOOK_SUCCESS",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{editBookPending:!1,editBookSuccess:!0})})),Object(k.a)(R,"EDIT_BOOK_FAILURE",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{editBookPending:!1,editBookFailure:!0})})),R),{allBookPending:!1,allBookSuccess:!1,allBookError:!1,allBookDone:!1,books:[],morePending:!1,moreError:"",moreDone:!1,sliderBooks:[],sliderPending:!1,sliderError:!1,sliderSuccess:!1,total:0,vote_pending:!1,vote_error:!1,vote_success:!1,term:"",book:{},bookPending:!1,bookSuccess:!1,bookFailure:!1,recentBooks:[],recentPending:!1,recentError:!1,recentSuccess:!1,popularBooks:[],popularPending:!1,popularError:!1,popularSuccess:!1,editBookPending:!1,editBookSuccess:!1,editBookFailure:!1,searchPending:!1,searchSuccess:!1,searchFailure:!1}),$=function(){return localStorage.getItem("atk")},ee=function(e){if(e){var t=0;if(e.length>0){for(var a=0;a<e.length;a++)t+=parseInt(e[a].vote);return(t/e.length).toFixed(2)}return 0}return 0},te=a(87),ae=a.n(te),ne=v.a.bind(ae.a),re=function(){var e=Object(r.useState)(!1),t=Object(b.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(!1),o=Object(b.a)(l,2),s=o[0],u=o[1],f=Object(p.c)(),v=Object(p.d)((function(e){return e.login})),O=v.isLoggedIn,g=v.profile,j=Object(r.useCallback)(Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$())try{f(x(t))}catch(a){console.log(a)}case 2:case"end":return e.stop()}}),e)}))),[f]),k=Object(r.useCallback)(Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({type:"LOGOUT",payload:w.a.post("logout")});case 2:t=e.sent,200===t.value.status&&(localStorage.removeItem("atk"),window.location.href="/");case 5:case"end":return e.stop()}}),e)}))),[f]),S=function(e){var t=window.innerWidth;u(t<768)};Object(r.useEffect)((function(){j()}),[j]),Object(r.useEffect)((function(){return S(),window.addEventListener("resize",S),function(){window.removeEventListener("resize",S)}}),[]);var _=Object(r.useCallback)((function(){n((function(e){return!e}))}),[n]);return c.a.createElement("header",{className:ne("header")},c.a.createElement("nav",{className:ne(["nav",s&&"mobile"])},c.a.createElement("div",{className:ne("nav-title")},c.a.createElement(i.b,{to:"/"},c.a.createElement("span",{className:ne("fr")},"Happ"),c.a.createElement("span",{className:ne("en")},"Reads"))),c.a.createElement(h,{getBooks:X}),s&&c.a.createElement("ul",{className:ne("mobile-menu-bar"),onClick:_},c.a.createElement("li",null),c.a.createElement("li",null),c.a.createElement("li",null)),!1===s&&c.a.createElement("div",{className:ne("nav-menu-container")},c.a.createElement("div",{className:ne("nav-menu-link")},c.a.createElement(i.b,{to:"/search?p="},c.a.createElement(E.g,null),c.a.createElement("p",null,"\ub3c4\uc11c")),c.a.createElement(i.b,{to:"/community/reviews"},c.a.createElement(E.b,null),c.a.createElement("p",null,"\ucc45 \ub9ac\ubdf0"))),c.a.createElement("ul",{className:ne("navbar-nav")},O?c.a.createElement(c.a.Fragment,null,c.a.createElement("li",null,c.a.createElement("span",null,c.a.createElement("img",{src:g.user?g.user.avatarUrl:"",alt:"me",onClick:_})),c.a.createElement("div",{className:ne("dropdown-menu","".concat(a?"show":""))},c.a.createElement("ul",null,c.a.createElement("li",{className:ne("dropdown-item")},c.a.createElement(i.b,{to:"/me/books"},"\ud504\ub85c\ud544")),c.a.createElement("li",{className:ne("dropdown-item")},c.a.createElement(i.b,{to:"/upload"},"\ucc45 \uc5c5\ub85c\ub4dc")),c.a.createElement("li",{className:ne("dropdown-item"),onClick:k},"\ub85c\uadf8\uc544\uc6c3")),c.a.createElement("div",{className:ne("callout")})))):c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:ne("login")},c.a.createElement(i.b,{to:"/login"},"\ub85c\uadf8\uc778")),c.a.createElement("li",null,c.a.createElement(i.b,{to:"/signup"},"\uac00\uc785")))))),s&&a&&c.a.createElement("ul",{className:ne("mobile-menu-container"),onClick:_},O?c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:ne("mobile-menu-item")},c.a.createElement(i.b,{to:"/me/books"},c.a.createElement(E.m,null)," \ud504\ub85c\ud544")),c.a.createElement("li",{className:ne("mobile-menu-item")},c.a.createElement(i.b,{to:"/upload"},c.a.createElement(E.l,null)," \ucc45 \uc5c5\ub85c\ub4dc")),c.a.createElement("li",{className:ne("mobile-menu-item")},c.a.createElement(i.b,{to:"/search?p="},c.a.createElement(E.g,null)," \ub3c4\uc11c")),c.a.createElement("li",{className:ne("mobile-menu-item")},c.a.createElement(i.b,{to:"/community/reviews"},c.a.createElement(E.b,null)," \ucc45 \ub9ac\ubdf0")),c.a.createElement("li",{className:ne("mobile-menu-item"),onClick:k},c.a.createElement(E.i,null)," \ub85c\uadf8\uc544\uc6c3")):c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:ne("mobile-menu-item")},c.a.createElement(i.b,{to:"/login"},c.a.createElement(E.h,null)," \ub85c\uadf8\uc778")),c.a.createElement("li",{className:ne("mobile-menu-item")},c.a.createElement(i.b,{to:"/signup"},c.a.createElement(E.n,null)," \uac00\uc785")),c.a.createElement("li",{className:ne("mobile-menu-item")},c.a.createElement(i.b,{to:"/community/reviews"},c.a.createElement(E.b,null)," \ucc45 \ub9ac\ubdf0")))))},ce=a(24),le=a.n(ce),oe=a(88),ie=a.n(oe),se=v.a.bind(ie.a),ue=function(){return c.a.createElement("footer",{className:se("footer")},c.a.createElement("div",{className:se("footer_icon")}),c.a.createElement("span",{className:se("footer_text")},"\xa9 HappReads ",le()().format("YYYY")))},me=a(89),de=a.n(me),be=v.a.bind(de.a),pe=function(){var e=Object(r.useState)(!0),t=Object(b.a)(e,2),a=t[0],n=t[1],l=Object(r.useCallback)((function(){window.scrollTo(0,0)}),[]),o=Object(r.useCallback)((function(){var e=window.pageYOffset;n(e<=600)}),[]);return Object(r.useEffect)((function(){return window.addEventListener("scroll",o),function(){window.removeEventListener("scroll",o)}}),[o]),c.a.createElement("button",{className:be(["floating-button",a?"hide":"show"]),onClick:l},"\uc704\ub85c")},Ee=a(90),fe=a.n(Ee);C.a.config(),w.a.defaults.baseURL="https://happread.herokuapp.com/";var ve=function(e){return w.a.get("profile/".concat(e))},Oe=function(e){return{type:"GET_USER",payload:ve(e)}},ge=Object(_.a)((M={},Object(k.a)(M,"GET_USER_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{pending:!0,error:!1})})),Object(k.a)(M,"GET_USER_SUCCESS",(function(e,t){return{pending:!1,error:!1,profile:t.payload.data.user}})),Object(k.a)(M,"GET_USER_FAILURE",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{pending:!1,error:!0})})),Object(k.a)(M,"GET_TOP_READERS_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{pending:!0,error:!1})})),Object(k.a)(M,"GET_TOP_READERS_SUCCESS",(function(e,t){var a=t.payload.data.readers;return Object(S.a)(Object(S.a)({},e),{},{topReaders:a,pending:!1,error:!1})})),Object(k.a)(M,"GET_TOP_READERS_FAILURE",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{pending:!1,error:!0})})),Object(k.a)(M,"GET_TOP_REVIEWERS_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{pending:!0,error:!1})})),Object(k.a)(M,"GET_TOP_REVIEWERS_SUCCESS",(function(e,t){var a=t.payload.data.reviewers;return Object(S.a)(Object(S.a)({},e),{},{topReviewers:a,pending:!1,error:!1})})),Object(k.a)(M,"GET_TOP_REVIEWERS_FAILURE",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{pending:!1,error:!0})})),M),{pending:!1,error:!1,profile:{},topReaders:[],topReviewers:[]}),je=a(91),he=a.n(je),ke=v.a.bind(he.a),Se={read:"\uc77d\uc740 \ucc45",want_read:"\uc77d\uc744 \ucc45",reading:"\uc77d\ub294\uc911"},_e=function(e){var t=e.handleSubmit,a=e.handleCancel,n=e.item,l=e.type,o=Object(r.useState)(l),i=Object(b.a)(o,2),s=i[0],u=i[1],E=Object(r.useState)(Object(S.a)({},n)),f=Object(b.a)(E,2),v=f[0],O=f[1],g=Object(p.c)(),j=Object(p.d)((function(e){return e.login})).profile,h=Object(r.useCallback)((function(e){var t=e.target;u(t.options[t.selectedIndex].value)}),[]),k=Object(r.useCallback)(Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=j.user;try{g(G(t.email,n._id,s))}catch(a){console.log(a)}case 2:case"end":return e.stop()}}),e)}))),[n,s,j,g]),_=Object(r.useCallback)((function(e){var t=e.target;O(Object(S.a)(Object(S.a)({},v),{},{title:t.value}))}),[v]),N=Object(r.useCallback)((function(e){var t=e.target;O(Object(S.a)(Object(S.a)({},v),{},{genres:t.value}))}),[v]),w=Object(r.useCallback)((function(e){var t=e.target;O(Object(S.a)(Object(S.a)({},v),{},{contents:t.value}))}),[v]);return c.a.createElement("div",{className:"modal-container"},c.a.createElement("div",{className:"modal-overlay"}),c.a.createElement("div",{className:"modal"},c.a.createElement("p",{className:ke("exit")},c.a.createElement("span",{role:"img","aria-label":"cancel",onClick:a},"\u274c")),l?c.a.createElement(c.a.Fragment,null,c.a.createElement("img",{src:n.thumbnail,alt:n.id}),c.a.createElement("div",{className:ke("status-wrapper")},c.a.createElement("div",{className:ke("read-status")},c.a.createElement("span",null,"\ud604\uc7ac \uc0c1\ud0dc:"),c.a.createElement("p",{className:ke("current-status")},Se[l])),c.a.createElement("select",{className:ke("select"),value:s,onChange:h},c.a.createElement("option",{value:"want_read"},"\uc77d\uc744 \ucc45"),c.a.createElement("option",{value:"reading"},"\uc77d\b\ub294\uc911"),c.a.createElement("option",{value:"read"},"\uc77d\uc74c")),c.a.createElement("div",{className:ke("button-container")},c.a.createElement("button",{className:ke("ok-btn"),onClick:k},"\uc218\uc815"),c.a.createElement("button",{className:ke("cancel-btn"),onClick:a},"\ucde8\uc18c")))):c.a.createElement("div",{className:ke("book-info-container")},c.a.createElement("div",{className:ke("img-container")},c.a.createElement("img",{src:v.thumbnail,alt:v.title})),c.a.createElement("form",{className:ke("book-info-form"),onSubmit:t(v)},c.a.createElement("input",{value:v.title,placeholder:"\uc81c\ubaa9",onChange:_}),c.a.createElement("input",{value:v.genres,placeholder:"\uc7a5\ub974",onChange:N}),c.a.createElement("textarea",{value:v.contents,placeholder:"\uc694\uc57d",onChange:w}),c.a.createElement("button",{className:"ok-btn",type:"submit"},"\uc218\uc815")))))},Ne=v.a.bind(fe.a),we=function(){var e=Object(r.useState)({type:1,openModal:!1,lastPos:90,item:{},status:""}),t=Object(b.a)(e,2),a=t[0],n=t[1],l=Object(p.c)(),o=Object(p.d)((function(e){return e.login})),s=o.profile,u=o.isLoggedIn,E=Object(p.d)((function(e){return e.user})).profile,f=Object(r.useCallback)(Object(d.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=$())&&l(x(t)),a=window.location.hash.split("/"),n=a[a.length-1],l(Oe(n));case 5:case"end":return e.stop()}}),e)}))),[l]);Object(r.useEffect)((function(){return f(),window.scrollTo(0,0),function(){}}),[f]);var v=Object(r.useCallback)((function(e,t,a){return function(){var n=Object(d.a)(m.a.mark((function n(r){var c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,l(B(e,t,a));case 3:c=n.sent,200===c.value.status&&f(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}),[l,f]),O=Object(r.useCallback)((function(e){return function(t){n(Object(S.a)(Object(S.a)({},a),{},{openModal:!0,item:e}))}}),[a]),g=Object(r.useCallback)((function(e){n(Object(S.a)(Object(S.a)({},a),{},{openModal:!1}))}),[a]),j=Object(r.useCallback)((function(e){return function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!u){t.next=13;break}return t.prev=2,t.next=5,l((r=Object(S.a)({},e),{type:"EDIT_BOOK",payload:z(r)}));case 5:n=t.sent,200===n.value.status&&f(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:case"end":return t.stop()}var r}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}),[l,f,u]),h=a.openModal,k=a.item;return c.a.createElement("section",{className:Ne("book-shelve")},h?c.a.createElement(_e,{handleCancel:g,handleSubmit:j,item:k}):null,c.a.createElement("div",null,c.a.createElement("p",{className:Ne("shelve-header")},E?E.email:"","\uc758 \ucc45\uc7a5")),c.a.createElement("div",null,c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"\ucee4\ubc84"),c.a.createElement("th",null,"\uc81c\ubaa9"),c.a.createElement("th",null,"\uc800\uc790"),c.a.createElement("th",null,"\ud3c9\uade0"),c.a.createElement("th",null,"\uc0dd\uc131 \ub0a0\uc9dc"),(null===s||void 0===s?void 0:s.user)&&E&&E._id===s.user._id?c.a.createElement("th",null,"\uc124\uc815"):null)),c.a.createElement("tbody",null,function(){var e,t=s.user;return t?null===t||void 0===t||null===(e=t.uploaded)||void 0===e?void 0:e.map((function(e){return c.a.createElement("tr",{key:e._id},c.a.createElement("td",null,c.a.createElement(i.b,{to:"/book/".concat(e._id)},c.a.createElement("img",{src:e.thumbnail,alt:e.thumbnail}))),c.a.createElement("td",null,c.a.createElement(i.b,{to:"/book/".concat(e._id)},e.title)),c.a.createElement("td",null,e.authors.length>1?"".concat(e.authors[0]," *"):e.authors[0]),c.a.createElement("td",null,e.votes?ee(e.votes):0),c.a.createElement("td",null,le()(e.createdAt).format("YY\ub144MM\uc6d4DD\uc77c HH:MM:SS")),c.a.createElement("td",{className:Ne("settings uploaded")},c.a.createElement("p",{onClick:O(e)},"\uc218\uc815"),c.a.createElement("p",{onClick:v(t._id,e._id)},"X")))})):null}()))))},ye=a(92),Ce=function(e){var t=e.title,a=e.keywords,n=e.description;return c.a.createElement(ye.a,null,n&&c.a.createElement("meta",{name:"description",content:n}),a&&c.a.createElement("meta",{name:"keywords",content:a}),c.a.createElement("title",null,t),c.a.createElement("meta",{property:"og:title",content:t}),c.a.createElement("meta",{name:"twitter:title",content:t}))},Re=a(95),Ie=a.n(Re),Le=v.a.bind(Ie.a),Pe=function(){return c.a.createElement("section",{className:Le("home-section")},c.a.createElement("section",{className:Le("words")},c.a.createElement("h3",null,"With Happyness"),c.a.createElement("h4",null,"\uc790\uc2e0\uc758 \uc778\uc0dd \ucc45\uc744 \ucc3e\uc544\ubcf4\uc138\uc694")))},Te=a(96),Ue=a.n(Te),De=a(97),xe=a.n(De),Ge=(a(210),a(211),a(98)),Be=a.n(Ge),Fe=a(99),Ae=a.n(Fe),He=v.a.bind(Ae.a),Ve=function(e){var t=e.children;return c.a.createElement("div",{className:He("scroll-item")},t)},Me=a(284),Ke=v.a.bind(xe.a),We=function(e){var t,a=e.books,n=Object(r.useState)({dots:!1,infinite:!0,speed:500,slidesToShow:4,slidesToScroll:4,adaptiveHeight:!0,autoplay:!0,autoplaySpeed:4e3}),l=Object(b.a)(n,2),o=l[0],s=l[1],u=Object(r.useCallback)((function(){var e=window.innerWidth;s(e>=0&&e<=425?Object(S.a)(Object(S.a)({},o),{},{slidesToShow:2,slidesToScroll:2}):e>=426&&e<=1024?Object(S.a)(Object(S.a)({},o),{},{slidesToShow:4,slidesToScroll:4}):Object(S.a)(Object(S.a)({},o),{},{slidesToShow:6,slidesToScroll:6}))}),[o]);return Object(r.useEffect)((function(){return u(),window.addEventListener("resize",u),function(){window.removeEventListener("resize",u)}}),[]),c.a.createElement("section",{className:Ke("slider-container")},c.a.createElement(Be.a,o,null===a||void 0===a||null===(t=a.slice(0,8))||void 0===t?void 0:t.map((function(e){return c.a.createElement(Ve,{key:Object(Me.a)()},c.a.createElement(i.b,{to:"/book/".concat(e._id)},c.a.createElement("img",{src:e.thumbnail,alt:e.title})))}))))},Ye=a(36),qe=a(100),ze=a.n(qe),Je=v.a.bind(ze.a),Xe=window.location.href.includes("/me"),Qe=Object(p.b)((function(e){return{profile:e.login.profile,success:e.login.success}}),(function(e){return{postShelve:function(t,a,n){return e(G(t,a,n))},deleteShelve:function(t,a,n){return e(B(t,a,n))}}}))((function(e){var t=e.from,a=e.type,n=Object(r.useState)(!1),l=Object(b.a)(n,2),o=l[0],s=l[1];if("home"===t){var u=e.book;return c.a.createElement("div",{className:Je("book")},c.a.createElement("img",{src:u.thumbnail,alt:"book"}),c.a.createElement("p",null,u.title))}if("search"===t){var m=e.book;return c.a.createElement("li",{className:Je("ser-bg")},c.a.createElement("div",{className:Je("ser-book")},c.a.createElement(i.b,{to:"/book/".concat(m._id)},c.a.createElement("img",{src:m.thumbnail,alt:"book"}))),c.a.createElement("div",{className:Je("ser-info")},c.a.createElement(i.b,{to:"/book/".concat(m._id)},c.a.createElement("h3",{className:Je("ser-title")},m.title)),c.a.createElement("p",{className:Je("ser-author")},function(e){var t="";return e.forEach((function(e){t+=e})),t}(m.authors)),c.a.createElement("p",{className:Je("ser-contents")},m&&m.contents?m.contents.length>100?"".concat(m.contents.substr(0,100),"..."):m.contents:"\uc785\ub825\ub41c \ub0b4\uc6a9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4")))}if("profile"===t){var d=e.book.book,p=function(){s((function(e){return!e}))};return c.a.createElement("div",{className:Je("shelve")},c.a.createElement(i.b,{to:"/book/".concat(null===d||void 0===d?void 0:d._id)},c.a.createElement("p",{className:Je("title")},null===d||void 0===d?void 0:d.title)),Xe&&c.a.createElement("div",{className:Je("setting-btns")},c.a.createElement("div",{className:Je("edit-container")},c.a.createElement("span",{className:Je("edit"),onClick:p},c.a.createElement(E.c,null)),o&&c.a.createElement(_e,{type:a,item:d,handleCancel:p})),c.a.createElement("div",null,c.a.createElement("span",{className:Je("delete"),onClick:function(t){return function(){var a=e.deleteShelve,n=e.book;a(e.profile.user._id,n._id,t)}}(a)},c.a.createElement(E.k,null)))))}})),Ze=(a(278),Object(r.forwardRef)((function(e,t){var a=e.text,n=e.handleClick;return c.a.createElement("button",{className:"load-more",type:"button",ref:t,onClick:n},a)}))),$e=a(101),et=a.n($e),tt=v.a.bind(et.a),at=Object(r.forwardRef)((function(e,t){var a=e.from,n=e.booklist,r=e.type,l=e.handleMore,o=e.done;return"home"===a?c.a.createElement("section",{className:tt("book-list")},n?"\uc804\uccb4"===r&&n.length>0?c.a.createElement(c.a.Fragment,null,n.map((function(e){return c.a.createElement(i.b,{to:"/book/".concat(e._id),key:Object(Me.a)()},c.a.createElement(Qe,{book:e,from:a}))})),!1===o&&c.a.createElement("div",{className:tt("more-book-btn"),onClick:l},c.a.createElement(Ze,{text:"\ub354 \ubcf4\uae30+",ref:t}))):c.a.createElement(c.a.Fragment,null,n.filter((function(e){var t;return null===e||void 0===e||null===(t=e.genres)||void 0===t?void 0:t.includes(r)})).map((function(e){return c.a.createElement(i.b,{to:"/book/".concat(e._id),key:Object(Me.a)()},c.a.createElement(Qe,{book:e,from:a}))})),n.filter((function(e){var t;return null===e||void 0===e||null===(t=e.genres)||void 0===t?void 0:t.includes(r)})).length>0&&!1===o&&n.length%15!==0&&c.a.createElement("div",{className:tt("more-book-btn"),onClick:l},c.a.createElement(Ze,{text:"\ub354 \ubcf4\uae30+",ref:t}))):c.a.createElement(Ye.ChasingDots,{color:"white",size:60})):"search"===a?c.a.createElement("section",{className:tt("ser-container")},c.a.createElement("ul",{className:tt("ser-ul")},n.map((function(e){return c.a.createElement(Qe,{book:e,from:a,key:Object(Me.a)()})})),!o&&c.a.createElement("li",{className:"ser-load-more"},c.a.createElement(Ze,{text:"\ub354 \ubcf4\uae30+",ref:t,handleClick:l})))):"profile"===a?c.a.createElement("section",null,c.a.createElement("ul",null,n.map((function(e){return c.a.createElement(Qe,{book:e,from:a,key:Object(Me.a)(),type:r})})))):void 0})),nt=a(102),rt=a.n(nt),ct=a(37),lt=a(32),ot=v.a.bind(rt.a),it=function(e){var t=e.title,a=e.books;return c.a.createElement("section",{className:ot("vertical")},c.a.createElement("p",{className:ot("vertical-item-title")},t,c.a.createElement(ct.a,{className:ot("book-icon"),icon:lt.c})),c.a.createElement("section",{className:ot("vertical-item-list")},null===a||void 0===a?void 0:a.map((function(e){return c.a.createElement(i.b,{key:Object(Me.a)(),to:"/book/".concat(e._id)},c.a.createElement(Qe,{book:e,from:"home"}))}))))},st=["\uc804\uccb4","\uc18c\uc124","IT","\uacbd\uc81c","\uad50\uc591","\uc790\uae30\uacc4\ubc1c","\uacfc\ud559","\uc5ed\uc0ac","\uc815\uce58","\uae30\ud0c0"],ut=v.a.bind(Ue.a),mt=function(e){var t=e.booklist,a=e.handleClick,n=e.sliderBooks,l=e.recentBooks,o=e.popularBooks,i=e.type,s=e.done,u=Object(r.useState)(!0),m=Object(b.a)(u,2),d=m[0],E=m[1],f=Object(r.useState)(1),v=Object(b.a)(f,2),O=v[0],g=v[1],j=Object(p.c)(),h=Object(p.d)((function(e){return e.books})).allBookDone,k=Object(r.useRef)(null);return c.a.createElement("section",{className:ut("home-content")},c.a.createElement(We,{books:n}),c.a.createElement(it,{title:"\ucd5c\uadfc \uacf5\uc720\ub41c \ucc45",books:l.slice(0,15)}),c.a.createElement(it,{title:"\ud3c9\uc810 \uc88b\uc740 \ucc45",books:o}),c.a.createElement("section",{className:ut("books-wrapper")},c.a.createElement("section",{className:ut("book-category-section")},c.a.createElement("div",{className:ut(["book-category-div","".concat(d?"hide":"more")])},c.a.createElement("ul",{className:ut("book-category-ul")},d?st.slice(0,7).map((function(e){return c.a.createElement("li",{key:Object(Me.a)(),className:ut("book-category-li","".concat(i===e?"selected":"")),onClick:a,"data-value":e},e)})):st.map((function(e){return c.a.createElement("li",{key:Object(Me.a)(),className:ut("book-category-li","".concat(i===e?"selected":"")),onClick:a,"data-value":e},e)})))),c.a.createElement("div",{className:ut("more-container"),onClick:function(){E((function(e){return!e}))}},d?"\ub354 \ubcf4\uae30":"\uc228\uae30\uae30",c.a.createElement(ct.a,{className:ut("more"),icon:d?lt.a:lt.b}))),c.a.createElement(at,{booklist:t,handleMore:function(){h||(j(J("\uc804\uccb4",O+1)),g(O+1)),k.current&&k.current.blur()},from:"home",type:i,done:s,ref:k})))},dt=a(103),bt=a.n(dt),pt=v.a.bind(bt.a),Et=function(){return c.a.createElement("section",{className:pt("loading")},c.a.createElement(Ye.ChasingDots,{color:"white",size:60}))},ft=function(){var e=Object(r.useState)(!0),t=Object(b.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)("\uc804\uccb4"),o=Object(b.a)(l,2),i=o[0],s=o[1],u=Object(p.c)(),m=Object(p.d)((function(e){return e.books})),d=m.allBookDone,E=m.sliderPending,f=m.recentPending,v=m.popularPending,O=m.books,g=m.sliderBooks,j=m.recentBooks,h=m.popularBooks;Object(r.useEffect)((function(){n(!0),u(J("\uc804\uccb4",1)),u({type:"GET_SLIDER_BOOKS",payload:w.a.get("".concat(V,"book/sliders"))}),u({type:"GET_RECENT_BOOKS",payload:w.a.get("".concat(V,"books/recent"))}),u({type:"GET_POPULAR_BOOKS",payload:w.a.get("".concat(V,"books/popular"))}),n(!1)}),[u]);var k=Object(r.useCallback)((function(e){var t=e.target.dataset;s(t.value)}),[s]);return c.a.createElement("main",null,c.a.createElement(Ce,{title:"Home | HappReads",description:"\ucc45\ub4e4\uc744 \uacf5\uc720 \uadf8\ub9ac\uace0 \ub9ac\ubdf0\ud558\uba70 \uc77d\uc5b4\ubcf4\uc9c0 \ubabb\ud55c \uc0c8\ub85c\uc6b4 \ucc45\uc744 \ubc1c\uacac\ud558\uc138\uc694!!",keywords:"\ucc45, \ucc45 \uacf5\uc720, \ucc45 \ub9ac\ubdf0, HappReads, happreads"}),a||E||f||v?c.a.createElement(Et,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(Pe,null),c.a.createElement(mt,{booklist:O,sliderBooks:g,recentBooks:j,popularBooks:h,handleClick:k,done:d,type:i})))},vt=a(51),Ot=a.n(vt),gt=a(104),jt=a.n(gt),ht=v.a.bind(jt.a),kt=function(e){var t=e.type;return c.a.createElement("div",{className:ht("social-login")},c.a.createElement("h2",null,"login"===t?"\ub85c\uadf8\uc778":"\ud68c\uc6d0\uac00\uc785"),c.a.createElement("button",{className:ht("github","button")},c.a.createElement("span",{className:ht("icon")},c.a.createElement(E.d,null)),c.a.createElement("span",null,"Github\uc73c\ub85c \uc2dc\uc791\ud558\uae30")))},St=v.a.bind(Ot.a),_t=function(e){var t=e.loginRequest,a=(e.login_success,e.login_pending,Object(r.useState)("")),n=Object(b.a)(a,2),l=n[0],o=n[1],s=Object(r.useState)(""),u=Object(b.a)(s,2),m=u[0],d=u[1],p=Object(r.useCallback)((function(e){e.preventDefault(),t(l,m)}),[l,m,t]),E=Object(r.useCallback)((function(e){o(e.target.value)}),[]),f=Object(r.useCallback)((function(e){d(e.target.value)}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:St("login-form","form-container")},c.a.createElement(kt,{type:"login"}),c.a.createElement("form",{onSubmit:p},c.a.createElement("input",{type:"email",value:l,onChange:E,placeholder:"\uc774\uba54\uc77c",required:!0}),c.a.createElement("input",{type:"password",value:m,onChange:f,placeholder:"\ube44\ubc00\ubc88\ud638",required:!0}),c.a.createElement("input",{type:"submit",value:"\ub85c\uadf8\uc778"})),c.a.createElement(i.b,{to:"/signup"},c.a.createElement("button",null,"\uac00\uc785"))))},Nt=a(105),wt=a.n(Nt),yt=v.a.bind(wt.a),Ct=function(e){var t=e.type,a=e.children;return c.a.createElement("div",{className:yt(["notice-container",t])},a)};C.a.config();var Rt,It=function(){var e=Object(p.d)((function(e){return e.login})),t=e.isLoggedIn,a=e.loginPending,n=e.loginSuccess,r=e.loginError,l=Object(p.c)(),o=function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l({type:"LOGIN",payload:I(t,a)});case 3:n=e.sent,r=n.value,c=r.data,200===r.status&&(o=c.token,localStorage.setItem("atk",o)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}var o}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}();return!0===t?c.a.createElement(s.a,{to:"/"}):c.a.createElement(c.a.Fragment,null,c.a.createElement(Ce,{title:"Login | HappReads"}),r&&c.a.createElement(Ct,{type:"error"},"\ub4f1\ub85d\ub418\uc9c0 \uc54a\uc740 \uc774\uba54\uc77c \ud639\uc740 \ube44\ubc00\ubc88\ud638\uac00 \ud2c0\ub838\uc2b5\ub2c8\ub2e4"),c.a.createElement(_t,{loginRequest:o,login_pending:a,login_success:n}))},Lt=v.a.bind(Ot.a),Pt=function(e){var t=e.handleSignUp,a=Object(r.useState)(""),n=Object(b.a)(a,2),l=n[0],o=n[1],i=Object(r.useState)({p1:"",p2:""}),s=Object(b.a)(i,2),u=s[0],m=s[1],d=Object(r.useCallback)((function(e){var t=e.target;o(t.value)}),[]),p=Object(r.useCallback)((function(e){var t=e.target;m(Object(S.a)(Object(S.a)({},u),{},{p1:t.value}))}),[u]),E=Object(r.useCallback)((function(e){var t=e.target;m(Object(S.a)(Object(S.a)({},u),{},{p2:t.value}))}),[u]);return c.a.createElement("section",{className:Lt("signup-form","form-container")},c.a.createElement(kt,{type:"signup"}),c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=u.p1;a===u.p2&&t(l,a)}},c.a.createElement("input",{type:"email",value:l,onChange:d,placeholder:"\uc774\uba54\uc77c",required:!0}),c.a.createElement("input",{type:"password",value:u.p1,onChange:p,placeholder:"\ube44\ubc00\ubc88\ud638",required:!0}),c.a.createElement("input",{type:"password",value:u.p2,onChange:E,placeholder:"\ube44\ubc00\ubc88\ud638 \uc7ac\uc785\ub825",required:!0}),c.a.createElement("input",{type:"submit",value:"\uac00\uc785"})))};C.a.config(),w.a.defaults.baseURL="https://happread.herokuapp.com/";var Tt=function(e,t){return w.a.post("signup",{email:e,password:t})},Ut=function(e,t){return{type:"SIGNUP",payload:Tt(e,t)}},Dt=Object(_.a)((Rt={},Object(k.a)(Rt,"SIGNUP_PENDING",(function(e,t){return{signup_pending:!0,signup_success:!1,signup_error:!1}})),Object(k.a)(Rt,"SIGNUP_SUCCESS",(function(e,t){return{signup_pending:!1,signup_success:!0}})),Object(k.a)(Rt,"SIGNUP_FAILURE",(function(e,t){return{signup_pending:!1,signup_error:!0}})),Rt),{signup_pending:!1,signup_success:!1,signup_error:!1});C.a.config();var xt,Gt=function(e){var t=e.history,a=Object(p.c)(),n=Object(p.d)((function(e){return e.signup})),r=n.signup_pending,l=n.signup_success,o=n.signup_error,i=Object(p.d)((function(e){return e.login})).isLoggedIn,u=function(){var e=Object(d.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(Ut(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return i?c.a.createElement(s.a,{to:"/HappReads-front"}):l?c.a.createElement(s.a,{to:"/login"}):c.a.createElement(c.a.Fragment,null,c.a.createElement(Ce,{title:"SignUp | HappReads"}),c.a.createElement(Pt,{history:t,handleSignUp:u,signup_pending:r,signup_success:l,signup_error:o}))},Bt=a(11),Ft=a.n(Bt),At=function(e){var t,a,n,r,l,o,s=e.from,u=e.profile,m=e.type;return"uploaded"!==m?s.includes("/me")?u&&(null===(t=u[m])||void 0===t?void 0:t.length)>0?c.a.createElement("div",null,c.a.createElement(at,{booklist:u[m],from:"profile",type:m})):c.a.createElement("p",{className:Ft()("recent-empty")},"\ucd5c\uadfc \uc544\ubb34 \ud65c\ub3d9\ub3c4 \uc5c6\uc2b5\ub2c8\ub2e4."):u&&(null===(a=u[m])||void 0===a?void 0:a.length)>0?c.a.createElement("div",null,c.a.createElement(at,{booklist:u[m],from:"profile"})):c.a.createElement("p",{className:Ft()("recent-empty")},"\ucd5c\uadfc \uc544\ubb34 \ud65c\ub3d9\ub3c4 \uc5c6\uc2b5\ub2c8\ub2e4."):s.includes("/me")?u&&(null===u||void 0===u||null===(n=u.uploaded)||void 0===n?void 0:n.length)>0?c.a.createElement("div",{className:Ft()("uploaded-list")},null===u||void 0===u||null===(r=u.uploaded)||void 0===r?void 0:r.map((function(e){return c.a.createElement("div",{className:Ft()("uploaded-img-wrapper"),key:Object(Me.a)()},c.a.createElement("img",{className:Ft()("uploaded-img"),src:e.thumbnail,alt:e.thumbnail}),c.a.createElement("div",{className:Ft()("to-detail")},c.a.createElement(i.b,{to:"/book/".concat(e._id)},e.title)))}))):c.a.createElement("p",{className:Ft()("recent-empty")},"\ucd5c\uadfc \uc544\ubb34 \ud65c\ub3d9\ub3c4 \uc5c6\uc2b5\ub2c8\ub2e4."):u&&(null===u||void 0===u||null===(l=u.uploaded)||void 0===l?void 0:l.length)>0?c.a.createElement("div",{className:Ft()("uploaded-list")},null===u||void 0===u||null===(o=u.uploaded)||void 0===o?void 0:o.map((function(e){return c.a.createElement("div",{className:Ft()("uploaded-img-wrapper"),key:Object(Me.a)()},c.a.createElement("img",{className:Ft()("uploaded-img"),src:e.thumbnail,alt:e.thumbnail}),c.a.createElement("div",{className:Ft()("to-detail")},c.a.createElement(i.b,{to:"/book/".concat(e._id)},"\uc0c1\uc138 \ud398\uc774\uc9c0")))}))):c.a.createElement("p",{className:Ft()("recent-empty")},"\ucd5c\uadfc \uc544\ubb34 \ud65c\ub3d9\ub3c4 \uc5c6\uc2b5\ub2c8\ub2e4.")},Ht=function(e){var t=e.history.location,a=e.from,n=e.profile,l=Object(r.useState)(!0),o=Object(b.a)(l,2),s=o[0],u=o[1],E=Object(p.d)((function(e){return e.login})).pending,f=Object(p.d)((function(e){return e.user})).pending,v=Object(p.c)(),O=Object(r.useCallback)(function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{v(Oe(t))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v]);return Object(r.useEffect)((function(){if(u(!0),t.pathname.includes("/me")){var e=t.pathname.substring(1).split("/")[1];O(e)}u(!1)}),[O,t.pathname]),c.a.createElement(c.a.Fragment,null,s||E||f?c.a.createElement(Et,null):c.a.createElement("section",null,c.a.createElement("section",{className:Ft()("uploaded")},c.a.createElement("div",{className:Ft()("uploaded-head")},"/me"===a?c.a.createElement(i.b,{to:n&&n._id?"shelve/".concat(n._id):"/"},c.a.createElement("h2",null,"\uc5c5\ub85c\ub4dc \ud55c \ucc45")):c.a.createElement("h2",null,"\uc5c5\ub85c\ub4dc \ud55c \ucc45")),c.a.createElement("div",{className:Ft()("uploaded-body")},c.a.createElement(At,{from:a,profile:n,type:"uploaded"}))),c.a.createElement("section",{className:Ft()("want-read")},c.a.createElement("div",{className:Ft()("want-read-head")},c.a.createElement("h2",null,"\uc77d\uc744 \ucc45 (",n&&n.want_read?n.want_read.length:0,")")),c.a.createElement("div",{className:Ft()("want-read-body")},c.a.createElement(At,{from:a,profile:n,type:"want_read"})),c.a.createElement("div",null)),c.a.createElement("section",{className:Ft()("currently-reading")},c.a.createElement("div",{className:Ft()("currently-head")},c.a.createElement("h2",null,"\ud604\uc7ac \uc77d\uace0 \uc788\ub294 \ucc45 (",n&&n.reading?null===n||void 0===n?void 0:n.reading.length:0,")")),c.a.createElement("div",{className:Ft()("currently-body")},c.a.createElement(At,{from:a,profile:n,type:"reading"}))),c.a.createElement("section",{className:Ft()("read")},c.a.createElement("div",{className:Ft()("read-head")},c.a.createElement("h2",null,"\uc77d\uc740 \ucc45 (",n&&n.read?n.read.length:0,")")),c.a.createElement("div",{className:Ft()("read-body")},c.a.createElement(At,{from:a,profile:n,type:"read"})))))},Vt=a(106),Mt=a.n(Vt),Kt=a(122),Wt=a(107),Yt=a.n(Wt),qt=v.a.bind(Yt.a),zt=["1","2","3","4","5"],Jt={color:"#f1c40f",cursor:"pointer"},Xt=function(e){var t=e.book,a=e.postVote,n=e.votes,l=Object(p.d)((function(e){return e.login})),o=l.isLoggedIn,i=l.profile,s=Object(r.useCallback)(function(){var e=Object(d.a)(m.a.mark((function e(n){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._id,c=i.user.email,e.next=4,a(r,c,n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,i,a]),u=Object(r.useCallback)((function(e){for(var t=e.target;"svg"!==t.nodeName;)t=t.parentNode;var a=t.dataset.rating;o?s(a):alert("\ub85c\uadf8\uc778 \ud544\uc694\ud55c \uc11c\ube44\uc2a4 \uc785\ub2c8\ub2e4")}),[o,s]);return c.a.createElement("div",{className:qt("rater")},zt.map((function(e,t){return c.a.createElement(E.j,{key:t,"data-rating":t+1,onClick:u,style:n>=t+1?Jt:{}})})))},Qt=a(108),Zt=a.n(Qt);C.a.config(),w.a.defaults.baseURL="https://happread.herokuapp.com/";var $t,ea=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return w.a.get("reviews?limit=".concat(e,"&page=").concat(t))},ta=function(e,t,a,n){return w.a.post("book/".concat(e,"/review"),{name:t,content:a,book:n})},aa=function(e,t){return w.a.post("book/review/".concat(e),{content:t})},na=function(e,t,a){return w.a.post("review/like",{type:e,id:t,uid:a})},ra=function(e){return{type:"GET_REVIEWS",payload:ea(e.limit,e.page)}},ca=function(e){return{type:"GET_REVIEW",payload:(t=e,w.a.get("book/".concat(t,"/review")))};var t},la=function(e,t,a,n){return{type:"POST_REVIEW",payload:ta(e,t,a,n)}},oa=function(e,t){return{type:"EDIT_REVIEW",payload:aa(e,t)}},ia=function(e,t,a){return{type:"LIKE_REVIEW",payload:na(e,t,a)}},sa=Object(_.a)((xt={},Object(k.a)(xt,"GET_REVIEWS_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{loadReviewsPending:!0,loadReviewsError:!1,loadReviewsSuccess:!1,loadReviewsDone:!1})})),Object(k.a)(xt,"GET_REVIEWS_SUCCESS",(function(e,t){var a=t.payload.data,n=a.reviews,r=a.page,c=a.hasMore;return Object(S.a)(Object(S.a)({},e),{},{reviews:1!==parseInt(r)?[].concat(Object(H.a)(e.reviews),Object(H.a)(n)):Object(H.a)(n),loadReviewsPending:!1,loadReviewsSuccess:!0,hasMore:c})})),Object(k.a)(xt,"GET_REVIEWS_FAILURE",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{loadReviewsPending:!1,loadReviewsError:!0,loadReviewsDone:!1})})),Object(k.a)(xt,"POST_REVIEW_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{postReviewPending:!0,postReviewSuccess:!1,postReviewError:!1})})),Object(k.a)(xt,"POST_REVIEW_SUCCESS",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{reviews:t.payload.data.reviews,postReviewPending:!1,postReviewSuccess:!0})})),Object(k.a)(xt,"POST_REVIEW_FAILURE",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{postReviewPending:!1,postReviewError:!0})})),Object(k.a)(xt,"GET_REVIEW_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{error:!1,pending:!0,success:!1})})),Object(k.a)(xt,"GET_REVIEW_SUCCESS",(function(e,t){return{reviews:t.payload.data.reviews,error:!1,pending:!1,success:!0}})),Object(k.a)(xt,"GET_REVIEW_FAILURE",(function(e,t){return{error:!0,pending:!1,success:!1}})),Object(k.a)(xt,"EDIT_REVIEW_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{pending:!0,error:!1,success:!1})})),Object(k.a)(xt,"EDIT_REVIEW_SUCCESS",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{reviews:t.payload.data.reviews,pending:!1,error:!1,success:!0})})),Object(k.a)(xt,"EDIT_REVIEW_FAILURE",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{pending:!1,error:!0,success:!1})})),Object(k.a)(xt,"LIKE_REVIEW_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{pending:!0,error:!1})})),Object(k.a)(xt,"LIKE_REVIEW_SUCCESS",(function(e,t){var a=t.payload.data.review,n=-1;e.reviews.forEach((function(e,t){e._id===a._id&&(n=t)})),e.reviews[n]=a;var r=e.reviews;return Object(S.a)(Object(S.a)({},e),{},{pending:!1,error:!1,success:!0,reviews:Object(H.a)(r)})})),Object(k.a)(xt,"LIKE_REVIEW_FAILURE",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{pending:!1,error:!0})})),xt),{reviews:[],pending:!1,success:!1,error:!1,loadReviewsPending:!1,loadReviewsError:!1,loadReviewsSuccess:!1,loadReviewsDone:!1,hasMore:!1,postReviewPending:!1,postReviewSuccess:!1,postReviewError:!1}),ua=v.a.bind(Zt.a),ma=function(){var e=Object(r.useState)(""),t=Object(b.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(!1),o=Object(b.a)(l,2),s=o[0],u=o[1],f=Object(r.useRef)(null),v=(Object(r.useRef)(null),Object(p.c)()),O=Object(p.d)((function(e){return e.login})),g=O.isLoggedIn,j=O.profile,h=Object(p.d)((function(e){return e.review})).reviews,k=Object(p.d)((function(e){return e.books})).book,S=Object(r.useCallback)(Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$())try{v(x(t))}catch(a){console.log(a)}case 2:case"end":return e.stop()}}),e)}))),[v]),_=Object(r.useCallback)(function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=j.user.email;try{v(la(k._id,a,t,k)),S()}catch(n){console.log(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[k,S,v,j]),N=Object(r.useCallback)((function(e){var t=e.target;n(t.value)}),[]),w=Object(r.useCallback)((function(e){e.preventDefault(),g?a.length>0&&(_(a),n("")):alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4")}),[g,a,_]),y=Object(r.useCallback)(function(){var e=Object(d.a)(m.a.mark((function e(t,a,n){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(ia(t,a,null===j||void 0===j||null===(r=j.user)||void 0===r?void 0:r._id));case 3:c=e.sent,200===c.value.status&&(n.style.fill="pink",S()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),[v,j,S]),C=Object(r.useCallback)((function(e){var t=e.currentTarget,a=e.target,n=t.getAttribute("data-value");y("like",n,a)}),[y]),R=Object(r.useCallback)((function(){u((function(e){return!e}))}),[]),I=function(e){var t=e.item;return c.a.createElement("article",{key:Object(Me.a)(),className:ua("review-item")},c.a.createElement("div",null,c.a.createElement(i.b,{to:t.reviewer?"/profile/".concat(t.reviewer._id,"/books"):""},c.a.createElement("img",{className:ua("user-img"),src:t.reviewer?t.reviewer.avatarUrl:"",alt:t.reviewer?t.reviewer.avatarUrl:""}),c.a.createElement("span",{className:ua("user")},t.reviewer?t.reviewer.email:""))),c.a.createElement("span",{className:ua("date")},t.createdAt?le()(t.createdAt).format("YYYY\ub144 MM\uc6d4 DD\uc77c HH:MM:SS"):""),c.a.createElement("article",{style:{marginTop:"10px"}},c.a.createElement("p",{className:ua("user-review")},!s&&t.content.length>30?"".concat(t.content.substr(0,30),"..."):t.content),t.content.length>20&&c.a.createElement("p",{className:ua("more"),onClick:R},s?"\uc904\uc774\uae30":"\ub354\ubcf4\uae30")),c.a.createElement("div",{className:ua("review-footer")},c.a.createElement("span",{className:ua("heart"),onClick:C,"data-value":t._id},c.a.createElement(E.e,null)),c.a.createElement("span",null,t.likes.length," \uc88b\uc544\uc694")))};return c.a.createElement("section",{className:ua("review")},c.a.createElement("p",{className:ua("review-title")},"\ub9ac\ubdf0"),c.a.createElement("section",{className:ua("form-container")},c.a.createElement("form",{onSubmit:w},c.a.createElement("textarea",{placeholder:"\ucc45 \ub9ac\ubdf0\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694",onChange:N,onInput:function(e){var t=e.target,a=e.key;0===t.value.length?t.style.height="50px":t.style.height="auto","Backspace"!==a?(console.log(t.scrollHeight),t.scrollHeight<=130?t.style.height="".concat(t.scrollHeight,"px"):t.style.height="".concat(130,"px")):(t.style.height="".concat(t.scrollHeight,"px"),0===t.value.length&&(t.style.height="50px"))},value:a,maxLength:500}),c.a.createElement("input",{type:"submit",value:"\ub4f1\ub85d",ref:f}))),c.a.createElement("section",{className:ua("review-list-wrapper")},h?h.map((function(e){return c.a.createElement(I,{key:Object(Me.a)(),item:e})})):null))},da=a(109),ba=a.n(da),pa=a(29),Ea=v.a.bind(ba.a),fa=function(e){var t=e.votes,a=Object(r.useRef)(),n=Object(r.useState)(null),l=Object(b.a)(n,2),o=l[0],i=l[1],s=Object(r.useCallback)((function(){for(var e=a.current,n=20,r=20,c=e.width.baseVal.value-n-20,l=e.height.baseVal.value-r-20,o=[],i=function(e){var a=t.filter((function(t){return parseInt(t.vote)===e}));o.push({rate:e,count:a.length})},s=0;s<=5;s++)i(s);var u=Object(pa.d)().range([0,c]).domain([1,2,3,4,5]).paddingInner(.5),m=Object(pa.e)().range([l,0]).domain([0,Object(pa.c)(o,(function(e){return parseInt(e.count)<5?5:Object(pa.c)(o,(function(e){return parseInt(e.count)}))}))]),d=Object(pa.f)(a.current).append("g").attr("class","graph").attr("transform","translate(".concat(n,",").concat(r,")"));d.append("g").attr("class","xaxis").attr("transform","translate(0,130)").transition().duration(500).call(Object(pa.a)(u)),d.append("g").attr("class","yaxis").attr("transform","translate(0,130)").transition().duration(500).call(Object(pa.b)(m));var b=d.append("g").attr("class","rect-container").selectAll("rect").data(o);b.enter().append("rect").attr("height",(function(e){return 0})).attr("width",u.bandwidth()).attr("x",(function(e){return u(e.rate)})).attr("y",l).attr("fill","#f1c40f").transition().duration(500).attr("y",(function(e){return m(e.count)})).attr("height",(function(e){return l-m(e.count)})),b.exit().remove()}),[t]),u=function(){var e=window.innerWidth;i(e<=425?"mobile":e>425&&e<=767?"tablet":"desktop")};return Object(r.useEffect)((function(){if(a.current.innerHTML="",t){if(a.current.hasChildNodes()){var e=document.querySelector(".rect-container");e&&e.remove()}s()}return window.addEventListener("resize",u),u(),function(){window.removeEventListener("resize",u)}}),[t,s,o]),c.a.createElement("section",{className:Ea("rate-bar")},c.a.createElement("svg",{className:Ea("svg-container"),ref:a,width:"mobile"===o?"250":"tablet"===o?"300":"400",height:"170"}))},va=void 0,Oa=v.a.bind(Mt.a),ga=[{value:"want_read",label:"\uc77d\uae30"},{value:"reading",label:"\uc77d\ub294\uc911"},{value:"read",label:"\uc77d\uc74c"}],ja=function(e){var t,a,n=e.profile,l=e.votes,o=e.id,s=e.book,u=e.postVote,m=e.reviews,d=e.isLoggedIn,f=Object(r.useState)({value:"want_read",label:"\uc77d\uae30"}),v=Object(b.a)(f,2),O=v[0],g=v[1],j=Object(r.useState)("\uc77d\uae30"),h=Object(b.a)(j,2),k=h[0],S=h[1],_=Object(r.useState)(!1),N=Object(b.a)(_,2),w=N[0],y=N[1],C=Object(p.c)(),R=Object(r.useCallback)((function(){var e=n.profile,t=o.isbn;if(e){if(va.checkStatus(e.want_read,t))return g(ga[0]),void S(ga[0].label);if(va.checkStatus(e.reading,t))return g(ga[1]),void S(ga[1].label);if(va.checkStatus(e.read,t))return g(ga[2]),void S(ga[2].label)}}),[o,n]),I=Object(r.useCallback)((function(){var e=O.value;if(d){var t=n.user.email;C(G(t,s._id,e)),y(!0)}else alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud55c \uc11c\ube44\uc2a4 \uc785\ub2c8\ub2e4")}),[C,s,n,O,d]);return Object(r.useEffect)((function(){R()}),[R]),c.a.createElement(c.a.Fragment,null,s?c.a.createElement(c.a.Fragment,null,w&&c.a.createElement(Ct,{type:"success"},"".concat(O.label,"\ubaa9\ub85d\uc5d0 \ucd94\uac00\ub42c\uc2b5\ub2c8\ub2e4")),c.a.createElement("section",{className:Oa("book-detail")},c.a.createElement("section",{className:Oa("book-rater-list")},c.a.createElement("ul",null,c.a.createElement("li",{className:"star"},c.a.createElement(E.j,null)),(null===s||void 0===s||null===(t=s.votes)||void 0===t?void 0:t.length)>0?null===s||void 0===s||null===(a=s.votes)||void 0===a?void 0:a.map((function(e){return c.a.createElement("li",{key:Object(Me.a)(),className:"book-rater"},c.a.createElement(i.b,{to:"/profile/".concat(e.voter._id,"/books")},c.a.createElement("img",{src:e.voter.avatarUrl,alt:e.voter.emails})))})):c.a.createElement("p",{className:"book-rater-empty"},"\uc544\uc9c1 \uc544\ubb34\ub3c4 \uc810\uc218\ub97c \uc8fc\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4..."))),c.a.createElement("section",{className:Oa("book-info-wrapper")},c.a.createElement("section",{className:Oa("img-col")},c.a.createElement("img",{src:s.thumbnail,alt:"geisha"})),c.a.createElement("section",{className:Oa("book-content")},c.a.createElement("h2",{className:Oa("title")},s.title),c.a.createElement("p",{className:Oa("author")},c.a.createElement("strong",null,"\uc800\uc790 "),function(e){var t="";if(e)for(var a=0;a<e.length;a++)t+="".concat(e[a]," ");return t}(s.authors)),c.a.createElement("section",{className:Oa("bookmeta")},c.a.createElement("span",{className:Oa("score")},c.a.createElement(E.j,null),ee(l),c.a.createElement(E.a,{className:Oa("angle-down")})),c.a.createElement("span",{className:Oa("rate-cnt")},l?l.length:0," \ud3c9\uac00"),c.a.createElement("span",{className:Oa("review-cnt")},m?m.length:0," \ub9ac\ubdf0")),c.a.createElement(fa,{votes:s.votes}),c.a.createElement("section",{className:Oa("discription")},c.a.createElement("h5",null,"\ucc45 \uc18c\uac1c"),c.a.createElement("p",null,void 0!==s.contents?s.contents:"\ub0b4\uc6a9 \uc5c6\uc74c")),c.a.createElement("div",null,c.a.createElement("div",{className:Oa("rate-wrapper")},c.a.createElement("span",null,"\ucc45 \ud3c9\uac00\ud558\uae30"),c.a.createElement(Xt,{postVote:u,book:s,id:o,votes:l&&l.length>0?function(){var e=n.profile,t="0";if(l)for(var a=0;a<l.length;a++){var r;if((null===(r=l[a])||void 0===r?void 0:r._id)===(null===e||void 0===e?void 0:e._id)){t=String(l[a].vote);break}}return t}():"0"})),c.a.createElement("div",{className:Oa("add")},c.a.createElement(Kt.a,{className:Oa("select"),options:ga,onChange:function(e){g(e)},value:O,isSearchable:!1,placeholder:k}),c.a.createElement("button",{className:Oa("want-read"),onClick:I},c.a.createElement("span",null,c.a.createElement(E.f,null)),"\ub4f1\ub85d")))))),c.a.createElement(ma,null)):c.a.createElement(Ye.ChasingDots,{color:"white",size:60}))},ha=function(e){var t=e.match,a=Object(r.useState)(!0),n=Object(b.a)(a,2),l=n[0],o=n[1],i=Object(p.c)(),s=Object(p.d)((function(e){return e.books})),u=s.book,E=s.bookPending,f=Object(p.d)((function(e){return e.review})).reviews,v=Object(p.d)((function(e){return e.login})),O=v.profile,g=v.isLoggedIn,j=Object(r.useCallback)(function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i(Q(t)),i(ca(t))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i]);return Object(r.useEffect)((function(){o(!0);var e=t.params.id;window.scrollTo(0,0),j(e),o(!1)}),[j,t]),c.a.createElement("main",{className:"main-container"},c.a.createElement(Ce,{title:"".concat(null===u||void 0===u?void 0:u.title," | HappReads"),description:"".concat(null===u||void 0===u?void 0:u.contents)}),l||E?c.a.createElement(Et,null):c.a.createElement(ja,{book:u,id:t.params.id,postVote:function(e,t,a){i(function(e,t,a){return{type:"POST_RATE",payload:q(e,t,a)}}(e,t,a))},votes:(null===u||void 0===u?void 0:u.votes)||[],reviews:f,profile:O,isLoggedIn:g}))},ka=a(111),Sa=a.n(ka),_a=v.a.bind(Sa.a),Na=function(e){var t=e.location,a=Object(r.useState)(""),n=Object(b.a)(a,2),l=n[0],o=n[1],i=Object(r.useState)(1),s=Object(b.a)(i,2),u=s[0],m=s[1],d=Object(r.useState)(!0),E=Object(b.a)(d,2),f=E[0],v=E[1],O=Object(p.c)(),g=Object(p.d)((function(e){return e.books})),j=g.books,h=g.searchPending,k=g.moreDone,S=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=t.search,a=decodeURI(e).split("=")[1].replace(/[%20]/gi," ").split("&")[0];o(a),1===u?(v(!0),O(X(a,0,u)),v(!1)):O(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return{type:"GET_MORE_BOOKS",payload:W(e,t,a)}}(a,0,u))}),[O,t,u]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Ce,{title:"\uac80\uc0c9 | HappReads"}),f||h?c.a.createElement(Et,null):c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",{className:"search-keyword"}," ",l?"\uac80\uc0c9 \ud0a4\uc6cc\ub4dc: ".concat(l):"\ub3c4\uc11c \ubaa9\ub85d"),c.a.createElement("section",{className:_a("search-result-container")},j.length>0?c.a.createElement(at,{booklist:j,done:k,from:"search",ref:S,handleMore:function(){m(u+1),S.current&&(console.log(S.current),S.current.blur())}}):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"empty"},c.a.createElement("p",null,"\uac80\uc0c9 \uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."))))))},wa=a(112),ya=a.n(wa);C.a.config(),w.a.defaults.baseURL="https://happread.herokuapp.com/";var Ca=function(e,t){return w.a.post("upload",e,{onUploadProgress:function(e){var a=e.loaded,n=e.total,r=Math.floor(100*a/n);t(Ia(r))}})},Ra=function(e){return function(t){return{type:"UPLOAD",payload:Ca(t,e)}}},Ia=function(e){return{type:"UPLOAD_PROGRESS",payload:{progress:e}}},La=Object(_.a)(($t={},Object(k.a)($t,"UPLOAD_PENDING",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{pending:!0,error:!1,success:!1,progress:0})})),Object(k.a)($t,"UPLOAD_SUCCESS",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{success:!0,pending:!1,error:!1,isUploaded:100===e.progress,progress:0})})),Object(k.a)($t,"UPLOAD_FAILURE",(function(e,t){return Object(S.a)(Object(S.a)({},e),{},{pending:!1,error:!0})})),Object(k.a)($t,"UPLOAD_PROGRESS",(function(e,t){var a=t.payload;return Object(S.a)(Object(S.a)({},e),{},{progress:a.progress})})),$t),{pending:!1,error:!1,success:!1,progress:0,isUploaded:!1});C.a.config();var Pa=v.a.bind(ya.a),Ta=function(){var e=Object(r.useState)({selected:null,title:"",authors:[],author:"",isbn:"",contents:"",genres:""}),t=Object(b.a)(e,2),a=t[0],n=t[1],l=Object(r.useRef)(null),o=Object(r.useRef)(null),i=Object(r.useRef)(null),s=Object(r.useRef)(null),u=Object(r.useRef)(null),E=Object(r.useRef)(null),f=(Object(r.useRef)(null),Object(p.c)()),v=Object(p.d)((function(e){return e.login})).profile,O=Object(p.d)((function(e){return e.upload})),g=O.progress,j=O.isUploaded,h=Object(r.useCallback)((function(e){var t=e.target;n(Object(S.a)(Object(S.a)({},a),{},{author:t.value}))}),[a]),k=Object(r.useCallback)((function(e){var t=a.author,r=a.authors,c=e.keyCode;""!==t&&(s.current.classList.remove("empty"),13===c&&n(Object(S.a)(Object(S.a)({},a),{},{authors:[].concat(Object(H.a)(r),[t]),author:""})))}),[a]),_=Object(r.useCallback)((function(e){var t=e.target;t.value.length>0&&i.current.classList.remove("input-empty"),n(Object(S.a)(Object(S.a)({},a),{},{title:t.value}))}),[a]),N=Object(r.useCallback)((function(e){var t=e.target;t.value.length>0&&E.current.classList.remove("input-empty"),n(Object(S.a)(Object(S.a)({},a),{},{contents:t.value}))}),[a]),w=Object(r.useCallback)((function(e){e.preventDefault();var t=e.target;t.value.length>0&&u.current.classList.remove("input-empty"),n(Object(S.a)(Object(S.a)({},a),{},{genres:t.value}))}),[a]),y=Object(r.useCallback)(function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r,c,l,o,d,b;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),13===t.keyCode){e.next=20;break}if(n=v.user._id,r=a.selected,c=a.contents,l=a.title,o=a.authors,d=a.genres,!(null!==r&&c.length>0&&l.length>0&&o.length>0&&d.length>0)){e.next=16;break}return(b=new FormData).append("thumbnail",r),b.append("title",l),b.append("authors",o),b.append("contents",c),b.append("uid",n),b.append("genres",d),e.next=14,f(Ra(f)(b));case 14:e.next=20;break;case 16:0===c.length&&E.current.classList.add("input-empty"),0===l.length&&i.current.classList.add("input-empty"),0===o.length&&s.current.classList.add("input-empty"),0===d.length&&u.current.classList.add("input-empty");case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,v,f]);Object(r.useLayoutEffect)((function(){j?(o.current.style.width="".concat(0,"%"),window.location.href="".concat("/HappReads-front")):o.current.style.width="".concat(g,"%")}),[g,j]);var C=a.title,R=a.authors,I=a.author,L=a.contents,P=a.genres;return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:Pa("progress-container")},c.a.createElement("div",{className:Pa("progress"),ref:o})),c.a.createElement("section",{className:Pa("book-upload")},c.a.createElement("section",{className:Pa("form-container")},c.a.createElement("section",{className:Pa("form")},c.a.createElement("div",{className:Pa("upload-btn-wrapper")},c.a.createElement("img",{className:Pa("preview-img"),alt:"",ref:l}),c.a.createElement("div",{className:Pa("btn-container"),style:{position:"relative"}},c.a.createElement("button",{className:Pa("btn")},"\uc774\ubbf8\uc9c0 \uc120\ud0dd"),c.a.createElement("input",{type:"file",onChange:function(e){var t=e.target.files,r=URL.createObjectURL(t[0]);l.current.src=r,n(Object(S.a)(Object(S.a)({},a),{},{selected:t[0]}))},required:!0}))),c.a.createElement("input",{type:"text",value:C,onChange:_,placeholder:"\ucc45 \uc774\ub984",required:!0,ref:i}),c.a.createElement("div",{className:Pa("authors"),ref:s},function(e,t){return null===e||void 0===e?void 0:e.map((function(e){var a=Object(Me.a)();return c.a.createElement("div",{className:Pa("author-tag"),key:a},c.a.createElement("span",{className:Pa("author-name")},e),c.a.createElement("span",{className:Pa("author-x"),onClick:t},"x"))}))}(R,(function(e){var t=a.authors,r=e.target.previousSibling.innerHTML,c=t.filter((function(e){return e!==r}));n(Object(S.a)(Object(S.a)({},a),{},{authors:c}))})),c.a.createElement("input",{className:Pa("author-input"),type:"text",placeholder:"\uc800\uc790 +",value:I,onChange:h,onKeyDown:k})),c.a.createElement("input",{type:"text",value:P,placeholder:"\ucc45 \uc7a5\ub974 ( ,\uad6c\ubd84\uc9c4\ud589)",onChange:w,required:!0,ref:u}),c.a.createElement("textarea",{placeholder:"\uc694\uc57d",value:L,onChange:N,required:!0,ref:E}),c.a.createElement("button",{className:"submit",onClick:y},"\uc5c5\ub85c\ub4dc")))))},Ua=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ce,{title:"Upload | HappReads"}),c.a.createElement(Ta,null))},Da=a(113),xa=a.n(Da),Ga=a(114),Ba=a.n(Ga),Fa=v.a.bind(Ba.a),Aa=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ce,{title:"404 Error | HappReads"}),c.a.createElement("section",{className:Fa("nomatch-section")},c.a.createElement("h1",null,"404 Not Found"),c.a.createElement("img",{src:xa.a,alt:"404"})))},Ha=a(115),Va=a.n(Ha),Ma=v.a.bind(Va.a),Ka=function(){return c.a.createElement("div",{className:Ma("category")},c.a.createElement("ul",null,c.a.createElement("li",null,"\ucd5c\uadfc \ucc45 \ub9ac\ubdf0")))},Wa=a(116),Ya=a.n(Wa),qa=v.a.bind(Ya.a),za=function(e){var t=e.path,a=e.loadMore,n=e.toggleMore,r=e.selected,l=e.handleLike,o=e.hasMore,s=Object(p.d)((function(e){return e.review})).reviews;return c.a.createElement("section",{className:qa("community-container")},"reviews"===t&&c.a.createElement("section",{className:qa("reviews")},function(e){if("reviews"===e)return c.a.createElement(c.a.Fragment,null,0===s.length&&c.a.createElement("p",{className:qa("empty")},"\ucd5c\uadfc \ub9ac\ubdf0\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."),c.a.createElement(c.a.Fragment,null,s.length>0&&s.map((function(e){return c.a.createElement("section",{key:Object(Me.a)(),className:qa(["card","row"])},c.a.createElement("section",{className:qa("first-col")},c.a.createElement(i.b,{to:"/book/".concat(e&&e.book&&e.book._id)},c.a.createElement("img",{src:e&&e.book&&e.book.thumbnail,alt:e&&e.book&&e.book.title})),c.a.createElement("p",{className:qa("like")},c.a.createElement(ct.a,{className:qa("heart"),icon:lt.d,onClick:l(e)})," ",e&&e.likes&&e.likes.length," \uc88b\uc544\uc694")),c.a.createElement("section",{className:qa("second-col")},c.a.createElement("p",{className:qa("date")},e&&le()(e.createdAt).format("YYYY/MM/DD HH:MM:DD")),c.a.createElement("p",{className:qa("reviewer")},c.a.createElement(i.b,{to:"/profile/".concat(e&&e.reviewer._id)},e&&e.reviewer.email.split("@")[0])),c.a.createElement("h4",{className:qa("title")},c.a.createElement(i.b,{to:"/book/".concat(e&&e.book&&e.book._id)},e&&e.book&&e.book.title)),c.a.createElement("section",{className:qa("content")},c.a.createElement("img",{src:e&&e.reviewer&&e.reviewer.avatarUrl,alt:e&&e.reviewer.email}),c.a.createElement("article",null,c.a.createElement("p",{className:qa("content-text")},e&&e.content&&e.content.length>=50&&e._id&&!0===r[e._id]?e.content:"".concat(e.content.substring(0,50),"...")),e&&e.content&&e.content.length>=50?c.a.createElement("p",{className:qa("more"),onClick:n,"data-id":e._id},r[e._id]?"\uc904\uc774\uae30":"\ub354\ubcf4\uae30"):null))))})),o&&c.a.createElement("button",{className:qa("load-more-btn"),onClick:a},"\ub354 \ubcf4\uae30")))}("reviews")))},Ja=function(e){var t=e.history.location.pathname.substr(1).split("/")[1],a=Object(r.useState)(!0),n=Object(b.a)(a,2),l=n[0],o=n[1],i=Object(r.useState)({}),s=Object(b.a)(i,2),u=s[0],m=s[1],d=Object(r.useState)(1),E=Object(b.a)(d,2),f=E[0],v=E[1],O=Object(p.d)((function(e){return e.review})).hasMore,g=Object(p.d)((function(e){return e.login})),j=g.profile,h=g.isLoggedIn,_=Object(p.c)(),N=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{_(ra({limit:5,page:e}))}catch(t){console.log(t)}}),[_]),w=Object(r.useCallback)((function(e){var t=e.target.dataset;if(void 0===u[t.id]||!1===u[t.id]){var a=Object(S.a)(Object(S.a)({},u),{},Object(k.a)({},t.id,!0));m(a)}else{var n=Object(S.a)(Object(S.a)({},u),{},Object(k.a)({},t.id,!1));m(n)}}),[u]),y=Object(r.useCallback)((function(e){N(f+1),v((function(e){return e+1}))}),[N,f]),C=Object(r.useCallback)((function(e){return function(){var t=j.user;h?_(ia("like",e._id,t._id)):alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4")}}),[j,h,_]);return Object(r.useEffect)((function(){return o(!0),N(),o(!1),function(){}}),[N,_]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Ce,{title:"Book Reviews | HappReads",keywords:"\ucc45 \ub9ac\ubdf0, \ub9ac\ubdf0, \ucd5c\uadfc \ub9ac\ubdf0"}),c.a.createElement(Ka,{path:t}),c.a.createElement(za,{path:t,hasMore:O,loadMore:y,selected:u,toggleMore:w,handleLike:C,isLoading:l}))},Xa=a(123),Qa=a(117),Za=a.n(Qa);C.a.config();var $a=v.a.bind(Za.a),en=function(e){var t,a,n=e.profile,l=e.isOpen,o=e.handleClose,i=Object(p.c)(),s=Object(r.useState)({seletedImg:null,avatarUrl:n?n.avatarUrl:void 0,nickname:n?n.name:"",website:n?n.website:"",intro:n?n.intro:"",interest:n?n.interest:""}),u=Object(b.a)(s,2),E=u[0],f=u[1],v=function(){var e=Object(d.a)(m.a.mark((function e(){var t,a,r,c,l,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=E.seletedImg,a=E.nickname,r=E.website,c=E.interest,l=E.intro,(o=new FormData).append("avatar",t),o.append("email",n.email),o.append("nickname",a),o.append("website",r),o.append("interest",c),o.append("intro",l),e.prev=8,e.next=11,i({type:"EDIT_PROFILE",payload:D(o)});case 11:s=e.sent,200===s.value.status&&(window.location.href="".concat("/HappReads-front/#/me")),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(){return e.apply(this,arguments)}}(),O=Object(r.useCallback)((function(e){var t=e.target.files;f(Object(S.a)(Object(S.a)({},E),{},{seletedImg:t[0]})),function(e){var t=URL.createObjectURL(e);document.querySelector(".preview-img").src=t}(t[0])}),[E,f]),g=Object(r.useCallback)((function(e){var t=e.target;f(Object(S.a)(Object(S.a)({},E),{},{nickname:t.value}))}),[E,f]),j=Object(r.useCallback)((function(e){var t=e.target;f(Object(S.a)(Object(S.a)({},E),{},{website:t.value}))}),[E,f]),h=Object(r.useCallback)((function(e){var t=e.target;f(Object(S.a)(Object(S.a)({},E),{},{interest:t.value}))}),[E,f]),k=Object(r.useCallback)((function(e){var t=e.target;f(Object(S.a)(Object(S.a)({},E),{},{intro:t.value}))}),[E,f]);return c.a.createElement("section",{className:$a("user-edit",l?"close":"open")},c.a.createElement("div",{className:$a("x-button")},c.a.createElement("p",{onClick:o},c.a.createElement("span",{role:"img","aria-label":"close"},"\u274c"))),c.a.createElement("section",{className:$a("form-container")},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),alert(e.target.dataset),v()}},c.a.createElement("div",{className:$a("upload-btn-wrapper")},c.a.createElement("img",{className:$a("preview-img"),alt:"\uc0ac\uc6a9\uc790 \uc774\ubbf8\uc9c0",src:(a=null===E||void 0===E?void 0:E.avatarUrl,void 0===a?"https://wetuberbucket.s3.ap-northeast-2.amazonaws.com/avatars/58c11a401956bab841de5f227c337c43":a)}),c.a.createElement("div",{style:{position:"relative"}},c.a.createElement("button",{className:$a("btn")},void 0===(null===E||void 0===E||null===(t=E.seletedImg)||void 0===t?void 0:t.name)?"\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc":E.seletedImg.name),c.a.createElement("input",{type:"file",name:"avatar",onChange:O}))),c.a.createElement("input",{type:"text",name:"nickname",value:null===E||void 0===E?void 0:E.nickname,placeholder:"\ub2c9\ub124\uc784",onChange:g}),c.a.createElement("input",{type:"email",name:"website",placeholder:"\uc6f9 \uc0ac\uc774\ud2b8 ex) http://www.example.com",value:null===E||void 0===E?void 0:E.website,onChange:j}),c.a.createElement("input",{type:"text",name:"interest",placeholder:"\ucde8\ubbf8",value:null===E||void 0===E?void 0:E.interest,onChange:h}),c.a.createElement("textarea",{name:"intro",placeholder:"\uc18c\uac1c",value:null===E||void 0===E?void 0:E.intro,onChange:k}),c.a.createElement("input",{type:"submit",value:"\uc218\uc815"}),c.a.createElement("button",{onClick:o,"data-value":"cancel"},"\ucde8\uc18c"))))},tn=a(118),an=a.n(tn),nn=v.a.bind(an.a),rn=function(e){var t=e.profile,a=e.from,n=e.children,l=Object(s.g)().pathname,o=Object(r.useState)(!1),u=Object(b.a)(o,2),m=u[0],d=u[1],p=Object(r.useCallback)((function(){d(!0)}),[]),E=Object(r.useCallback)((function(e){e.preventDefault(),d(!1)}),[]),f=function(e){var t=e.isOpen,a=e.handleClose,n=e.profile;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:nn("modal-overay",t?"open-modal":"close-modal")}),c.a.createElement("div",{className:nn(t?"open-modal":"close-modal")},c.a.createElement(en,{handleClose:a,profile:n,isOpen:!t})))};return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:nn("user-profile")},c.a.createElement("section",{className:nn("user-profile-wrapper")},c.a.createElement("div",{className:nn("profile-info")},c.a.createElement("img",{src:t&&t.avatarUrl?t.avatarUrl:"",alt:t&&t.email?t.email:""}),c.a.createElement("h1",null,t&&t.email?t.email:""),c.a.createElement("div",{className:nn("profile-edit")},a.includes("/me")?c.a.createElement("p",{to:"/edit",onClick:p},"\ud504\ub85c\ud544 \uc218\uc815"):null),c.a.createElement("div",{className:nn("rate-review")},c.a.createElement("p",null,t&&t.votes?t.votes.length:0,"\ud3c9\uac00"),c.a.createElement("p",null,t&&t.reviews?t.reviews.length:0,"\ub9ac\ubdf0")),c.a.createElement("p",{className:nn("intro")},t&&t.intro))),c.a.createElement("section",null,c.a.createElement("ul",{className:nn("catalog-list")},c.a.createElement("li",{className:l.includes("/books")?nn("active"):""},c.a.createElement(i.c,{to:"".concat(l.startsWith("/me")?"/me/books":"/profile/".concat(t._id,"/books"))},"\ucc45")),c.a.createElement("li",{className:l.includes("/review")?nn("active"):""},c.a.createElement(i.c,{to:"".concat(l.startsWith("/me")?"/me/review":"/profile/".concat(t._id,"/review"))},"\ub9ac\ubdf0"))),n)),c.a.createElement(f,{isOpen:m,handleClose:E,profile:t}))},cn=function(e){var t=e.component,a=Object(Xa.a)(e,["component"]),n=Object(p.d)((function(e){return e.login})),l=n.isLoggedIn,o=n.profile,i=Object(p.d)((function(e){return e.user})).profile,u=Object(s.g)(),b=Object(p.c)(),E=Object(r.useCallback)(function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{b(Oe(t))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[b]);return Object(r.useEffect)((function(){if(!u.pathname.startsWith("/me")){var e=u.pathname.substring(1).split("/")[1];E(e)}}),[E,u.pathname]),c.a.createElement(s.b,Object.assign({},a,{render:function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ce,{title:"Profile | HappReads"}),c.a.createElement(rn,{isLoggedIn:l,profile:u.pathname.startsWith("/me")?null===o||void 0===o?void 0:o.user:i,from:u.pathname},c.a.createElement(t,Object.assign({},e,{isLoggedIn:l,profile:u.pathname.startsWith("/me")?null===o||void 0===o?void 0:o.user:i,from:u.pathname}))),")")}}))},ln=a(119),on=a.n(ln),sn=v.a.bind(on.a),un=function(e){var t=e.review,a=e.handleClose,n=Object(r.useState)((null===t||void 0===t?void 0:t.content)||""),l=Object(b.a)(n,2),o=l[0],i=l[1],s=Object(p.c)(),u=Object(p.d)((function(e){return e.login})).isLoggedIn,E=Object(r.useCallback)(Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$())try{s(x(t))}catch(a){console.log(a)}case 2:case"end":return e.stop()}}),e)}))),[s]),f=Object(r.useCallback)(function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(oa(t,a));case 3:n=e.sent,200===n.value.status&&E(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}(),[E,s]),v=Object(r.useCallback)((function(e){e.preventDefault(),u&&f(t._id,o)}),[o,u,t,f]);return c.a.createElement("section",{className:sn(["review-modal","modal-container"])},c.a.createElement("section",{className:"modal-overlay"},c.a.createElement("div",{className:"modal"},c.a.createElement("div",{className:sn("form-container")},c.a.createElement("img",{src:void 0!==t.book?t.book.thumbnail:"",alt:void 0!==t.book?t.book.title:""}),c.a.createElement("form",{onSubmit:v},c.a.createElement("textarea",{value:o,onChange:function(e){var t=e.target;i(t.value)}},o),c.a.createElement("input",{type:"submit",value:"\uc218\uc815"}),c.a.createElement("button",{className:sn("cancel"),onClick:a},"\ucde8\uc18c"))))))},mn=a(120),dn=a.n(mn),bn=v.a.bind(dn.a),pn=function(e){var t,a=e.review,n=e.handleLike,r=e.handleDelete,l=e.handleEdit,o=e.mid,s=e.uid;return c.a.createElement("section",{className:bn("user-review-container"),id:a._id,key:Object(Me.a)()},c.a.createElement("div",null,c.a.createElement(i.b,{to:"/book/".concat(null===(t=a.book)||void 0===t?void 0:t._id)},c.a.createElement("img",{src:void 0!==a.book?a.book.thumbnail:"",alt:void 0!==a.book?a.book.title:""}))),c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("p",{className:bn("user-review-book")},void 0!==a.book?a.book.title:""),c.a.createElement("p",{className:bn("user-review-text")},void 0!==a.book?a.content:""),c.a.createElement("p",{className:bn("user-review-date")},le()(a.createdAt).format("YYYY\ub144 MM\uc6d4 DD\uc77c HH:MM:SS")),c.a.createElement("p",{className:bn("like-container")},c.a.createElement("span",{className:bn("review-like")},a.likes.length," likes"),c.a.createElement("span",{className:bn("likebtn"),onClick:n(a._id)},c.a.createElement(E.e,null))))),s===o?c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:bn("review-edit"),"data-value":a._id,onClick:l(a)},c.a.createElement(E.c,null)),c.a.createElement("span",{className:bn("review-remove"),"data-value":a._id,"data-bid":a.book._id,onClick:r},c.a.createElement(E.k,null))):null)},En=function(e){var t=e.profile,a=e.isMe,n=Object(r.useState)(null),l=Object(b.a)(n,2),o=l[0],i=l[1],s=Object(r.useState)(!1),u=Object(b.a)(s,2),E=u[0],f=u[1],v=Object(p.c)(),O=Object(p.d)((function(e){return e.login})),g=O.profile,j=O.pending,h=O.isLoggedIn,k=Object(r.useCallback)((function(){if(a){var e=$();e&&v(x(e))}else v(Oe(t._id))}),[v,a,t]),S=function(e){var t=e.currentTarget,a=t.getAttribute("data-bid"),n=t.getAttribute("data-value"),r=g.user._id;_(a,n,r)},_=function(){var e=Object(d.a)(m.a.mark((function e(t,a,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(F(t,a,n));case 3:r=e.sent,200===r.value.status&&k(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),N=Object(r.useCallback)(function(){var e=Object(d.a)(m.a.mark((function e(a,n){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(ia(a,n,t._id,g.user._id));case 3:r=e.sent,200===(c=r.value.status)&&(console.log(c),k()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}(),[v,g,t,k]),w=Object(r.useCallback)((function(e){return function(t){h?N("like",e):alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4")}}),[N,h]),y=Object(r.useCallback)((function(e){return function(t){f(!0),i(e)}}),[]),C=Object(r.useCallback)((function(){f(!1),i(null)}),[]);return c.a.createElement("div",{className:bn("user-review")},!1===j&&t&&t.reviews&&t.reviews.map((function(e){return c.a.createElement(pn,{key:Object(Me.a)(),review:e,handleLike:w,handleDelete:S,handleEdit:y,mid:g.user._id,uid:t._id})})),E&&c.a.createElement(un,{review:o,handleClose:C}))},fn=function(e){var t=e.profile,a=e.from;return c.a.createElement("section",null,c.a.createElement("section",{className:Ft()("recent-update")},c.a.createElement("div",{className:Ft()("recent-head")},c.a.createElement("h2",null,"\ub9ac\ubdf0")),c.a.createElement("div",{className:Ft()("recent-body")},t?c.a.createElement(En,{profile:t,isMe:!!a.includes("/me")}):"\ub9ac\ubdf0 \uc5c6\uc74c")))};a(281);var vn,On=function(){return c.a.createElement(i.a,null,c.a.createElement(re,null),c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"/",exact:!0,component:ft}),c.a.createElement(s.b,{path:"/book/:id",component:ha}),c.a.createElement(s.b,{path:"/login",component:It}),c.a.createElement(s.b,{path:"/search",component:Na}),c.a.createElement(s.b,{path:"/signup",component:Gt}),c.a.createElement(cn,{exact:!0,path:"/me/books",component:Ht}),c.a.createElement(cn,{exact:!0,path:"/me/review",component:fn}),c.a.createElement(cn,{exact:!0,path:"/profile/:id/books",component:Ht}),c.a.createElement(cn,{exact:!0,path:"/profile/:id/review",component:fn}),c.a.createElement(s.b,{path:"/upload",component:Ua}),c.a.createElement(s.b,{path:"/community/reviews",component:Ja}),c.a.createElement(s.b,{path:"/community/top-readers",component:Ja}),c.a.createElement(s.b,{path:"/community/top-reviewers",component:Ja}),c.a.createElement(s.b,{path:"/shelve/:id",component:we}),c.a.createElement(s.b,{component:Aa})),c.a.createElement(pe,null),c.a.createElement(ue,null))},gn=a(31);C.a.config(),w.a.defaults.baseURL="https://happread.herokuapp.com/";var jn=Object(_.a)((vn={},Object(k.a)(vn,"POST_SHELVE_PENDING",(function(e,t){return{pending:!0,error:!1}})),Object(k.a)(vn,"POST_SHELVE_SUCCESS",(function(e,t){})),Object(k.a)(vn,"POST_SHELVE_FAILURE",(function(e,t){return{pending:!1,error:!0}})),vn),{pending:!1,error:!1}),hn=Object(gn.c)({books:Z,signup:Dt,login:A,review:sa,shelve:jn,user:ge,upload:La}),kn=a(121),Sn=Object(kn.a)({promiseTypeSuffixes:["PENDING","SUCCESS","FAILURE"]}),_n=Object(gn.d)(hn,Object(gn.a)(Sn));o.a.render(c.a.createElement(p.a,{store:_n},c.a.createElement(On,null)),document.getElementById("root"))},51:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},99:function(e,t,a){}},[[181,1,2]]]);
//# sourceMappingURL=main.b9f99027.chunk.js.map