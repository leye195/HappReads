(this.webpackJsonpgoodreads=this.webpackJsonpgoodreads||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){},105:function(e,t,a){e.exports=a(205)},205:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(23),l=a.n(o),i=a(8),s=a(12),u=a(6),m=a(66),d=a.n(m),p=a(5),E=a.n(p),b=E.a.bind(d.a),v=function(){return c.a.createElement("section",{className:b("home-section")},c.a.createElement("section",{className:b("words")},c.a.createElement("h3",null,"With Happyness"),c.a.createElement("h4",null,"\uc790\uc2e0\uc758 \uc778\uc0dd \ucc45\uc744 \ucc3e\uc544\ubcf4\uc138\uc694")))},f=a(67),g=a.n(f),O=a(1),j=a(68),h=a.n(j),k=(a(110),a(111),a(69)),S=a.n(k),_=a(70),N=a.n(_),w=E.a.bind(N.a),y=function(e){var t=e.children;return c.a.createElement("div",{className:w("scroll-item")},t)},C=a(207),R=E.a.bind(h.a),I=function(e){var t,a=e.books,n=Object(r.useState)({dots:!1,infinite:!0,speed:500,slidesToShow:4,slidesToScroll:4,adaptiveHeight:!0,autoplay:!0,autoplaySpeed:4e3}),o=Object(u.a)(n,2),l=o[0],s=o[1],m=Object(r.useCallback)((function(){var e=window.innerWidth;s(e>=320&&e<=425?Object(O.a)({},l,{slidesToShow:2,slidesToScroll:2}):Object(O.a)({},l,{slidesToShow:4,slidesToScroll:4}))}),[l]);return Object(r.useEffect)((function(){return m(),window.addEventListener("resize",m),function(){window.removeEventListener("resize",m)}}),[]),c.a.createElement("section",{className:R("slider-container")},c.a.createElement(S.a,l,null===a||void 0===a?void 0:null===(t=a.slice(0,8))||void 0===t?void 0:t.map((function(e){return c.a.createElement(y,{key:Object(C.a)()},c.a.createElement(i.b,{to:"/book/".concat(e._id)},c.a.createElement("img",{src:e.thumbnail,alt:e.title})))}))))},P=a(71),L=a.n(P),T=a(72),U=a.n(T),D=a(11),G=a(4),x=a(2),B=a(206),A=a(9),F=a.n(A),H=a(14),V=a.n(H);V.a.config(),F.a.defaults.baseURL="https://happread.herokuapp.com/";var K,M=function(e,t){return F.a.post("login",{email:e,password:t})},W=function(e){return F.a.create({headers:{Authorization:"".concat(e)}}).post("profile")},Y=function(e,t,a){return F.a.post("shelve",{email:e,id:t,type:a})},q=function(e,t,a){return console.log(e,t,a),F.a.delete("shelve",{data:{uid:e,id:t,type:a}})},z=function(e,t,a){return F.a.delete("book/".concat(e,"/review/").concat(t),{data:{uid:a}})},J=function(e){return{type:"USER_CHECK",payload:W(e)}},X=function(e,t,a){return{type:"POST_SHELVE",payload:Y(e,t,a)}},Q=function(e,t,a){return{type:"DELETE_SHELVE",payload:q(e,t,a)}},Z=function(e,t,a){return{type:"DELETE_REVIEW",payload:z(e,t,a)}},$=Object(B.a)((n={},Object(x.a)(n,"LOGIN_PENDING",(function(e,t){return Object(O.a)({},e,{loginPending:!0,loginError:!1,loginSuccess:!1})})),Object(x.a)(n,"LOGIN_SUCCESS",(function(e,t){return{profile:t.payload.data,loginPending:!1,loginError:!1,loginSuccess:!0,isLoggedIn:!0}})),Object(x.a)(n,"LOGIN_FAILURE",(function(e,t){return console.log(),Object(O.a)({},e,{loginPending:!1,loginError:!0,loginSuccess:!1,isLoggedIn:!1})})),Object(x.a)(n,"USER_CHECK_PENDING",(function(e,t){return Object(O.a)({},e,{pending:!0,error:!1,isLoggedIn:!1})})),Object(x.a)(n,"USER_CHECK_SUCCESS",(function(e,t){return{pending:!1,error:!1,isLoggedIn:!0,profile:t.payload.data}})),Object(x.a)(n,"USER_CHECK_FAILURE",(function(e,t){return{pending:!1,error:!0,isLoggedIn:!1}})),Object(x.a)(n,"LOGOUT_PENDING",(function(e,t){return Object(O.a)({},e,{logoutPending:!0,logoutError:!1,logoutSuccess:!1})})),Object(x.a)(n,"LOGOUR_SUCCESS",(function(e,t){return Object(O.a)({},e,{logoutPending:!1,logoutError:!1,logoutSuccess:!0,isLoggedIn:!1,profile:{}})})),Object(x.a)(n,"LOGOUT_FAILURE",(function(e,t){return Object(O.a)({},e,{logoutPending:!1,logoutError:!0,logoutSuccess:!1})})),Object(x.a)(n,"POST_SHELVE_PENDING",(function(e,t){return Object(O.a)({},e,{postShelvePending:!0,postShelveSuccess:!1,postShelveError:!1})})),Object(x.a)(n,"POST_SHELVE_SUCCESS",(function(e,t){var a=t.payload.data;return Object(O.a)({},e,{postShelvePending:!1,postShelveSuccess:!0,profile:a})})),Object(x.a)(n,"POST_SHELVE_FAILURE",(function(e,t){return Object(O.a)({},e,{postShelvePending:!1,postShelveError:!0})})),Object(x.a)(n,"DELETE_SHELVE_PENDING",(function(e,t){return Object(O.a)({},e,{pending:!0,error:!1})})),Object(x.a)(n,"DELETE_SHELVE_SUCCESS",(function(e,t){var a=t.payload.data;return Object(O.a)({},e,{profile:a,pending:!1,error:!1})})),Object(x.a)(n,"DELETE_SHELVE_FAILURE",(function(e,t){return Object(O.a)({},e,{pending:!1,error:!0})})),Object(x.a)(n,"DELETE_REVIEW_PENDING",(function(e,t){return Object(O.a)({},e,{pending:!0,error:!1})})),Object(x.a)(n,"DELETE_REVIEW_SUCCESS",(function(e,t){var a=t.payload.data;return Object(O.a)({},e,{pending:!1,error:!0,profile:a})})),Object(x.a)(n,"DELETE_REVIEW_FAILURE",(function(e,t){return Object(O.a)({},e,{pending:!1,error:!0})})),n),{pending:!0,error:!1,success:!1,profile:{},isLoggedIn:!1,loginPending:!1,loginError:!1,loginSuccess:!1,logoutPending:!1,logoutSuccess:!1,logoutError:!1,postShelvePending:!1,postShelveSuccess:!1,postShelveError:!1}),ee=a(7),te=a.n(ee),ae=a(10),ne=a(74),re=a.n(ne),ce=E.a.bind(re.a),oe={read:"\uc77d\uc740 \ucc45",want_read:"\uc77d\uc744 \ucc45",reading:"\uc77d\ub294\uc911"},le=function(e){var t=e.handleSubmit,a=e.handleCancel,n=e.item,o=e.type,l=Object(r.useState)(oe[o]),i=Object(u.a)(l,2),s=i[0],m=i[1],d=Object(r.useState)(Object(O.a)({},n)),p=Object(u.a)(d,2),E=p[0],b=p[1],v=Object(G.c)(),f=Object(G.d)((function(e){return e.login})).profile,g=Object(r.useCallback)((function(e){var t=e.target;m(t.options[t.selectedIndex].value)}),[]),j=Object(r.useCallback)(function(){var e=Object(ae.a)(te.a.mark((function e(t){var a;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=f.user;try{v(X(a.email,n._id,s))}catch(t){console.log(t)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,s,f,v]),h=Object(r.useCallback)((function(e){var t=e.target;b(Object(O.a)({},E,{title:t.value}))}),[E]),k=Object(r.useCallback)((function(e){var t=e.target;b(Object(O.a)({},E,{genres:t.value}))}),[E]),S=Object(r.useCallback)((function(e){var t=e.target;b(Object(O.a)({},E,{contents:t.value}))}),[E]);return c.a.createElement("div",{className:"modal-container"},c.a.createElement("div",{className:"modal-overlay"}),c.a.createElement("div",{className:"modal"},c.a.createElement("p",{className:ce("exit")},c.a.createElement("span",{role:"img","aria-label":"cancel",onClick:a},"\u274c")),void 0!==o?c.a.createElement(c.a.Fragment,null,c.a.createElement("img",{src:n.thumbnail,alt:n.id}),c.a.createElement("div",{className:ce("status-wrapper")},c.a.createElement("div",{className:ce("read-status")},c.a.createElement("span",null,"\ud604\uc7ac \uc0c1\ud0dc:"),c.a.createElement("p",{className:ce("current-status")},oe[o])),c.a.createElement("select",{className:ce("select"),defaultValue:s,onChange:g},c.a.createElement("option",{value:"want_read"},"\uc77d\uc744 \ucc45"),c.a.createElement("option",{value:"reading"},"\uc77d\b\ub294\uc911"),c.a.createElement("option",{value:"read"},"\uc77d\uc74c")),c.a.createElement("div",{className:ce("button-container")},c.a.createElement("button",{className:ce("ok-btn"),onClick:j},"\uc218\uc815"),c.a.createElement("button",{className:ce("cancel-btn"),onClick:a},"\ucde8\uc18c")))):c.a.createElement("div",{className:ce("book-info-container")},c.a.createElement("div",{className:ce("img-container")},c.a.createElement("img",{src:E.thumbnail,alt:E.title})),c.a.createElement("form",{className:ce("book-info-form"),onSubmit:t(E)},c.a.createElement("input",{value:E.title,placeholder:"\uc81c\ubaa9",onChange:h}),c.a.createElement("input",{value:E.genres,placeholder:"\uc7a5\ub974",onChange:k}),c.a.createElement("textarea",{value:E.contents,placeholder:"\uc694\uc57d",onChange:S}),c.a.createElement("button",{className:"ok-btn"},"\uc218\uc815")))))},ie=E.a.bind(U.a),se=Object(G.b)((function(e){return{profile:e.login.profile,success:e.login.success}}),(function(e){return{postShelve:function(t,a,n){return e(X(t,a,n))},deleteShelve:function(t,a,n){return e(Q(t,a,n))}}}))((function(e){var t=e.from,a=e.type,n=Object(r.useState)(!1),o=Object(u.a)(n,2),l=o[0],s=o[1];if("home"===t){var m=e.book;return c.a.createElement("div",{className:ie("book")},c.a.createElement("img",{src:m.thumbnail,alt:"book"}),c.a.createElement("p",null,m.title))}if("search"===t){var d=e.book;return c.a.createElement("li",{className:ie("ser-bg")},c.a.createElement("div",{className:ie("ser-book")},c.a.createElement(i.b,{to:"/book/".concat(d._id)},c.a.createElement("img",{src:d.thumbnail,alt:"book"}))),c.a.createElement("div",{className:ie("ser-info")},c.a.createElement(i.b,{to:"/book/".concat(d._id)},c.a.createElement("h3",{className:ie("ser-title")},d.title)),c.a.createElement("p",{className:ie("ser-author")},function(e){var t="";return e.forEach((function(e){t+=e})),t}(d.authors)),c.a.createElement("p",{className:ie("ser-contents")},d&&d.contents?d.contents:"\uc785\ub825\ub41c \ub0b4\uc6a9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4")))}if("profile"===t){var p=e.book.book,E=(e.profile.user,window.location.href.endsWith("/me")),b=function(){s((function(e){return!e}))};return c.a.createElement("div",{className:ie("shelve")},c.a.createElement(i.b,{to:"/book/".concat(null===p||void 0===p?void 0:p._id)},c.a.createElement("p",{className:ie("title")},null===p||void 0===p?void 0:p.title)),E?c.a.createElement("div",{className:ie("setting-btns")},c.a.createElement("div",{className:ie("edit-container")},c.a.createElement("span",{className:ie("edit"),onClick:b},c.a.createElement(D.c,null)),l?c.a.createElement(le,{type:a,item:p,handleCancel:b}):null),c.a.createElement("div",null,c.a.createElement("span",{className:ie("delete"),onClick:function(t){return function(){var a=e.deleteShelve,n=e.book;a(e.profile.user._id,n._id,t)}}(a)},c.a.createElement(D.k,null)))):null)}})),ue=a(31),me=E.a.bind(L.a),de=Object(G.b)(null,null)((function(e){var t=e.from,a=e.booklist,n=e.type,r=e.handleMore,o=e.done;return"home"===t?c.a.createElement("section",{className:me("book-list")},a?"\uc804\uccb4"===n&&a.length>0?c.a.createElement(c.a.Fragment,null,a.map((function(e){return c.a.createElement(i.b,{to:"/book/".concat(e._id),key:Object(C.a)()},c.a.createElement(se,{book:e,from:t}))})),!1===o&&c.a.createElement("div",{className:me("more-book-btn"),onClick:r},c.a.createElement("p",null,"\ub354 \ubcf4\uae30 +"))):c.a.createElement(c.a.Fragment,null,a.filter((function(e){var t;return null===e||void 0===e?void 0:null===(t=e.genres)||void 0===t?void 0:t.includes(n)})).map((function(e){return c.a.createElement(i.b,{to:"/book/".concat(e._id),key:Object(C.a)()},c.a.createElement(se,{book:e,from:t}))})),a.filter((function(e){var t;return null===e||void 0===e?void 0:null===(t=e.genres)||void 0===t?void 0:t.includes(n)})).length>0&&!1===o&&c.a.createElement("div",{className:me("more-book-btn"),onClick:r},c.a.createElement("p",null,"\ub354 \ubcf4\uae30 +"))):c.a.createElement(ue.ChasingDots,{color:"white",size:60})):"search"===t?c.a.createElement("section",{className:me("ser-container")},c.a.createElement("ul",{className:me("ser-ul")},a.map((function(e){return c.a.createElement(se,{book:e,from:t,key:Object(C.a)()})})))):"profile"===t?c.a.createElement("section",null,c.a.createElement("ul",null,a.map((function(e){return c.a.createElement(se,{book:e,from:t,key:Object(C.a)(),type:n})})))):void 0})),pe=a(75),Ee=a.n(pe),be=a(32),ve=a(29),fe=E.a.bind(Ee.a),ge=function(e){var t=e.title,a=e.books;return c.a.createElement("section",{className:fe("vertical")},c.a.createElement("p",{className:fe("title")},t,c.a.createElement(be.a,{className:fe("book-icon"),icon:ve.c})),c.a.createElement("section",{className:fe("list")},null===a||void 0===a?void 0:a.map((function(e){return c.a.createElement(i.b,{key:Object(C.a)(),to:"/book/".concat(e._id)},c.a.createElement(se,{book:e,from:"home"}))}))))},Oe=E.a.bind(g.a),je=function(e){var t=e.booklist,a=e.handleClick,n=e.handleMore,o=e.sliderBooks,l=e.recentBooks,i=e.popularBooks,s=e.type,m=e.done,d=Object(r.useState)(!1),p=Object(u.a)(d,2),E=(p[0],p[1]),b=Object(r.useState)(!0),v=Object(u.a)(b,2),f=v[0],g=v[1],O=Object(r.useState)(["\uc804\uccb4","\uc18c\uc124","IT","\uacbd\uc81c","\uad50\uc591","\uc790\uae30\uacc4\ubc1c","\uacfc\ud559","\uc5ed\uc0ac","\uc815\uce58","\uae30\ud0c0"]),j=Object(u.a)(O,2),h=j[0],k=(j[1],function(){var e=window.innerWidth;E(e>=320&&e<=425)});return Object(r.useEffect)((function(){return k(),window.addEventListener("resize",k),function(){window.removeEventListener("resize",k)}})),c.a.createElement("section",{className:Oe("home-content")},c.a.createElement(I,{books:o}),c.a.createElement(ge,{title:"\ucd5c\uadfc \uacf5\uc720\ub41c \ucc45",books:l.slice(0,8)}),c.a.createElement(ge,{title:"\ud3c9\uc810 \uc88b\uc740 \ucc45",books:i}),c.a.createElement("section",{className:Oe("books-wrapper")},c.a.createElement("section",{className:Oe("book-category-section")},c.a.createElement("div",{className:Oe("book-category-div")},c.a.createElement("ul",{className:Oe("book-category-ul")},f?h.slice(0,7).map((function(e){return c.a.createElement("li",{key:Object(C.a)(),className:Oe("book-category-li","".concat(s===e?"selected":"")),onClick:a,"data-value":e},e)})):h.map((function(e){return c.a.createElement("li",{key:Object(C.a)(),className:Oe("book-category-li","".concat(s===e?"selected":"")),onClick:a,"data-value":e},e)})))),c.a.createElement("div",{className:Oe("more-container"),onClick:function(){g((function(e){return!e}))}},f?"\ub354 \ubcf4\uae30":"\uc228\uae30\uae30",c.a.createElement(be.a,{className:Oe("more"),icon:f?ve.a:ve.b}))),c.a.createElement(de,{booklist:t,handleMore:n,from:"home",type:s,done:m})))},he=a(76),ke=function(e){var t=e.title,a=e.keywords,n=e.description;return c.a.createElement(he.a,null,n&&c.a.createElement("meta",{name:"description",content:n}),a&&c.a.createElement("meta",{name:"keywords",content:a}),c.a.createElement("title",null,t),c.a.createElement("meta",{property:"og:title",content:t}),c.a.createElement("meta",{name:"twitter:title",content:t}))},Se=a(20);V.a.config();var _e="https://happread.herokuapp.com/";console.log(_e);var Ne,we=function(e,t){return F.a.get("".concat(_e,"books/type/").concat(decodeURI(e),"?page=").concat(t))},ye=function(e,t,a){return F.a.get("".concat(_e,"book/search?q=").concat(decodeURI(e),"&type=",0))},Ce=function(e){return F.a.get("".concat(_e,"book/").concat(e))},Re=function(e,t,a){return F.a.post("".concat(_e,"book/").concat(e),{vote:a,name:t})},Ie=function(e){var t=e._id,a=e.title,n=e.contents,r=e.genres;return F.a.put("".concat(_e,"book/").concat(t),{title:a,contents:n,genres:r})},Pe=function(e,t){return{type:"GET_BOOKS",payload:we(e,t)}},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ";arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"GET_SEARCH_BOOKS",payload:ye(e)}},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"GET_MORE_BOOKS",payload:ye(e)}},Ue=function(e){return{type:"GET_DETAIL",payload:Ce(e)}},De=Object(B.a)((K={},Object(x.a)(K,"GET_SLIDER_BOOKS_PENDING",(function(e,t){return Object(O.a)({},e,{sliderPending:!0,sliderError:!1,sliderSuccess:!1})})),Object(x.a)(K,"GET_SLIDER_BOOKS_SUCCESS",(function(e,t){var a=t.payload.data.books;return Object(O.a)({},e,{sliderBooks:a,sliderPending:!1,sliderSuccess:!0})})),Object(x.a)(K,"GET_SLIDER_BOOKS_FAILURE",(function(e,t){return Object(O.a)({},e,{sliderPending:!1,sliderError:!0})})),Object(x.a)(K,"GET_BOOKS_PENDING",(function(e,t){return Object(O.a)({},e,{pending:!0,error:!1})})),Object(x.a)(K,"GET_BOOKS_SUCCESS",(function(e,t){var a=t.payload.data,n=a.books,r=a.page;return Object(O.a)({},e,{allBookPending:!1,allBookError:!1,allBookDone:n.length<15,books:void 0===e.books||1===parseInt(r,10)?n:[].concat(Object(Se.a)(e.books),Object(Se.a)(n))})})),Object(x.a)(K,"GET_BOOKS_FAILURE",(function(e,t){return Object(O.a)({},e,{pending:!1,error:!0})})),Object(x.a)(K,"GET_SEARCH_BOOKS_PENDING",(function(e,t){return Object(O.a)({},e,{pending:!0,error:!1})})),Object(x.a)(K,"GET_SEARCH_BOOKS_SUCCESS",(function(e,t){var a=t.payload.data.books;return Object(O.a)({},e,{pending:!1,error:!1,books:a})})),Object(x.a)(K,"GET_MORE_BOOKS_PENDING",(function(e,t){return Object(O.a)({},e,{morePending:!0,moreError:!1})})),Object(x.a)(K,"GET_MORE_BOOKS_SUCCESS",(function(e,t){var a=t.payload.data.documents;return Object(O.a)({},e,{morePending:!1,moreError:!1,books:[].concat(Object(Se.a)(e.books),Object(Se.a)(a))})})),Object(x.a)(K,"GET_MORE_BOOKS_FAILURE",(function(e,t){return Object(O.a)({},e,{morePending:!1,moreError:!0})})),Object(x.a)(K,"POST_RATE_PENDING",(function(e,t){return Object(O.a)({},e,{vote_pending:!0,vote_error:!1,vote_success:!1})})),Object(x.a)(K,"POST_RATE_SUCCESS",(function(e,t){var a=t.payload.data.book;return Object(O.a)({},e,{vote_pending:!1,vote_error:!1,vote_success:!0,book:a})})),Object(x.a)(K,"POST_RATE_FAILURE",(function(e,t){return Object(O.a)({},e,{vote_pending:!1,vote_error:!0,vote_success:!1})})),Object(x.a)(K,"GET_DETAIL_PENDING",(function(e,t){return Object(O.a)({},e,{bookPending:!0,bookError:!1})})),Object(x.a)(K,"GET_DETAIL_SUCCESS",(function(e,t){var a=t.payload.data.book;return Object(O.a)({},e,{bookPending:!1,bookSuccess:!0,book:a,votes:a.votes})})),Object(x.a)(K,"GET_DETAIL_FAILURE",(function(e,t){return Object(O.a)({},e,{bookPending:!1,bookError:!0})})),Object(x.a)(K,"GET_RECENT_BOOKS_PENDING",(function(e,t){return Object(O.a)({},e,{recentPending:!0,recentError:!1,recentSuccess:!1})})),Object(x.a)(K,"GET_RECENT_BOOKS_SUCCESS",(function(e,t){var a=t.payload.data;return Object(O.a)({},e,{recentBooks:a,recentPending:!1,recentSuccess:!0})})),Object(x.a)(K,"GET_RECENT_BOOKS_FAILURE",(function(e,t){return Object(O.a)({},e,{recentPending:!0,recentError:!0})})),Object(x.a)(K,"GET_POPULAR_BOOKS_PENDING",(function(e,t){return Object(O.a)({},e,{popularPending:!0,popularError:!1,popularSuccess:!1})})),Object(x.a)(K,"GET_POPULAR_BOOKS_SUCCESS",(function(e,t){var a=t.payload.data;return Object(O.a)({},e,{popularBooks:a,popularPending:!1,popularSuccess:!0})})),Object(x.a)(K,"GET_POPULAR_BOOKS_FAILURE",(function(e,t){return Object(O.a)({},e,{popularPending:!0,popularError:!0})})),Object(x.a)(K,"EDIT_BOOK_PENDING",(function(e,t){return Object(O.a)({},e,{editBookPending:!0,editBookSuccess:!1,editBookFailure:!1})})),Object(x.a)(K,"EDIT_BOOK_SUCCESS",(function(e,t){return Object(O.a)({},e,{editBookPending:!1,editBookSuccess:!0})})),Object(x.a)(K,"EDIT_BOOK_FAILURE",(function(e,t){return Object(O.a)({},e,{editBookPending:!1,editBookFailure:!0})})),K),{allBookPending:!1,allBookPerror:!1,allBookDone:!1,books:[],morePending:!1,moreError:"",sliderBooks:[],sliderPending:!1,sliderError:!1,sliderSuccess:!1,total:0,vote_pending:!1,vote_error:!1,vote_success:!1,term:"",book:{},bookPending:!1,bookSuccess:!1,bookFailure:!1,recentBooks:[],recentPending:!1,recentError:!1,recentSuccess:!1,popularBooks:[],popularPending:!1,popularError:!1,popularSuccess:!1,editBookPending:!1,editBookSuccess:!1,editBookFailure:!1}),Ge=a(79),xe=a.n(Ge),Be=E.a.bind(xe.a),Ae=function(){return c.a.createElement("section",{className:Be("loading")},c.a.createElement(ue.ChasingDots,{color:"white",size:60}))},Fe=function(){var e=Object(r.useState)(!0),t=Object(u.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)("\uc804\uccb4"),l=Object(u.a)(o,2),i=l[0],s=l[1],m=Object(r.useState)(1),d=Object(u.a)(m,2),p=d[0],E=d[1],b=Object(G.c)(),f=Object(G.d)((function(e){return e.books})),g=f.allBookDone,O=f.allBookPending,j=f.sliderPending,h=f.recentPending,k=f.popularPending,S=f.books,_=f.sliderBooks,N=f.recentBooks,w=f.popularBooks;Object(r.useEffect)((function(){n(!0),b(Pe("\uc804\uccb4",1)),b({type:"GET_SLIDER_BOOKS",payload:F.a.get("".concat(_e,"book/sliders"))}),b({type:"GET_RECENT_BOOKS",payload:F.a.get("".concat(_e,"books/recent"))}),b({type:"GET_POPULAR_BOOKS",payload:F.a.get("".concat(_e,"books/popular"))}),n(!1)}),[b]);var y=Object(r.useCallback)((function(e){var t=e.target.dataset;s(t.value)}),[s]),C=Object(r.useCallback)((function(){g||(b(Pe("\uc804\uccb4",p+1)),E(p+1))}),[b,p,g]);return c.a.createElement("main",null,c.a.createElement(ke,{title:"Home | HappReads",description:"\ucc45\ub4e4\uc744 \uacf5\uc720 \uadf8\ub9ac\uace0 \ub9ac\ubdf0\ud558\uba70 \uc77d\uc5b4\ubcf4\uc9c0 \ubabb\ud55c \uc0c8\ub85c\uc6b4 \ucc45\uc744 \ubc1c\uacac\ud558\uc138\uc694!!",keywords:"\ucc45, \ucc45 \uacf5\uc720, \ucc45 \ub9ac\ubdf0, HappReads, happreads"}),a||O||j||h||k?c.a.createElement(Ae,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(v,null),c.a.createElement(je,{booklist:S,sliderBooks:_,recentBooks:N,popularBooks:w,handleClick:y,handleMore:C,done:g,type:i,page:p})))},He=a(80),Ve=a.n(He),Ke=a(81),Me=a.n(Ke),We=E.a.bind(Me.a),Ye=function(e){var t=e.type;return c.a.createElement("div",{className:We("social-login")},c.a.createElement("h2",null,"login"===t?"Login to HappReads":"Sign up for HappReads"),c.a.createElement("button",{className:We("github","button")},c.a.createElement("span",{className:We("icon")},c.a.createElement(D.d,null)),"Github\uc73c\ub85c \ub85c\uadf8\uc778"))},qe=E.a.bind(Ve.a),ze=function(e){var t=e.loginRequest,a=(e.login_success,e.login_pending,Object(r.useState)("")),n=Object(u.a)(a,2),o=n[0],l=n[1],s=Object(r.useState)(""),m=Object(u.a)(s,2),d=m[0],p=m[1],E=Object(r.useCallback)((function(e){e.preventDefault(),t(o,d)}),[o,d,t]),b=Object(r.useCallback)((function(e){l(e.target.value)}),[]),v=Object(r.useCallback)((function(e){p(e.target.value)}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:qe("login-form","form-container")},c.a.createElement(Ye,{type:"login"}),c.a.createElement("form",{onSubmit:E},c.a.createElement("input",{type:"email",value:o,onChange:b,placeholder:"\uc774\uba54\uc77c",required:!0}),c.a.createElement("input",{type:"password",value:d,onChange:v,placeholder:"\ube44\ubc00\ubc88\ud638",required:!0}),c.a.createElement("input",{type:"submit",value:"\ub85c\uadf8\uc778"})),c.a.createElement(i.b,{to:"/signup"},c.a.createElement("button",null,"\uac00\uc785"))))},Je=a(82),Xe=a.n(Je),Qe=E.a.bind(Xe.a),Ze=function(e){var t=e.type,a=e.children;return c.a.createElement("div",{className:Qe(["notice-container",t])},a)},$e=function(){var e=Object(G.d)((function(e){return e.login})),t=e.isLoggedIn,a=e.loginPending,n=e.loginSuccess,r=e.loginError,o=Object(G.c)(),l=function(){var e=Object(ae.a)(te.a.mark((function e(t,a){var n,r,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o({type:"LOGIN",payload:M(t,a)});case 3:n=e.sent,r=n.value,c=r.data,200===r.status&&(l=c.token,localStorage.setItem("atk",l)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}var l}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}();return!0===t?c.a.createElement(s.a,{to:"/"}):c.a.createElement(c.a.Fragment,null,c.a.createElement(ke,{title:"Login | HappReads"}),r&&c.a.createElement(Ze,{type:"error"},"\ub4f1\ub85d\ub418\uc9c0 \uc54a\uc740 \uc774\uba54\uc77c \ud639\uc740 \ube44\ubc00\ubc88\ud638\uac00 \ud2c0\ub838\uc2b5\ub2c8\ub2e4"),c.a.createElement(ze,{loginRequest:l,login_pending:a,login_success:n}))},et=a(83),tt=a.n(et),at=E.a.bind(tt.a),nt=function(e){var t=e.handleSignUp,a=Object(r.useState)(""),n=Object(u.a)(a,2),o=n[0],l=n[1],i=Object(r.useState)({p1:"",p2:""}),s=Object(u.a)(i,2),m=s[0],d=s[1],p=Object(r.useCallback)((function(e){var t=e.target;l(t.value)}),[]),E=Object(r.useCallback)((function(e){var t=e.target;d(Object(O.a)({},m,{p1:t.value}))}),[m]),b=Object(r.useCallback)((function(e){var t=e.target;d(Object(O.a)({},m,{p2:t.value}))}),[m]);return c.a.createElement("section",{className:at("signup-form","form-container")},c.a.createElement(Ye,{type:"signup"}),c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=m.p1;a===m.p2&&t(o,a)}},c.a.createElement("input",{type:"email",value:o,onChange:p,placeholder:"\uc774\uba54\uc77c",required:!0}),c.a.createElement("input",{type:"password",value:m.p1,onChange:E,placeholder:"\ube44\ubc00\ubc88\ud638",required:!0}),c.a.createElement("input",{type:"password",value:m.p2,onChange:b,placeholder:"\ube44\ubc00\ubc88\ud638 \uc7ac\uc785\ub825",required:!0}),c.a.createElement("input",{type:"submit",value:"\uac00\uc785"})))};V.a.config(),F.a.defaults.baseURL="https://happread.herokuapp.com/";var rt,ct=function(e,t){return F.a.post("signup",{email:e,password:t})},ot=function(e,t){return{type:"SIGNUP",payload:ct(e,t)}},lt=Object(B.a)((Ne={},Object(x.a)(Ne,"SIGNUP_PENDING",(function(e,t){return{signup_pending:!0,signup_success:!1,signup_error:!1}})),Object(x.a)(Ne,"SIGNUP_SUCCESS",(function(e,t){return{signup_pending:!1,signup_success:!0}})),Object(x.a)(Ne,"SIGNUP_FAILURE",(function(e,t){return{signup_pending:!1,signup_error:!0}})),Ne),{signup_pending:!1,signup_success:!1,signup_error:!1}),it=function(e){var t=e.history,a=Object(G.c)(),n=Object(G.d)((function(e){return e.signup})),r=n.signup_pending,o=n.signup_success,l=n.signup_error,i=Object(G.d)((function(e){return e.login})).isLoggedIn,u=function(){var e=Object(ae.a)(te.a.mark((function e(t,n){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(ot(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return i?c.a.createElement(s.a,{to:"/"}):o?c.a.createElement(s.a,{to:"/login"}):c.a.createElement(c.a.Fragment,null,c.a.createElement(ke,{title:"SignUp | HappReads"}),c.a.createElement(nt,{history:t,handleSignUp:u,signup_pending:r,signup_success:o,signup_error:l}))},st=a(84),ut=a.n(st),mt=a(85),dt=a.n(mt),pt=function(){return localStorage.getItem("atk")},Et=function(e){if(e){var t=0;if(e.length>0){for(var a=0;a<e.length;a++)t+=parseInt(e[a].vote);return(t/e.length).toFixed(2)}return 0}return 0},bt=E.a.bind(dt.a),vt=function(e){var t,a,n=e.profile,o=e.isOpen,l=e.handleClose,i=Object(r.useState)({seletedImg:null,avatarUrl:n?n.avatarUrl:void 0,nickname:n?n.name:"",website:n?n.website:"",intro:n?n.intro:"",interest:n?n.interest:""}),s=Object(u.a)(i,2),m=s[0],d=s[1],p=function(){var e=Object(ae.a)(te.a.mark((function e(){var t,a,r,c,o,l;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.seletedImg,a=m.nickname,r=m.website,c=m.interest,o=m.intro,(l=new FormData).append("avatar",t),l.append("email",n.email),l.append("nickname",a),l.append("website",r),l.append("interest",c),l.append("intro",o),e.prev=8,e.next=11,F.a.post("http://localhost:8080/edit",l);case 11:window.location.href="/me",e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[8,14]])})));return function(){return e.apply(this,arguments)}}(),E=Object(r.useCallback)((function(e){var t=e.target.files;d(Object(O.a)({},m,{seletedImg:t[0]})),function(e){var t=URL.createObjectURL(e);document.querySelector(".preview-img").src=t}(t[0])}),[m,d]),b=Object(r.useCallback)((function(e){var t=e.target;d(Object(O.a)({},m,{nickname:t.value}))}),[m,d]),v=Object(r.useCallback)((function(e){var t=e.target;d(Object(O.a)({},m,{website:t.value}))}),[m,d]),f=Object(r.useCallback)((function(e){var t=e.target;d(Object(O.a)({},m,{interest:t.value}))}),[m,d]),g=Object(r.useCallback)((function(e){var t=e.target;d(Object(O.a)({},m,{intro:t.value}))}),[m,d]);return c.a.createElement("section",{className:bt("user-edit",o?"close":"open")},c.a.createElement("div",{className:bt("x-button")},c.a.createElement("p",{onClick:l},c.a.createElement("span",{role:"img","aria-label":"close"},"\u274c"))),c.a.createElement("section",{className:bt("form-container")},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),p()}},c.a.createElement("div",{className:bt("upload-btn-wrapper")},c.a.createElement("img",{className:bt("preview-img"),alt:"\uc0ac\uc6a9\uc790 \uc774\ubbf8\uc9c0",src:(a=null===m||void 0===m?void 0:m.avatarUrl,void 0===a?"https://wetuberbucket.s3.ap-northeast-2.amazonaws.com/avatars/58c11a401956bab841de5f227c337c43":a)}),c.a.createElement("div",{style:{position:"relative"}},c.a.createElement("button",{className:bt("btn")},void 0===(null===m||void 0===m?void 0:null===(t=m.seletedImg)||void 0===t?void 0:t.name)?"\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc":m.seletedImg.name),c.a.createElement("input",{type:"file",name:"avatar",onChange:E}))),c.a.createElement("input",{type:"text",name:"nickname",value:null===m||void 0===m?void 0:m.nickname,placeholder:"\ub2c9\ub124\uc784",onChange:b}),c.a.createElement("input",{type:"email",name:"website",placeholder:"\uc6f9 \uc0ac\uc774\ud2b8 ex) http://www.example.com",value:null===m||void 0===m?void 0:m.website,onChange:v}),c.a.createElement("input",{type:"text",name:"interest",placeholder:"\ucde8\ubbf8",value:null===m||void 0===m?void 0:m.interest,onChange:f}),c.a.createElement("textarea",{name:"intro",placeholder:"\uc18c\uac1c",value:null===m||void 0===m?void 0:m.intro,onChange:g}),c.a.createElement("input",{type:"submit",value:"\uc218\uc815"})),c.a.createElement("button",{onClick:l},"\ucde8\uc18c")))},ft=a(86),gt=a.n(ft),Ot=a(25),jt=a.n(Ot);V.a.config(),F.a.defaults.baseURL="https://happread.herokuapp.com/";var ht,kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return F.a.get("reviews?limit=".concat(e,"&page=").concat(t))},St=function(e,t,a,n){return F.a.post("book/".concat(e,"/review"),{name:t,content:a,book:n})},_t=function(e,t){return F.a.post("book/review/".concat(e),{content:t})},Nt=function(e,t,a){return F.a.post("review/like",{type:e,id:t,uid:a})},wt=function(e){return{type:"GET_REVIEWS",payload:kt(e.limit,e.page)}},yt=function(e){return{type:"GET_REVIEW",payload:(t=e,F.a.get("book/".concat(t,"/review")))};var t},Ct=function(e,t,a,n){return{type:"POST_REVIEW",payload:St(e,t,a,n)}},Rt=function(e,t){return{type:"EDIT_REVIEW",payload:_t(e,t)}},It=function(e,t,a){return{type:"LIKE_REVIEW",payload:Nt(e,t,a)}},Pt=Object(B.a)((rt={},Object(x.a)(rt,"GET_REVIEWS_PENDING",(function(e,t){return Object(O.a)({},e,{loadReviewsPending:!0,loadReviewsError:!1,loadReviewsSuccess:!1,loadReviewsDone:!1})})),Object(x.a)(rt,"GET_REVIEWS_SUCCESS",(function(e,t){var a=t.payload.data,n=a.reviews,r=a.page;return Object(O.a)({},e,{reviews:1!==parseInt(r)?[].concat(Object(Se.a)(e.reviews),Object(Se.a)(n)):Object(Se.a)(n),loadReviewsPending:!1,loadReviewsSuccess:!0,loadReviewsDone:n.length%5!==0})})),Object(x.a)(rt,"GET_REVIEWS_FAILURE",(function(e,t){return Object(O.a)({},e,{loadReviewsPending:!1,loadReviewsError:!0,loadReviewsDone:!1})})),Object(x.a)(rt,"POST_REVIEW_PENDING",(function(e,t){return Object(O.a)({},e,{postReviewPending:!0,postReviewSuccess:!1,postReviewError:!1})})),Object(x.a)(rt,"POST_REVIEW_SUCCESS",(function(e,t){return Object(O.a)({},e,{reviews:t.payload.data.reviews,postReviewPending:!1,postReviewSuccess:!0})})),Object(x.a)(rt,"POST_REVIEW_FAILURE",(function(e,t){return Object(O.a)({},e,{postReviewPending:!1,postReviewError:!0})})),Object(x.a)(rt,"GET_REVIEW_PENDING",(function(e,t){return Object(O.a)({},e,{error:!1,pending:!0,success:!1})})),Object(x.a)(rt,"GET_REVIEW_SUCCESS",(function(e,t){return{reviews:t.payload.data.reviews,error:!1,pending:!1,success:!0}})),Object(x.a)(rt,"GET_REVIEW_FAILURE",(function(e,t){return{error:!0,pending:!1,success:!1}})),Object(x.a)(rt,"EDIT_REVIEW_PENDING",(function(e,t){return Object(O.a)({},e,{pending:!0,error:!1,success:!1})})),Object(x.a)(rt,"EDIT_REVIEW_SUCCESS",(function(e,t){return Object(O.a)({},e,{reviews:t.payload.data.reviews,pending:!1,error:!1,success:!0})})),Object(x.a)(rt,"EDIT_REVIEW_FAILURE",(function(e,t){return Object(O.a)({},e,{pending:!1,error:!0,success:!1})})),Object(x.a)(rt,"LIKE_REVIEW_PENDING",(function(e,t){return Object(O.a)({},e,{pending:!0,error:!1})})),Object(x.a)(rt,"LIKE_REVIEW_SUCCESS",(function(e,t){var a=t.payload.data.review,n=-1;e.reviews.forEach((function(e,t){e._id===a._id&&(n=t)})),e.reviews[n]=a;var r=e.reviews;return Object(O.a)({},e,{pending:!1,error:!1,success:!0,reviews:Object(Se.a)(r)})})),Object(x.a)(rt,"LIKE_REVIEW_FAILURE",(function(e,t){return Object(O.a)({},e,{pending:!1,error:!0})})),rt),{reviews:[],pending:!1,success:!1,error:!1,loadReviewsPending:!1,loadReviewsError:!1,loadReviewsSuccess:!1,loadReviewsDone:!1,postReviewPending:!1,postReviewSuccess:!1,postReviewError:!1});V.a.config(),F.a.defaults.baseURL="https://happread.herokuapp.com/";var Lt,Tt=function(e){return F.a.get("profile/".concat(e))},Ut=function(e){return{type:"GET_USER",payload:Tt(e)}},Dt=Object(B.a)((ht={},Object(x.a)(ht,"GET_USER_PENDING",(function(e,t){return Object(O.a)({},e,{pending:!0,error:!1})})),Object(x.a)(ht,"GET_USER_SUCCESS",(function(e,t){return{pending:!1,error:!1,profile:t.payload.data.user}})),Object(x.a)(ht,"GET_USER_FAILURE",(function(e,t){return Object(O.a)({},e,{pending:!1,error:!0})})),Object(x.a)(ht,"GET_TOP_READERS_PENDING",(function(e,t){return Object(O.a)({},e,{pending:!0,error:!1})})),Object(x.a)(ht,"GET_TOP_READERS_SUCCESS",(function(e,t){var a=t.payload.data.readers;return Object(O.a)({},e,{topReaders:a,pending:!1,error:!1})})),Object(x.a)(ht,"GET_TOP_READERS_FAILURE",(function(e,t){return Object(O.a)({},e,{pending:!1,error:!0})})),Object(x.a)(ht,"GET_TOP_REVIEWERS_PENDING",(function(e,t){return Object(O.a)({},e,{pending:!0,error:!1})})),Object(x.a)(ht,"GET_TOP_REVIEWERS_SUCCESS",(function(e,t){var a=t.payload.data.reviewers;return Object(O.a)({},e,{topReviewers:a,pending:!1,error:!1})})),Object(x.a)(ht,"GET_TOP_REVIEWERS_FAILURE",(function(e,t){return Object(O.a)({},e,{pending:!1,error:!0})})),ht),{pending:!1,error:!1,profile:{},topReaders:[],topReviewers:[]}),Gt=a(87),xt=a.n(Gt),Bt=E.a.bind(xt.a),At=function(e){var t=e.review,a=e.handleClose,n=Object(r.useState)((null===t||void 0===t?void 0:t.content)||""),o=Object(u.a)(n,2),l=o[0],i=o[1],s=Object(G.c)(),m=Object(G.d)((function(e){return e.login})).isLoggedIn,d=Object(r.useCallback)(Object(ae.a)(te.a.mark((function e(){var t;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=pt())try{s(J(t))}catch(a){console.log(a)}case 2:case"end":return e.stop()}}),e)}))),[s]),p=Object(r.useCallback)(function(){var e=Object(ae.a)(te.a.mark((function e(t,a){var n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(Rt(t,a));case 3:n=e.sent,200===n.value.status&&d(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}(),[d,s]),E=Object(r.useCallback)((function(e){e.preventDefault(),m&&p(t._id,l)}),[l,m,t,p]);return Object(r.useEffect)((function(){return function(){}})),c.a.createElement("section",{className:Bt(["review-modal","modal-container"])},c.a.createElement("section",{className:"modal-overlay"},c.a.createElement("div",{className:"modal"},c.a.createElement("div",{className:Bt("form-container")},c.a.createElement("img",{src:void 0!==t.book?t.book.thumbnail:"",alt:void 0!==t.book?t.book.title:""}),c.a.createElement("form",{onSubmit:E},c.a.createElement("textarea",{value:l,onChange:function(e){var t=e.target;i(t.value)}},l),c.a.createElement("input",{type:"submit",value:"\uc218\uc815"}),c.a.createElement("button",{className:Bt("cancel"),onClick:a},"\ucde8\uc18c"))))))},Ft=E.a.bind(gt.a),Ht=function(e){var t=e.profile,a=e.isMe,n=Object(r.useState)(null),o=Object(u.a)(n,2),l=o[0],s=o[1],m=Object(r.useState)(!1),d=Object(u.a)(m,2),p=d[0],E=d[1],b=Object(G.c)(),v=Object(G.d)((function(e){return e.login})),f=v.profile,g=v.pending,O=v.isLoggedIn;Object(r.useEffect)((function(){return function(){}}));var j=Object(r.useCallback)((function(){if(a){var e=pt();e&&b(J(e))}else b(Ut(t._id))}),[b,a,t]),h=function(e){var t=e.currentTarget,a=t.getAttribute("data-bid"),n=t.getAttribute("data-value"),r=f.user._id;k(a,n,r)},k=function(){var e=Object(ae.a)(te.a.mark((function e(t,a,n){var r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(Z(t,a,n));case 3:r=e.sent,200===r.value.status&&j(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),S=Object(r.useCallback)(function(){var e=Object(ae.a)(te.a.mark((function e(a,n){var r,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(It(a,n,t._id,f.user._id));case 3:r=e.sent,200===(c=r.value.status)&&(console.log(c),j()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}(),[b,f,t,j]),_=Object(r.useCallback)((function(e){return function(t){O?S("like",e):alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4")}}),[S,O]),N=Object(r.useCallback)((function(e){return function(t){E(!0),s(e)}}),[]),w=Object(r.useCallback)((function(){E(!1),s(null)}),[]);return c.a.createElement("div",{className:Ft("user-review")},!1===g&&t&&t.reviews&&t.reviews.map((function(e){return function(e,t,a,n,r,o){var l;return c.a.createElement("section",{className:Ft("review-container"),id:e._id,key:Object(C.a)()},c.a.createElement("div",null,c.a.createElement(i.b,{to:"/book/".concat(null===(l=e.book)||void 0===l?void 0:l._id)},c.a.createElement("img",{src:void 0!==e.book?e.book.thumbnail:"",alt:void 0!==e.book?e.book.title:""}))),c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("p",{className:Ft("review-book")},void 0!==e.book?e.book.title:""),c.a.createElement("p",{className:Ft("review-text")},void 0!==e.book?e.content:""),c.a.createElement("p",{className:Ft("review-date")},jt()(e.createdAt).format("YYYY\ub144 MM\uc6d4 DD\uc77c HH:MM:SS")),c.a.createElement("p",{className:Ft("like-container")},c.a.createElement("span",{className:Ft("review-like")},e.likes.length," likes"),c.a.createElement("span",{className:Ft("likebtn"),onClick:t(e._id)},c.a.createElement(D.e,null))))),o===r?c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:Ft("review-edit"),"data-value":e._id,onClick:n(e)},c.a.createElement(D.c,null)),c.a.createElement("span",{className:Ft("review-remove"),"data-value":e._id,"data-bid":e.book._id,onClick:a},c.a.createElement(D.k,null))):null)}(e,_,h,N,f.user._id,t._id)})),p&&c.a.createElement(At,{review:l,handleClose:w}))},Vt=E.a.bind(ut.a),Kt=function(e){var t,a,n,o,l,s,m,d,p=e.profile,E=e.from,b=Object(r.useState)(!1),v=Object(u.a)(b,2),f=v[0],g=v[1],O=Object(r.useState)(0),j=Object(u.a)(O,2),h=j[0],k=j[1],S=Object(r.useState)("/me"===E),_=Object(u.a)(S,2),N=_[0],w=_[1],y=Object(r.useCallback)((function(){g(!0)}),[]),R=Object(r.useCallback)((function(){g(!1)}),[]),I=Object(r.useCallback)((function(e){return function(t){k(e)}}),[]);Object(r.useEffect)((function(){return w("/me"===E),function(){}}),[E]);var P=function(e,t,a){var n,r,o,l,s,u;return"uploaded"!==a?"/me"===e?t&&(null===(n=t[a])||void 0===n?void 0:n.length)>0?c.a.createElement("div",null,c.a.createElement(de,{booklist:t[a],from:"profile",type:a})):c.a.createElement("p",{className:Vt("recent-empty")},"\ucd5c\uadfc \uc544\ubb34 \ud65c\ub3d9\ub3c4 \uc5c6\uc2b5\ub2c8\ub2e4."):t&&(null===(r=t[a])||void 0===r?void 0:r.length)>0?c.a.createElement("div",null,c.a.createElement(de,{booklist:t[a],from:"profile"})):c.a.createElement("p",{className:Vt("recent-empty")},"\ucd5c\uadfc \uc544\ubb34 \ud65c\ub3d9\ub3c4 \uc5c6\uc2b5\ub2c8\ub2e4."):"/me"===e?t&&(null===t||void 0===t?void 0:null===(o=t.uploaded)||void 0===o?void 0:o.length)>0?c.a.createElement("div",{className:Vt("uploaded-list")},null===t||void 0===t?void 0:null===(l=t.uploaded)||void 0===l?void 0:l.map((function(e){return c.a.createElement("div",{className:Vt("uploaded-img-wrapper"),key:Object(C.a)()},c.a.createElement("img",{className:Vt("uploaded-img"),src:e.thumbnail,alt:e.thumbnail}),c.a.createElement("div",{className:Vt("to-detail")},c.a.createElement(i.b,{to:"/book/".concat(e._id)},e.title)))}))):c.a.createElement("p",{className:Vt("recent-empty")},"\ucd5c\uadfc \uc544\ubb34 \ud65c\ub3d9\ub3c4 \uc5c6\uc2b5\ub2c8\ub2e4."):t&&(null===t||void 0===t?void 0:null===(s=t.uploaded)||void 0===s?void 0:s.length)>0?c.a.createElement("div",{className:Vt("uploaded-list")},null===t||void 0===t?void 0:null===(u=t.uploaded)||void 0===u?void 0:u.map((function(e){return c.a.createElement("div",{className:Vt("uploaded-img-wrapper"),key:Object(C.a)()},c.a.createElement("img",{className:Vt("uploaded-img"),src:e.thumbnail,alt:e.thumbnail}),c.a.createElement("div",{className:Vt("to-detail")},c.a.createElement(i.b,{to:"/book/".concat(e._id)},"\uc0c1\uc138 \ud398\uc774\uc9c0")))}))):c.a.createElement("p",{className:Vt("recent-empty")},"\ucd5c\uadfc \uc544\ubb34 \ud65c\ub3d9\ub3c4 \uc5c6\uc2b5\ub2c8\ub2e4.")};return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:Vt("user-profile")},c.a.createElement("section",{className:Vt("profile-wrapper")},c.a.createElement("div",{className:Vt("info")},c.a.createElement("img",{src:p&&void 0!==p?p.avatarUrl:"",alt:p&&void 0!==p?p.email:""}),c.a.createElement("h1",null,p&&void 0!==p?p.email:""),c.a.createElement("div",{className:Vt("profile-edit")},"/me"===E?c.a.createElement("p",{to:"/edit",onClick:y},"\ud504\ub85c\ud544 \uc218\uc815"):null),c.a.createElement("div",{className:Vt("rate-review")},c.a.createElement("p",null,p&&void 0!==p?null===p||void 0===p?void 0:null===(t=p.votes)||void 0===t?void 0:t.length:0,"\ud3c9\uac00"),c.a.createElement("p",null,p&&void 0!==p?null===p||void 0===p?void 0:null===(a=p.reviews)||void 0===a?void 0:a.length:0,"\ub9ac\ubdf0")),c.a.createElement("p",{className:Vt("intro")},p&&void 0!==p?null===p||void 0===p?void 0:p.intro:0))),c.a.createElement("section",null,c.a.createElement("ul",{className:Vt("catalog-list")},c.a.createElement("li",{className:0===h?Vt("active"):"",onClick:I(0)},"\ucc45"),c.a.createElement("li",{className:1===h?Vt("active"):"",onClick:I(1)},"\ub9ac\ubdf0")),c.a.createElement("section",{style:0===h?{display:"block"}:{display:"none"}},c.a.createElement("section",{className:Vt("uploaded")},c.a.createElement("div",{className:Vt("uploaded-head")},"/me"===E?c.a.createElement(i.b,{to:p&&void 0!==p?"shelve/".concat(null===p||void 0===p?void 0:p._id):"/"},c.a.createElement("h2",null,"\uc5c5\ub85c\ub4dc \ud55c \ucc45")):c.a.createElement("h2",null,"\uc5c5\ub85c\ub4dc \ud55c \ucc45")),c.a.createElement("div",{className:Vt("uploaded-body"),style:{marginLeft:"5px",marginTop:"5px"}},P(E,p,"uploaded"))),c.a.createElement("section",{className:Vt("want-read")},c.a.createElement("div",{className:Vt("want-read-head")},"/me"===E?c.a.createElement("h2",null,"\uc77d\uc744 \ucc45 (",p&&void 0!==p?null===p||void 0===p?void 0:null===(n=p.want_read)||void 0===n?void 0:n.length:0,")"):c.a.createElement("h2",null,"\uc77d\uc744 \ucc45 (",p&&void 0!==p?null===p||void 0===p?void 0:null===(o=p.want_read)||void 0===o?void 0:o.length:0,")")),c.a.createElement("div",{className:Vt("want-read-body")},P(E,p,"want_read")),c.a.createElement("div",null)),c.a.createElement("section",{className:Vt("currently-reading")},c.a.createElement("div",{className:Vt("currently-head")},"/me"===E?c.a.createElement("h2",null,"\ud604\uc7ac \uc77d\uace0 \uc788\ub294 \ucc45 (",p&&void 0!==p?null===p||void 0===p?void 0:null===(l=p.reading)||void 0===l?void 0:l.length:0,")"):c.a.createElement("h2",null,"\ud604\uc7ac \uc77d\uace0 \uc788\ub294 \ucc45 (",p&&void 0!==p?null===p||void 0===p?void 0:null===(s=p.reading)||void 0===s?void 0:s.length:0,")")),c.a.createElement("div",{className:Vt("currently-body")},P(E,p,"reading"))),c.a.createElement("section",{className:Vt("read")},c.a.createElement("div",{className:Vt("read-head")},"/me"===E?c.a.createElement("h2",null,"\uc77d\uc740 \ucc45 (",p&&void 0!==p?null===p||void 0===p?void 0:null===(m=p.read)||void 0===m?void 0:m.length:0,")"):c.a.createElement("h2",null,"\uc77d\uc740 \ucc45 (",p&&void 0!==p?null===p||void 0===p?void 0:null===(d=p.read)||void 0===d?void 0:d.length:0,")")),c.a.createElement("div",{className:Vt("read-body")},P(E,p,"read")))),c.a.createElement("section",{style:1===h?{display:"block"}:{display:"none"}},c.a.createElement("section",{className:Vt("recent-update")},c.a.createElement("div",{className:Vt("recent-head")},c.a.createElement("h2",null,"\ub9ac\ubdf0")),c.a.createElement("div",{className:Vt("recent-body")},p&&void 0!==p?c.a.createElement(Ht,{key:Object(C.a)(),profile:p,isMe:N}):"\ub9ac\ubdf0 \uc5c6\uc74c"))))),function(e,t,a){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:Vt("modal-overay",e?"open-modal":"close-modal")}),c.a.createElement("div",{className:Vt(e?"open-modal":"close-modal")},c.a.createElement(vt,{handleClose:t,profile:a,isOpen:!e})))}(f,R,p))},Mt=function(e){var t=e.history.location,a=Object(G.d)((function(e){return e.login})),n=a.isLoggedIn,o=a.profile,l=Object(G.d)((function(e){return e.user})).profile,i=Object(G.c)(),s=Object(r.useCallback)(function(){var e=Object(ae.a)(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i(Ut(t))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i]);return Object(r.useEffect)((function(){if("/me"!==t.pathname){var e=t.pathname.substring(1).split("/")[1];s(e)}}),[s,t.pathname]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ke,{title:"Profile | HappReads"}),c.a.createElement(Kt,{isLoggedIn:n,profile:"/me"===t.pathname?null===o||void 0===o?void 0:o.user:l,from:t.pathname}))},Wt=a(88),Yt=a.n(Wt),qt=a(104),zt=a(89),Jt=a.n(zt),Xt=E.a.bind(Jt.a),Qt=["1","2","3","4","5"],Zt={color:"#f1c40f",cursor:"pointer"},$t=function(e){var t=e.book,a=e.postVote,n=e.votes,o=Object(G.d)((function(e){return e.login})),l=o.isLoggedIn,i=o.profile,s=Object(r.useCallback)(function(){var e=Object(ae.a)(te.a.mark((function e(n){var r,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._id,c=i.user.email,e.next=4,a(r,c,n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,i,a]),u=Object(r.useCallback)((function(e){for(var t=e.target;"svg"!==t.nodeName;)t=t.parentNode;var a=t.dataset.rating;l?s(a):alert("\ub85c\uadf8\uc778 \ud544\uc694\ud55c \uc11c\ube44\uc2a4 \uc785\ub2c8\ub2e4")}),[l,s]);return c.a.createElement("div",{className:Xt("rater")},Qt.map((function(e,t){return c.a.createElement(D.j,{key:t,"data-rating":t+1,onClick:u,style:n>=t+1?Zt:{}})})))},ea=a(90),ta=a.n(ea),aa=E.a.bind(ta.a),na=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)(!1),l=Object(u.a)(o,2),s=l[0],m=l[1],d=Object(G.c)(),p=Object(G.d)((function(e){return e.login})),E=p.isLoggedIn,b=p.profile,v=Object(G.d)((function(e){return e.review})).reviews,f=Object(G.d)((function(e){return e.books})).book,g=Object(r.useCallback)(Object(ae.a)(te.a.mark((function e(){var t;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=pt())try{d(J(t))}catch(a){console.log(a)}case 2:case"end":return e.stop()}}),e)}))),[d]),O=Object(r.useCallback)(function(){var e=Object(ae.a)(te.a.mark((function e(t){var a;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=b.user.email;try{d(Ct(f._id,a,t,f)),g()}catch(n){console.log(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[f,g,d,b]),j=Object(r.useCallback)((function(e){var t=e.target;n(t.value)}),[]),h=Object(r.useCallback)((function(e){e.preventDefault(),E?(O(a),n("")):alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4")}),[E,a,O]),k=Object(r.useCallback)(function(){var e=Object(ae.a)(te.a.mark((function e(t,a,n){var r,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d(It(t,a,null===b||void 0===b?void 0:null===(r=b.user)||void 0===r?void 0:r._id));case 3:c=e.sent,200===c.value.status&&(n.style.fill="pink",g()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),[d,b,g]),S=Object(r.useCallback)((function(e){var t=e.currentTarget,a=e.target,n=t.getAttribute("data-value");k("like",n,a)}),[k]),_=Object(r.useCallback)((function(){m((function(e){return!e}))}),[]);return c.a.createElement("section",{className:aa("review")},c.a.createElement("p",{className:aa("review-title")},"\ub9ac\ubdf0"),c.a.createElement("section",{className:aa("form-container")},c.a.createElement("form",{onSubmit:h},c.a.createElement("textarea",{onChange:j,value:a}),c.a.createElement("input",{type:"submit",value:"\ub4f1\ub85d"}))),c.a.createElement("section",{className:aa("review-list-wrapper")},v?v.map((function(e){return function(e){return c.a.createElement("article",{key:Object(C.a)(),className:aa("review-item")},c.a.createElement("div",null,c.a.createElement(i.b,{to:e.reviewer?"/profile/".concat(e.reviewer._id):""},c.a.createElement("img",{className:aa("user-img"),src:e.reviewer?e.reviewer.avatarUrl:"",alt:e.reviewer?e.reviewer.avatarUrl:""}),c.a.createElement("span",{className:aa("user")},e.reviewer?e.reviewer.email:""))),c.a.createElement("span",{className:aa("date")},e.createdAt?jt()(e.createdAt).format("YYYY\ub144 MM\uc6d4 DD\uc77c HH:MM:SS"):""),c.a.createElement("article",{style:{marginTop:"10px"}},c.a.createElement("p",{className:aa("user-review")},!s&&e.content.length>30?"".concat(e.content.substr(0,30),"..."):e.content),e.content.length>20&&c.a.createElement("p",{className:aa("more"),onClick:_},s?"\uc904\uc774\uae30":"\ub354\ubcf4\uae30")),c.a.createElement("div",{className:aa("review-footer")},c.a.createElement("span",{className:aa("heart"),onClick:S,"data-value":e._id},c.a.createElement(D.e,null)),c.a.createElement("span",null,e.likes.length," \uc88b\uc544\uc694")))}(e)})):null))},ra=void 0,ca=E.a.bind(Yt.a),oa=[{value:"want_read",label:"\uc77d\uae30"},{value:"reading",label:"\uc77d\ub294\uc911"},{value:"read",label:"\uc77d\uc74c"}],la=function(e){var t=e.profile,a=e.votes,n=e.id,o=e.book,l=e.postVote,s=e.reviews,m=e.postShelveError,d=e.postShelveSuccess,p=e.isLoggedIn,E=Object(r.useState)({value:"want_read",label:"\uc77d\uae30"}),b=Object(u.a)(E,2),v=b[0],f=b[1],g=Object(r.useState)("\uc77d\uae30"),O=Object(u.a)(g,2),j=O[0],h=O[1],k=Object(G.c)(),S=Object(r.useCallback)((function(){var e=t.profile,a=n.isbn;if(e){if(ra.checkStatus(e.want_read,a))return f(oa[0]),void h(oa[0].label);if(ra.checkStatus(e.reading,a))return f(oa[1]),void h(oa[1].label);if(ra.checkStatus(e.read,a))return f(oa[2]),void h(oa[2].label)}}),[n,t]),_=Object(r.useCallback)((function(){var e=v.value;if(p){var a=t.user.email;k(X(a,o._id,e))}else alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud55c \uc11c\ube44\uc2a4 \uc785\ub2c8\ub2e4")}),[k,o,t,v,p]);return Object(r.useEffect)((function(){S()}),[S]),c.a.createElement(c.a.Fragment,null,o?c.a.createElement(c.a.Fragment,null,d&&c.a.createElement(Ze,{type:"success"},"".concat(v.label,"\ubaa9\ub85d\uc5d0 \ucd94\uac00\ub42c\uc2b5\ub2c8\ub2e4")),m&&c.a.createElement(Ze,{type:"error"},"\ubaa9\ub85d \ucd94\uac00\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4"),c.a.createElement("section",{className:ca("book-detail")},c.a.createElement("section",{className:ca("book-rater-list")},c.a.createElement("ul",null,c.a.createElement("li",{className:"star"},c.a.createElement(D.j,null)),o&&o.votes&&o.votes.map((function(e){return c.a.createElement("li",{key:Object(C.a)(),className:"book-rater"},c.a.createElement(i.b,{to:"/profile/".concat(e.voter._id)},c.a.createElement("img",{src:e.voter.avatarUrl,alt:e.voter.emails})))})))),c.a.createElement("section",{className:ca("book-info-wrapper")},c.a.createElement("section",{className:ca("img-col")},c.a.createElement("img",{src:o.thumbnail,alt:"geisha"})),c.a.createElement("section",{className:ca("book-content")},c.a.createElement("h2",{className:ca("title")},o.title),c.a.createElement("p",{className:ca("author")},c.a.createElement("strong",null,"\uc800\uc790 "),function(e){var t="";if(e)for(var a=0;a<e.length;a++)t+="".concat(e[a]," ");return t}(o.authors)),c.a.createElement("section",{className:ca("bookmeta")},c.a.createElement("span",{className:ca("score")},c.a.createElement(D.j,null),Et(a),c.a.createElement(D.a,{className:ca("angle-down")})),c.a.createElement("span",{className:ca("rate-cnt")},a?a.length:0," \ud3c9\uac00"),c.a.createElement("span",{className:ca("review-cnt")},s?s.length:0," \ub9ac\ubdf0")),c.a.createElement("section",{className:ca("discription")},c.a.createElement("h5",null,"\ucc45 \uc18c\uac1c"),c.a.createElement("p",null,void 0!==o.contents?o.contents:"\ub0b4\uc6a9 \uc5c6\uc74c")),c.a.createElement("div",null,c.a.createElement("div",{className:ca("rate-wrapper")},c.a.createElement("span",null,"\ucc45 \ud3c9\uac00\ud558\uae30"),c.a.createElement($t,{postVote:l,book:o,id:n,votes:a&&a.length>0?function(){var e=t.profile,n="0";if(a)for(var r=0;r<a.length;r++){var c;if((null===(c=a[r])||void 0===c?void 0:c._id)===(null===e||void 0===e?void 0:e._id)){n=String(a[r].vote);break}}return n}():"0"})),c.a.createElement("div",{className:ca("add")},c.a.createElement(qt.a,{className:ca("select"),options:oa,onChange:function(e){f(e)},value:v,isSearchable:!1,placeholder:j}),c.a.createElement("button",{className:ca("want-read"),onClick:_},c.a.createElement("span",null,c.a.createElement(D.f,null)),"\ub4f1\ub85d")))))),c.a.createElement(na,null)):c.a.createElement(ue.ChasingDots,{color:"white",size:60}))},ia=function(e){var t=e.match,a=Object(r.useState)(!0),n=Object(u.a)(a,2),o=n[0],l=n[1],i=Object(G.c)(),s=Object(G.d)((function(e){return e.books})),m=s.book,d=s.bookPending,p=Object(G.d)((function(e){return e.review})).reviews,E=Object(G.d)((function(e){return e.login})),b=E.profile,v=E.isLoggedIn,f=E.postShelveSuccess,g=E.postShelveError,O=Object(r.useCallback)(function(){var e=Object(ae.a)(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i(Ue(t)),i(yt(t))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i]);return Object(r.useEffect)((function(){l(!0);var e=t.params.id;window.scrollTo(0,0),O(e),l(!1)}),[O,t]),c.a.createElement("main",{className:"main-container"},c.a.createElement(ke,{title:"".concat(null===m||void 0===m?void 0:m.title," | HappReads"),description:"".concat(null===m||void 0===m?void 0:m.contents)}),o||d?c.a.createElement(Ae,null):c.a.createElement(la,{book:m,id:t.params.id,postVote:function(e,t,a){i(function(e,t,a){return{type:"POST_RATE",payload:Re(e,t,a)}}(e,t,a))},votes:(null===m||void 0===m?void 0:m.votes)||[],reviews:p,profile:b,postShelveSuccess:f,postShelveError:g,isLoggedIn:v}))},sa=a(92),ua=a.n(sa),ma=E.a.bind(ua.a),da=function(){return c.a.createElement("footer",{className:ma("footer")},c.a.createElement("div",{className:ma("footer_icon")}),c.a.createElement("span",{className:ma("footer_text")},"\xa9 HappReads ",jt()().format("YYYY")))},pa=a(93),Ea=a.n(pa),ba=E.a.bind(Ea.a),va=function(e){var t=e.location,a=Object(r.useState)(""),n=Object(u.a)(a,2),o=n[0],l=n[1],i=Object(r.useState)(1),s=Object(u.a)(i,2),m=s[0],d=s[1],p=Object(G.c)(),E=Object(G.d)((function(e){return e.books})).books,b=(Object(r.useCallback)(function(){var e=Object(ae.a)(te.a.mark((function e(t,a){var n,r=arguments;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.length>2&&void 0!==r[2]?r[2]:1;try{p(Te(t,a,n))}catch(c){console.log(c)}case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[p]),Object(r.useCallback)((function(){var e=window.innerHeight,a=document.body.scrollHeight,n=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop,r=t.search,c=decodeURI(r).split("=")[1].replace(/[%20]/gi," ").split("&")[0];a-e-n<100&&(d(m+1),console.log(c))}),[t,d,m]));return Object(r.useEffect)((function(){var e=t.search,a=decodeURI(e).split("=")[1].replace(/[%20]/gi," ").split("&")[0];l(a),p(Le(a,0,m))}),[p,t,b,m]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ke,{title:"\uac80\uc0c9 | HappReads"}),c.a.createElement("section",{className:ba("search-result-container")},c.a.createElement("h1",{className:"search-keyword"},"\uac80\uc0c9 \ud0a4\uc6cc\ub4dc: ",o),c.a.createElement(de,{booklist:E,from:"search"})))},fa=a(94),ga=a.n(fa);V.a.config(),F.a.defaults.baseURL="https://happread.herokuapp.com/";var Oa=function(e){return F.a.post("upload",e)},ja=Object(B.a)((Lt={},Object(x.a)(Lt,"UPLOAD_PENDING",(function(e,t){return Object(O.a)({},e,{pending:!0,error:!1})})),Object(x.a)(Lt,"UPLOAD_SUCCESS",(function(e,t){return{success:!0,pending:!1,error:!1}})),Object(x.a)(Lt,"UPLOAD_FAILURE",(function(e,t){return Object(O.a)({},e,{pending:!1,error:!0})})),Lt),{pending:!1,error:!1,success:!1}),ha=E.a.bind(ga.a),ka=function(){var e=Object(r.useState)({selected:null,title:"",authors:[],author:"",isbn:"",contents:"",genres:""}),t=Object(u.a)(e,2),a=t[0],n=t[1],o=Object(G.c)(),l=Object(G.d)((function(e){return e.login})).profile,i=Object(G.d)((function(e){return e.upload})),s=(i.pending,i.error,i.success,Object(r.useCallback)((function(e){var t=e.target;n(Object(O.a)({},a,{author:t.value}))}),[a])),m=Object(r.useCallback)((function(e){var t=a.author,r=a.authors,c=e.keyCode;""!==t&&13===c&&n(Object(O.a)({},a,{authors:[].concat(Object(Se.a)(r),[t]),author:""}))}),[a]),d=Object(r.useCallback)((function(e){var t=e.target;n(Object(O.a)({},a,{title:t.value}))}),[a]),p=Object(r.useCallback)((function(e){var t=e.target;n(Object(O.a)({},a,{contents:t.value}))}),[a]),E=Object(r.useCallback)((function(e){var t=e.target;n(Object(O.a)({},a,{genres:t.value}))}),[a]),b=Object(r.useCallback)(function(){var e=Object(ae.a)(te.a.mark((function e(t){var n,r,c,i,s,u,m,d;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=l.user._id,r=a.selected,c=a.contents,i=a.title,s=a.authors,u=a.genres,(m=new FormData).append("thumbnail",r),m.append("title",i),m.append("authors",s),m.append("contents",c),m.append("uid",n),m.append("genres",u),e.next=12,o({type:"UPLOAD",payload:Oa(m)});case 12:d=e.sent,200===d.value.status&&(window.location.href="/");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,l,o]),v=a.title,f=a.authors,g=a.author,j=a.contents,h=a.genres;return c.a.createElement("section",{className:ha("book-upload")},c.a.createElement("section",{className:ha("form-container")},c.a.createElement("form",{onSubmit:b},c.a.createElement("div",{className:ha("upload-btn-wrapper")},c.a.createElement("img",{className:ha("preview-img"),alt:""}),c.a.createElement("div",{className:ha("btn-container"),style:{position:"relative"}},c.a.createElement("button",{className:ha("btn")},"\uc774\ubbf8\uc9c0 \uc120\ud0dd"),c.a.createElement("input",{type:"file",onChange:function(e){var t=e.target.files;n(Object(O.a)({},a,{selected:t[0]}));var r=URL.createObjectURL(t[0]);document.querySelector(".preview-img").src=r},required:!0}))),c.a.createElement("input",{type:"text",value:v,onChange:d,placeholder:"\ucc45 \uc774\ub984",required:!0}),c.a.createElement("div",{className:ha("authors")},function(e,t){return null===e||void 0===e?void 0:e.map((function(e){var a=Object(C.a)();return c.a.createElement("div",{className:ha("author-tag"),key:a},c.a.createElement("span",{className:ha("author-name")},e),c.a.createElement("span",{className:ha("author-x"),onClick:t},"x"))}))}(f,(function(e){var t=a.authors,r=e.target.previousSibling.innerHTML,c=t.filter((function(e){return e!==r}));n(Object(O.a)({},a,{authors:c}))})),c.a.createElement("input",{className:ha("author-input"),type:"text",placeholder:"\uc800\uc790 +",value:g,onChange:s,onKeyDown:m})),c.a.createElement("input",{type:"text",value:h,placeholder:"\ucc45 \uc7a5\ub974 ( ,\uad6c\ubd84\uc9c4\ud589)",onChange:E,required:!0}),c.a.createElement("textarea",{placeholder:"\uc694\uc57d",value:j,onChange:p,required:!0}),c.a.createElement("input",{type:"submit",value:"\uc81c\ucd9c"}))))},Sa=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(ke,{title:"Upload | HappReads"}),c.a.createElement(ka,null))},_a=a(95),Na=a.n(_a),wa=a(96),ya=a.n(wa),Ca=E.a.bind(ya.a),Ra=Object(s.g)((function(e){var t=e.history,a=e.getBooks,n=Object(r.useState)(""),o=Object(u.a)(n,2),l=o[0],i=o[1],s=Object(r.useCallback)((function(e){i(e.target.value)}),[]),m=function(e){e.preventDefault(),a(l,0,1),t.push("/search?p=".concat(l))};return c.a.createElement("div",{className:Ca("search-bar")},c.a.createElement("form",{className:Ca("form-container"),onSubmit:m},c.a.createElement(D.g,{className:Ca("search-icon"),onClick:m}),c.a.createElement("input",{type:"input",placeholder:"\ucc45 \uac80\uc0c9...",value:l,name:"q",onChange:s})))})),Ia=E.a.bind(Na.a),Pa=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)(!1),l=Object(u.a)(o,2),s=(l[0],l[1]),m=Object(r.useState)(!1),d=Object(u.a)(m,2),p=d[0],E=d[1],b=Object(G.c)(),v=Object(G.d)((function(e){return e.login})),f=v.isLoggedIn,g=v.profile,O=Object(r.useCallback)(Object(ae.a)(te.a.mark((function e(){var t;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=pt())try{b(J(t))}catch(a){console.log(a)}case 2:case"end":return e.stop()}}),e)}))),[b]),j=Object(r.useCallback)(Object(ae.a)(te.a.mark((function e(){var t;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b({type:"LOGOUT",payload:F.a.post("logout")});case 2:t=e.sent,200===t.value.status&&(localStorage.removeItem("atk"),s(!0),window.location.reload());case 5:case"end":return e.stop()}}),e)}))),[b]),h=function(e){var t=window.innerWidth;E(t>=320&&t<=425)};Object(r.useEffect)((function(){return O(),h(),window.addEventListener("resize",h),function(){window.removeEventListener("resize",h)}}),[O]);var k=Object(r.useCallback)((function(){n((function(e){return!e}))}),[n]);return c.a.createElement("header",{className:Ia("header")},c.a.createElement("nav",{className:Ia(["nav",p&&"mobile"])},c.a.createElement("div",{className:Ia("title")},c.a.createElement(i.b,{to:"/"},c.a.createElement("span",{className:Ia("fr")},"Happ"),c.a.createElement("span",{className:Ia("en")},"Reads"))),c.a.createElement(Ra,{getBooks:Le}),p&&c.a.createElement("ul",{className:Ia("mobile-menu-bar"),onClick:k},c.a.createElement("li",null),c.a.createElement("li",null),c.a.createElement("li",null)),!1===p&&c.a.createElement("div",{className:Ia("menu-container")},c.a.createElement("div",{className:Ia("community")},c.a.createElement(i.b,{to:"/community/reviews"},c.a.createElement(D.b,null),c.a.createElement("p",null,"\ucc45 \ub9ac\ubdf0"))),c.a.createElement("ul",{className:Ia("ul")},f?c.a.createElement(c.a.Fragment,null,c.a.createElement("li",null,c.a.createElement("span",null,c.a.createElement("img",{src:g.user?g.user.avatarUrl:"",alt:"me",onClick:k})),c.a.createElement("div",{className:Ia("menu","".concat(a?"show":""))},c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(i.b,{to:"/me"},"\ud504\ub85c\ud544")),c.a.createElement("li",null,c.a.createElement(i.b,{to:"/upload"},"\ucc45 \uc5c5\ub85c\ub4dc")),c.a.createElement("li",{onClick:j},"\ub85c\uadf8\uc544\uc6c3")),c.a.createElement("div",{className:Ia("callout")})))):c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:Ia("login")},c.a.createElement(i.b,{to:"/login"},"\ub85c\uadf8\uc778")),c.a.createElement("li",null,c.a.createElement(i.b,{to:"/signup"},"\uac00\uc785")))))),p&&a&&c.a.createElement("ul",{className:Ia("mobile-menu-container"),onClick:k},f?c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:Ia("mobile-menu-item")},c.a.createElement(i.b,{to:"/me"},c.a.createElement(D.m,null)," \ud504\ub85c\ud544")),c.a.createElement("li",{className:Ia("mobile-menu-item")},c.a.createElement(i.b,{to:"/upload"},c.a.createElement(D.l,null)," \ucc45 \uc5c5\ub85c\ub4dc")),c.a.createElement("li",{className:Ia("mobile-menu-item")},c.a.createElement(i.b,{to:"/community/reviews"},c.a.createElement(D.b,null)," \ucc45 \ub9ac\ubdf0")),c.a.createElement("li",{className:Ia("mobile-menu-item"),onClick:j},c.a.createElement(D.i,null)," \ub85c\uadf8\uc544\uc6c3")):c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:Ia("mobile-menu-item")},c.a.createElement(i.b,{to:"/login"},c.a.createElement(D.h,null)," \ub85c\uadf8\uc778")),c.a.createElement("li",{className:Ia("mobile-menu-item")},c.a.createElement(i.b,{to:"/signup"},c.a.createElement(D.n,null)," \uac00\uc785")),c.a.createElement("li",{className:Ia("mobile-menu-item")},c.a.createElement(i.b,{to:"/community/reviews"},c.a.createElement(D.b,null)," \ucc45 \ub9ac\ubdf0")))))},La=a(97),Ta=a.n(La),Ua=a(98),Da=a.n(Ua),Ga=E.a.bind(Da.a),xa=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(ke,{title:"404 Error | HappReads"}),c.a.createElement("section",{className:Ga("nomatch-section")},c.a.createElement("h1",null,"404 Not Found"),c.a.createElement("img",{src:Ta.a,alt:"404"})))},Ba=a(99),Aa=a.n(Ba),Fa=E.a.bind(Aa.a),Ha=function(){var e=Object(r.useState)({type:1,openModal:!1,lastPos:90,item:{},status:""}),t=Object(u.a)(e,2),a=t[0],n=t[1],o=Object(G.c)(),l=Object(G.d)((function(e){return e.login})),s=l.profile,m=l.isLoggedIn,d=Object(G.d)((function(e){return e.user})).profile,p=Object(r.useCallback)(Object(ae.a)(te.a.mark((function e(){var t,a,n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=pt())&&o(J(t)),a=window.location.hash.split("/"),n=a[a.length-1],o(Ut(n));case 5:case"end":return e.stop()}}),e)}))),[o]);Object(r.useEffect)((function(){return p(),window.scrollTo(0,0),function(){}}),[p]);var E=Object(r.useCallback)(function(){var e=Object(ae.a)(te.a.mark((function e(t,a,n){var r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o(Q(t,a,n));case 3:r=e.sent,200===r.value.status&&p(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),[o,p]),b=Object(r.useCallback)((function(e){return function(t){n(Object(O.a)({},a,{openModal:!0,item:e}))}}),[a]),v=Object(r.useCallback)((function(e){n(Object(O.a)({},a,{openModal:!1}))}),[a]),f=Object(r.useCallback)((function(e){return function(){var t=Object(ae.a)(te.a.mark((function t(a){var n;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!m){t.next=13;break}return t.prev=2,t.next=5,o((r=Object(O.a)({},e),{type:"EDIT_BOOK",payload:Ie(r)}));case 5:n=t.sent,200===n.value.status&&p(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:case"end":return t.stop()}var r}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}),[o,p,m]),g=a.openModal,j=a.item;return c.a.createElement("section",{className:Fa("book-shelve")},g?c.a.createElement(le,{handleCancel:v,handleSubmit:f,item:j}):null,c.a.createElement("div",null,c.a.createElement("p",{className:Fa("shelve-header")},d?d.email:"","\uc758 \ucc45\uc7a5")),c.a.createElement("div",null,c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"\ucee4\ubc84"),c.a.createElement("th",null,"\uc81c\ubaa9"),c.a.createElement("th",null,"\uc800\uc790"),c.a.createElement("th",null,"\ud3c9\uade0"),c.a.createElement("th",null,"\uc0dd\uc131 \ub0a0\uc9dc"),(null===s||void 0===s?void 0:s.user)&&d&&d._id===s.user._id?c.a.createElement("th",null,"\uc124\uc815"):null)),c.a.createElement("tbody",null,function(){var e,t=s.user;return t?null===t||void 0===t?void 0:null===(e=t.uploaded)||void 0===e?void 0:e.map((function(e){return c.a.createElement("tr",{key:e._id},c.a.createElement("td",null,c.a.createElement(i.b,{to:"/book/".concat(e._id)},c.a.createElement("img",{src:e.thumbnail,alt:e.thumbnail}))),c.a.createElement("td",null,c.a.createElement(i.b,{to:"/book/".concat(e._id)},e.title)),c.a.createElement("td",null,e.authors.length>1?"".concat(e.authors[0]," *"):e.authors[0]),c.a.createElement("td",null,e.votes?Et(e.votes):0),c.a.createElement("td",null,jt()(e.createdAt).format("YY\ub144MM\uc6d4DD\uc77c HH:MM:SS")),c.a.createElement("td",{className:Fa("settings uploaded")},c.a.createElement("p",{onClick:b(e)},"\uc218\uc815"),c.a.createElement("p",{onClick:E},"X")))})):null}()))))},Va=a(100),Ka=a.n(Va),Ma=E.a.bind(Ka.a),Wa=function(e){e.path;return c.a.createElement("div",{className:Ma("category")},c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(i.b,{to:"/community/reviews"},"\ucd5c\uadfc \ucc45 \ub9ac\ubdf0"))))},Ya=a(101),qa=a.n(Ya),za=E.a.bind(qa.a),Ja=function(e){var t=e.path,a=e.isLoading,n=e.reviews,r=e.loadReviewsPending,o=e.loadReviewsDone,l=e.loadMore,s=e.toggleMore,u=e.more,m=e.handleLike;return a||r?c.a.createElement(Ae,null):c.a.createElement("section",{className:za("community-container")},"reviews"===t&&c.a.createElement("section",{className:za("reviews")},function(e){if("reviews"===e)return c.a.createElement(c.a.Fragment,null,0===n.length&&c.a.createElement("p",{style:{textAlign:"center"}},"\ucd5c\uadfc \ub9ac\ubdf0\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."),c.a.createElement(c.a.Fragment,null,n.length>0&&n.map((function(e){return c.a.createElement("section",{key:Object(C.a)(),className:za(["card","row"])},c.a.createElement("section",{className:za("first-col")},c.a.createElement(i.b,{to:"/book/".concat(e&&e.book&&e.book._id)},c.a.createElement("img",{src:e&&e.book&&e.book.thumbnail,alt:e&&e.book&&e.book.title})),c.a.createElement("p",{className:za("like")},c.a.createElement(be.a,{className:za("heart"),icon:ve.d,onClick:m(e)})," ",e&&e.likes&&e.likes.length," \uc88b\uc544\uc694")),c.a.createElement("section",{className:za("second-col")},c.a.createElement("p",{className:za("date")},e&&jt()(e.createdAt).format("YYYY/MM/DD HH:MM:DD")),c.a.createElement("p",{className:za("reviewer")},c.a.createElement(i.b,{to:"/profile/".concat(e&&e.reviewer._id)},e&&e.reviewer.email.split("@")[0])),c.a.createElement("h4",{className:za("title")},c.a.createElement(i.b,{to:"/book/".concat(e&&e.book&&e.book._id)},e&&e.book&&e.book.title)),c.a.createElement("section",{className:za("content")},c.a.createElement("img",{src:e&&e.reviewer&&e.reviewer.avatarUrl,alt:e&&e.reviewer.email}),c.a.createElement("article",null,c.a.createElement("p",{className:za("content-text")},!1===u&&e&&e.content&&e.content.length>=50?"".concat(e.content.substring(0,50),"..."):e.content),e&&e.content&&e.content.length>=50?c.a.createElement("p",{className:za("more"),onClick:s},u?"\uc904\uc774\uae30":"\ub354\ubcf4\uae30"):null))))})),!1===o&&c.a.createElement("button",{className:za("load-more-btn"),onClick:l},"\ub354 \ubcf4\uae30")))}("reviews")))},Xa=function(e){var t=e.history.location.pathname.substr(1).split("/")[1],a=Object(r.useState)(!0),n=Object(u.a)(a,2),o=n[0],l=n[1],i=Object(r.useState)(!1),s=Object(u.a)(i,2),m=s[0],d=s[1],p=Object(r.useState)(1),E=Object(u.a)(p,2),b=E[0],v=E[1],f=Object(G.d)((function(e){return e.review})),g=f.reviews,O=f.loadReviewsPending,j=f.loadReviewsDone,h=Object(G.d)((function(e){return e.login})),k=h.profile,S=h.isLoggedIn,_=Object(G.c)(),N=Object(r.useCallback)(function(){var e=Object(ae.a)(te.a.mark((function e(){var t,a=arguments;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.length>0&&void 0!==a[0]?a[0]:1;try{_(wt({limit:5,page:t}))}catch(n){console.log(n)}case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),[_]),w=Object(r.useCallback)((function(){d((function(e){return!e}))}),[]),y=Object(r.useCallback)((function(e){console.log("lood more"),N(b+1),v((function(e){return e+1}))}),[N,b]),C=Object(r.useCallback)((function(e){return function(){var t=k.user;S?_(It("like",e._id,t._id)):alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4")}}),[k,S,_]);return Object(r.useEffect)((function(){l(!0),N(),l(!1)}),[N,_,b]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ke,{title:"Book Reviews | HappReads",keywords:"\ucc45 \ub9ac\ubdf0, \ub9ac\ubdf0, \ucd5c\uadfc \ub9ac\ubdf0"}),c.a.createElement(Wa,{path:t}),c.a.createElement(Ja,{path:t,isLoading:o,reviews:g,loadingReviewsDone:j,loadReviewsPending:O,loadMore:y,more:m,toggleMore:w,handleLike:C}))},Qa=a(102),Za=a.n(Qa),$a=E.a.bind(Za.a),en=function(){var e=Object(r.useState)(!0),t=Object(u.a)(e,2),a=t[0],n=t[1],o=Object(r.useCallback)((function(){window.scrollTo(0,0)}),[]),l=Object(r.useCallback)((function(){var e=window.pageYOffset;n(e<=600)}),[]);return Object(r.useEffect)((function(){return window.addEventListener("scroll",l),function(){window.removeEventListener("scroll",l)}}),[l]),c.a.createElement("button",{className:$a(["floating-button",a?"hide":"show"]),onClick:o},"\uc704\ub85c")};var tn,an=function(){return c.a.createElement(i.a,null,c.a.createElement(Pa,null),c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"/",exact:!0,component:Fe}),c.a.createElement(s.b,{path:"/book/:id",component:ia}),c.a.createElement(s.b,{path:"/login",component:$e}),c.a.createElement(s.b,{path:"/search",component:va}),c.a.createElement(s.b,{path:"/signup",component:it}),c.a.createElement(s.b,{path:"/me",component:Mt}),c.a.createElement(s.b,{path:"/upload",component:Sa}),c.a.createElement(s.b,{path:"/community/reviews",component:Xa}),c.a.createElement(s.b,{path:"/community/top-readers",component:Xa}),c.a.createElement(s.b,{path:"/community/top-reviewers",component:Xa}),c.a.createElement(s.b,{path:"/profile/:id",component:Mt}),c.a.createElement(s.b,{path:"/shelve/:id",component:Ha}),c.a.createElement(s.b,{component:xa})),c.a.createElement(en,null),c.a.createElement(da,null))},nn=a(28);V.a.config(),F.a.defaults.baseURL="https://happread.herokuapp.com/";var rn=Object(B.a)((tn={},Object(x.a)(tn,"POST_SHELVE_PENDING",(function(e,t){return{pending:!0,error:!1}})),Object(x.a)(tn,"POST_SHELVE_SUCCESS",(function(e,t){})),Object(x.a)(tn,"POST_SHELVE_FAILURE",(function(e,t){return{pending:!1,error:!0}})),tn),{pending:!1,error:!1}),cn=Object(nn.c)({books:De,signup:lt,login:$,review:Pt,shelve:rn,user:Dt,upload:ja}),on=(a(204),a(103)),ln=Object(on.a)({promiseTypeSuffixes:["PENDING","SUCCESS","FAILURE"]}),sn=Object(nn.d)(cn,Object(nn.a)(ln));l.a.render(c.a.createElement(G.a,{store:sn},c.a.createElement(an,null)),document.getElementById("root"))},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){e.exports=a.p+"static/media/go_back.62137145.png"},98:function(e,t,a){},99:function(e,t,a){}},[[105,1,2]]]);
//# sourceMappingURL=main.e7bbe1e3.chunk.js.map